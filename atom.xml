<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Â∞èÈôàÁöÑ‰ΩéÂàÜÈ±ºÂ°ò üé£</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://chrisdeo.github.io/"/>
  <updated>2020-11-08T08:51:59.909Z</updated>
  <id>https://chrisdeo.github.io/</id>
  
  <author>
    <name>Leo Chan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>redux-sagaÂàù‰ΩìÈ™å</title>
    <link href="https://chrisdeo.github.io/2020/11/08/redux-saga%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>https://chrisdeo.github.io/2020/11/08/redux-sagaÂàù‰ΩìÈ™å/</id>
    <published>2020-11-08T03:10:53.000Z</published>
    <updated>2020-11-08T08:51:59.909Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x5173;&#x4E8E;redux&#x751F;&#x6001;&#x4E2D;&#x5FAA;&#x5E8F;&#x6E10;&#x8FDB;&#x51FA;&#x73B0;&#x7684;redux-thunk&#x3001;redux-promise&#x3001;redux-saga&#x3001;redux-observable&#x7B49;&#x5F02;&#x6B65;&#x4E2D;&#x95F4;&#x4EF6;&#x5E93;&#x5176;&#x5B9E;&#x672C;&#x8D28;&#x4E0A;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x8FFD;&#x8E2A;&#x7BA1;&#x7406;&#x95EE;&#x9898;&#xFF0C;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x51FA;&#x73B0;&#x90A3;&#x4E48;&#x591A;&#x65B9;&#x6848;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x4F7F;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x903B;&#x8F91;&#x8868;&#x8FF0;&#x66F4;&#x52A0;&#x7EAF;&#x7CB9;&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x5047;&#x5982;&#x8BF4;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x6211;&#x4EEC;&#x7684;&#x5168;&#x5C40;&#x72B6;&#x6001;&#x4FEE;&#x6539;&#x8FDB;&#x884C;&#x8FFD;&#x8E2A;&#xFF08;&#x5BF9;&#x5E94;&#x7684;<code>action</code>&#x6D3E;&#x53D1;&#xFF0C;Redux Devtools&#x89C2;&#x5BDF;&#xFF09;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x573A;&#x666F;&#xFF0C;React&#x81EA;&#x8EAB;&#x63D0;&#x4F9B;&#x7684;Context API&#x662F;&#x5B8C;&#x5168;&#x591F;&#x7528;&#x4E86;&#x2026;</p><p>&#x2003;&#x2003;&#x793E;&#x533A;&#x4E2D;&#x6709;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5BF9;&#x6E10;&#x8FDB;&#x5F0F;&#x6F14;&#x53D8;&#x7684;&#x63CF;&#x8FF0;&#x6211;&#x89C9;&#x5F97;&#x6BD4;&#x8F83;&#x8D34;&#x5207;&#xFF0C;&#x5185;&#x5BB9;&#x6211;&#x8D34;&#x5728;&#x4E0B;&#x9762;&#xFF0C;<a href="https://zhuanlan.zhihu.com/p/33925435" target="_blank" rel="noopener">&#x539F;&#x6587;&#x94FE;&#x63A5;&#x1F517;</a></p><h3 id="&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x6E10;&#x8FDB;&#x5F0F;&#x63D0;&#x5347;&#x4F7F;&#x7528;&#x5BF9;&#x6BD4;"><a href="#&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x6E10;&#x8FDB;&#x5F0F;&#x63D0;&#x5347;&#x4F7F;&#x7528;&#x5BF9;&#x6BD4;" class="headerlink" title="&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x6E10;&#x8FDB;&#x5F0F;&#x63D0;&#x5347;&#x4F7F;&#x7528;&#x5BF9;&#x6BD4;"></a>&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x6E10;&#x8FDB;&#x5F0F;&#x63D0;&#x5347;&#x4F7F;&#x7528;&#x5BF9;&#x6BD4;</h3><h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><ul><li>&#x6211;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E14;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;/&#x6539;&#x53D8;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E2D;&#x7684;&#x6570;&#x636E;</li></ul><h4 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h4><ul><li>&#x6211;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E14;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;/&#x6539;&#x53D8;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E2D;&#x7684;&#x6570;&#x636E;</li><li>&#x6211;&#x9700;&#x8981;&#x5168;&#x7A0B;&#x8DDF;&#x8E2A;/&#x7BA1;&#x7406; action &#x7684;&#x5206;&#x53D1;&#x8FC7;&#x7A0B;/&#x987A;&#x5E8F;</li></ul><h4 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h4><ul><li>&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E14;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;/&#x6539;&#x53D8;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E2D;&#x7684;&#x6570;&#x636E;</li><li>&#x6211;&#x9700;&#x8981;&#x5168;&#x7A0B;&#x8DDF;&#x8E2A;/&#x7BA1;&#x7406; action &#x7684;&#x5206;&#x53D1;&#x8FC7;&#x7A0B;/&#x987A;&#x5E8F;</li><li><strong>&#x6211;&#x9700;&#x8981;&#x7EC4;&#x4EF6;&#x5BF9;&#x540C;&#x6B65;&#x6216;&#x5F02;&#x6B65;&#x7684; action &#x65E0;&#x611F;&#xFF0C;&#x8C03;&#x7528;&#x5F02;&#x6B65; action &#x65F6;&#x4E0D;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x5730;&#x4F20;&#x5165; dispatch</strong></li></ul><h4 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h4><ul><li>&#x6211;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E14;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;/&#x6539;&#x53D8;&#x5168;&#x5C40;&#x6570;&#x636E;&#x6E90;&#x4E2D;&#x7684;&#x6570;&#x636E;</li><li>&#x6211;&#x9700;&#x8981;&#x5168;&#x7A0B;&#x8DDF;&#x8E2A;/&#x7BA1;&#x7406; action &#x7684;&#x5206;&#x53D1;&#x8FC7;&#x7A0B;/&#x987A;&#x5E8F;</li><li>&#x6211;&#x9700;&#x8981;&#x7EC4;&#x4EF6;&#x5BF9;&#x540C;&#x6B65;&#x6216;&#x5F02;&#x6B65;&#x7684; action &#x65E0;&#x611F;&#xFF0C;&#x8C03;&#x7528;&#x5F02;&#x6B65; action &#x65F6;&#x4E0D;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x5730;&#x4F20;&#x5165; dispatch</li><li><strong>&#x6211;&#x9700;&#x8981;&#x58F0;&#x660E;&#x5F0F;&#x5730;&#x6765;&#x8868;&#x8FF0;&#x590D;&#x6742;&#x5F02;&#x6B65;&#x6570;&#x636E;&#x6D41;&#xFF08;&#x5982;&#x957F;&#x6D41;&#x7A0B;&#x8868;&#x5355;&#xFF0C;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#x540E;&#x91CD;&#x8BD5;&#x7B49;&#xFF09;&#xFF0C;&#x547D;&#x4EE4;&#x5F0F;&#x7684; thunk &#x5BF9;&#x4E8E;&#x590D;&#x6742;&#x5F02;&#x6B65;&#x6570;&#x636E;&#x6D41;&#x7684;&#x8868;&#x73B0;&#x529B;&#x6709;&#x9650;</strong></li></ul><h3 id="saga&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x600E;&#x4E48;&#x6765;&#x7684;"><a href="#saga&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x600E;&#x4E48;&#x6765;&#x7684;" class="headerlink" title="saga&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x600E;&#x4E48;&#x6765;&#x7684;"></a>saga&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x600E;&#x4E48;&#x6765;&#x7684;</h3><p>&#x2003;&#x2003;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x540E;&#x7684;&#x56DE;&#x7B54;&#x89E3;&#x91CA;&#x662F;<code>redux-saga</code>&#x7684;<code>saga</code>&#x8FD9;&#x4E00;&#x547D;&#x540D;&#x5176;&#x5B9E;&#x6765;&#x6E90;&#x4E8E;&#x540E;&#x7AEF;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5728;&#x540E;&#x7AEF;&#x9886;&#x57DF;&#x4E2D;<code>saga</code>&#x63CF;&#x8FF0;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x800C;&#x5728;<code>redux-saga</code>&#x4E2D;&#x5219;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x6D41;&#x7A0B;&#x7BA1;&#x7406;&#xFF08;process manager&#xFF09;&#x4E00;&#x6837;&#x7684;&#x6982;&#x5FF5;&#x3002;</p><p>&#x2003;&#x2003;<a href="https://stackoverflow.com/questions/34570758/why-do-we-need-middleware-for-async-flow-in-redux/34623840#34623840" target="_blank" rel="noopener">&#x4F20;&#x9001;&#x94FE;&#x63A5;&#x1F517;</a>, &#x539F;&#x6587;&#x5176;&#x5B9E;&#x8BA8;&#x8BBA;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4EEC;&#x8981;&#x5728;Redux&#x4E0B;&#x6574;&#x90A3;&#x4E48;&#x591A;&#x5F02;&#x6B65;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x8BDD;&#x9898;&#x8BA8;&#x8BBA;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x56DE;&#x7B54;&#x90FD;&#x975E;&#x5E38;&#x4E13;&#x4E1A;&#x53CA;&#x5177;&#x6709;&#x6307;&#x5BFC;&#x610F;&#x4E49;&#xFF0C;&#x63A8;&#x8350;&#x9605;&#x8BFB;&#x3002;</p><h3 id="redux-saga&#x521D;&#x4F53;&#x9A8C;&#xFF08;&#x4F2A;&#xFF09;"><a href="#redux-saga&#x521D;&#x4F53;&#x9A8C;&#xFF08;&#x4F2A;&#xFF09;" class="headerlink" title="redux-saga&#x521D;&#x4F53;&#x9A8C;&#xFF08;&#x4F2A;&#xFF09;"></a>redux-saga&#x521D;&#x4F53;&#x9A8C;&#xFF08;&#x4F2A;&#xFF09;</h3><p>&#x2003;&#x2003;&#x4E25;&#x683C;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x5E76;&#x4E0D;&#x662F;&#x521D;&#x6B21;&#x63A5;&#x89E6;<code>redux-saga</code>&#xFF08;&#x7684;&#x8BED;&#x6CD5;&#xFF09;&#xFF0C;&#x66FE;&#x7ECF;&#x505A;&#x8FC7;&#x7684;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x7684;dva&#x5168;&#x5BB6;&#x6876;&#x642D;&#x5EFA;&#x7684;&#xFF0C;&#x4ED6;&#x4EEC;&#x5185;&#x90E8;&#x96C6;&#x6210;&#x7684;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x5C31;&#x662F;&#x5C01;&#x88C5;&#x7684;saga&#x7684;&#x4E1C;&#x897F;&#x3002;&#x4E0D;&#x8FC7;&#x90A3;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x7EAF;&#x7684;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x662F;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x5C31;&#x7528;&#x5B83;&#x7684;&#x8111;&#x56DE;&#x8DEF;&#x3002;&#x81EA;&#x8EAB;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x6027;&#x7684;&#x8003;&#x91CF;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x7528;&#x5B83;&#xFF0C;&#x4EC5;&#x662F;&#x56E0;&#x4E3A;&#x5C31;&#x5F53;&#x65F6;&#x800C;&#x8A00;&#x6BD4;&#x8F83;&#x65B0;&#xFF1F;&#x73B0;&#x5728;review&#x56DE;&#x8FC7;&#x53BB;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x53D1;&#x73B0;&#x5F53;&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5230;&#x4EFB;&#x4F55;<code>redux-saga</code>&#x771F;&#x6B63;&#x5177;&#x6709;&#x4F18;&#x52BF;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8DDF;&#x7740;&#x4EE5;&#x524D;&#x7684;<code>redux-thunk</code>&#x7167;&#x732B;&#x753B;&#x864E;&#x7684;&#x7B80;&#x5355;&#x66FF;&#x6362;&#x4E86;&#x4E00;&#x4E0B;&#x3002;</p><p>&#x2003;&#x2003;&#x56DE;&#x5230;&#x6B63;&#x9898;&#xFF0C;&#x5B66;&#x4E60;&#x4E00;&#x95E8;&#x5E93;&#x7684;&#x6700;&#x5FEB;&#x65B9;&#x5F0F;&#x80AF;&#x5B9A;&#x662F;&#x53BB;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x67E5;&#x9605;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x6210;&#x719F;&#x7684;&#x5E93;&#x7684;&#x5B98;&#x65B9;&#x90FD;&#x4F1A;&#x96C6;&#x6210;&#x5B8C;&#x6210;&#x7684;&#x4F7F;&#x7528;api&#x8BF4;&#x660E;&#x548C;&#x63D0;&#x4F9B;&#x7ED9;&#x63A5;&#x89E6;&#x8005;&#x7684;demo&#x3002;</p><p>&#x2003;&#x2003;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x521D;&#x5B66;&#x8005;&#x4F7F;&#x7528;&#x7684;&#x7B80;&#x6613;&#x8BA1;&#x6570;demo&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x5F0F;&#x62C9;&#x53D6;&#x6D4B;&#x8BD5;&#x3002;PS,&#x5B8C;&#x6574;&#x529F;&#x80FD;&#x5728;sagas&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x5728;9966&#x7AEF;&#x53E3;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/redux-saga/redux-saga-beginner-tutorial.git</span></span><br><span class="line">git checkout -t origin/sagas</span><br><span class="line">npm i </span><br><span class="line">npm run start</span><br><span class="line">&#x6253;&#x5F00; localhost:<span class="number">9966</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;ÂÖ≥‰∫éreduxÁîüÊÄÅ‰∏≠Âæ™Â∫èÊ∏êËøõÂá∫Áé∞ÁöÑredux-thunk„ÄÅredux-promise„ÄÅredux-saga„ÄÅredux-observableÁ≠âÂºÇÊ≠•‰∏≠Èó¥‰ª∂Â∫ìÂÖ∂ÂÆûÊú¨Ë¥®‰∏äÈÉΩÊòØ‰∏∫‰∫ÜÂ§ÑÁêÜ‰∏Ä‰∏™Áä∂ÊÄÅËøΩË∏™ÁÆ°ÁêÜÈóÆÈ¢òÔºåËá≥‰∫é‰∏∫‰ªÄ‰πà‰ºöÂá∫Áé∞ÈÇ£‰πàÂ§öÊñπÊ°àÔºåÂÆûÈôÖ‰∏äÈÉΩÊòØ‰∏∫‰∫Ü‰ΩøÊàë‰ª¨ÁöÑÁªÑ‰ª∂ÈÄªËæëË°®Ëø∞Êõ¥Âä†Á∫ØÁ≤π„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="redux" scheme="https://chrisdeo.github.io/tags/redux/"/>
    
      <category term="Redux" scheme="https://chrisdeo.github.io/tags/Redux/"/>
    
      <category term="‰∏≠Èó¥‰ª∂" scheme="https://chrisdeo.github.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
      <category term="redux-saga" scheme="https://chrisdeo.github.io/tags/redux-saga/"/>
    
  </entry>
  
  <entry>
    <title>Êó†‰∫ãÂèëÂ∏É‰∏Ä‰∏™npmÂ∑•ÂÖ∑ÂåÖÁé©Áé©</title>
    <link href="https://chrisdeo.github.io/2020/09/28/%E6%97%A0%E4%BA%8B%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AAnpm%E5%B7%A5%E5%85%B7%E5%8C%85%E7%8E%A9%E7%8E%A9/"/>
    <id>https://chrisdeo.github.io/2020/09/28/Êó†‰∫ãÂèëÂ∏É‰∏Ä‰∏™npmÂ∑•ÂÖ∑ÂåÖÁé©Áé©/</id>
    <published>2020-09-28T07:58:17.000Z</published>
    <updated>2020-11-08T08:51:59.909Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4E4B;&#x524D;&#x4E00;&#x76F4;&#x60F3;&#x6574;&#x4E2A;&#x53D1;&#x5E03;&#x5230;npm&#x4E0A;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x65B9;&#x4FBF;&#x4E4B;&#x540E;&#x7684;&#x67D0;&#x4E2A;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x8FC7;&#x516C;&#x53F8;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8BBE;&#x65BD;&#x6BD4;&#x8F83;&#x5168;&#x9762;&#xFF0C;&#x4E14;&#x90FD;&#x67B6;&#x8BBE;&#x5728;&#x5185;&#x90E8;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x56FA;&#x6CA1;&#x4EC0;&#x4E48;&#x673A;&#x4F1A;&#x3002;&#x76F4;&#x5230;&#x540E;&#x7EED;&#x63A5;&#x624B;&#x6D77;&#x5916;&#x9879;&#x76EE;&#xFF0C;&#x53D1;&#x73B0;&#x591A;&#x8BED;&#x8A00;&#x5904;&#x7406;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x4F9D;&#x8D56;&#x4E00;&#x4E2A;&#x8001;&#x7684;Excel&#x5B8F;&#x811A;&#x672C;&#x8FDB;&#x884C;js&#x9759;&#x6001;&#x6587;&#x4EF6;&#x751F;&#x6210;&#xFF0C;&#x7075;&#x6D3B;&#x6027;&#x975E;&#x5E38;&#x5DEE;&#xFF0C;&#x53EA;&#x8981;&#x539F;&#x672C;&#x6587;&#x6863;&#x683C;&#x5F0F;&#x6216;&#x7ED3;&#x6784;&#x6539;&#x53D8;&#x5C31;&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x800C;&#x4E14;&#x7531;&#x4E8E;&#x5386;&#x53F2;&#x539F;&#x56E0;&#xFF0C;&#x76EE;&#x524D;&#x6587;&#x6863;&#x90FD;&#x4E0A;&#x4E86;&#x4E91;&#x7EF4;&#x62A4;&#xFF08;&#x7ED3;&#x6784;&#x5927;&#x6539;&#xFF09;&#xFF0C;&#x4EE5;&#x524D;&#x4F1A;&#x5199;Excel&#x811A;&#x672C;&#x7684;&#x5144;&#x5F1F;&#x4E5F;&#x8DD1;&#x8DEF;&#x4E86;&#x3002;&#x81F4;&#x4F7F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x505A;&#x6D77;&#x5916;&#x9700;&#x6C42;&#x7684;&#x65F6;&#x5019;&#x75AF;&#x72C2;cv&#xFF0C;&#x6548;&#x7387;&#x4F4E;&#x4E0B;&#x8FD8;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;&#x4E8E;&#x662F;&#x62BD;&#x7A7A;&#x7528;node&#x5F00;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x7684;&#x89E3;&#x6790;excel&#x751F;&#x6210;&#x9759;&#x6001;js&#x8D44;&#x6E90;&#x7684;cli&#xFF0C;&#x5E76;&#x53D1;&#x5E03;&#x5230;npm&#x4E0A;&#xFF0C;&#x81EA;&#x5DF1;&#x7EF4;&#x62A4;&#x7740;&#x73A9;&#xFF0C;&#x987A;&#x9053;&#x63D0;&#x5347;&#x4E00;&#x4E0B;&#x5F00;&#x53D1;&#x4F53;&#x9A8C;&#x3002;</p></blockquote><a id="more"></a><h3 id="&#x5305;&#x7684;&#x6784;&#x5EFA;"><a href="#&#x5305;&#x7684;&#x6784;&#x5EFA;" class="headerlink" title="&#x5305;&#x7684;&#x6784;&#x5EFA;"></a>&#x5305;&#x7684;&#x6784;&#x5EFA;</h3><p>&#x2003;&#x2003;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;npm&#x5305;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#x90A3;&#x80AF;&#x5B9A;&#x662F;&#x5148;&#x901A;&#x8FC7;<code>npm init</code>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>package.json</code>&#x63CF;&#x8FF0;&#xFF0C;&#x751F;&#x6210;&#x540E;&#x5927;&#x81F4;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;language_excel_parser&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;a transform utility for multi-language project&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;npm&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cli&quot;</span>,</span><br><span class="line">    <span class="string">&quot;translation&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;bin&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;translation-cli&quot;</span>: <span class="string">&quot;index.js&quot;</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;clean&quot;</span>: <span class="string">&quot;rm -rf src/assets/languages&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prebuild&quot;</span>: <span class="string">&quot;npm run clean&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;babel index.js -d lib&quot;</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;chrisleo&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;xlsx&quot;</span>: <span class="string">&quot;^0.16.7&quot;</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: {</span><br><span class="line">    <span class="attr">&quot;@babel/cli&quot;</span>: <span class="string">&quot;^7.11.6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;@babel/core&quot;</span>: <span class="string">&quot;^7.11.6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;@babel/preset-env&quot;</span>: <span class="string">&quot;^7.11.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;jest&quot;</span>: <span class="string">&quot;^26.5.2&quot;</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;<code>package.json</code>&#x5185;&#x90E8;&#x5C5E;&#x6027;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x63CF;&#x8FF0;&#x4F60;&#x7684;&#x5305;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x4E86;&#x5305;&#x540D;&#xFF0C;&#x4ECB;&#x7ECD;&#xFF0C;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5165;&#x53E3;&#xFF0C;cli&#x8FD0;&#x884C;&#x8F6F;&#x94FE;&#x63A5;&#xFF0C;&#x4F5C;&#x8005;&#xFF0C;&#x7248;&#x6743;&#xFF0C;&#x4EE3;&#x7801;&#x4F9D;&#x8D56;&#x7B49;&#x5185;&#x5BB9;&#x3002;</p><p>&#x2003;&#x2003;&#x5BF9;&#x4E8E;&#x6211;&#x5F00;&#x53D1;&#x7684;&#x5C06;Excel&#x8F6C;&#x5316;&#x6210;&#x9002;&#x914D;&#x6211;&#x9879;&#x76EE;&#x4E2D;&#x591A;&#x8BED;&#x8A00;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x672C;&#x7684;&#x5DE5;&#x5177;&#x6765;&#x8BF4;&#xFF0C;&#x5BF9;&#x6BD4;&#x90A3;&#x4E9B;&#x7EC4;&#x4EF6;&#x5E93;&#x3001;sdk&#xFF0C;&#x5B83;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;CLI&#x5DE5;&#x5177;&#x3002;<em>CLI&#x662F;Command-Line Interface&#x7684;&#x7B80;&#x79F0;</em>&#xFF0C;<strong>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x6210;&#x901A;&#x8FC7;&#x4E00;&#x884C;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x811A;&#x672C;&#x53BB;&#x5B9E;&#x73B0;&#x4E00;&#x7C7B;&#x573A;&#x666F;&#x4E0B;&#x7684;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x529F;&#x80FD;</strong>&#x3002;</p><p>&#x2003;&#x2003;&#x5173;&#x4E8E;<code>dependencies</code>&#x53CA;<code>devDependencies</code>&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x60F3;&#x8FD9;&#x91CC;&#x4E0D;&#x7528;&#x6D6A;&#x8D39;&#x7B14;&#x58A8;&#x591A;&#x8BF4;&#x3002;&#x6709;&#x4E00;&#x70B9;&#x63D0;&#x4E00;&#x4E0B;&#x5C31;&#x662F;&#x5982;&#x679C;&#x4F60;&#x7684;&#x8FD9;&#x4E2A;<code>npm</code>&#x5305;&#x662F;&#x670D;&#x52A1;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x53CA;&#x4E00;&#x4E9B;&#x8001;&#x7248;&#x672C;&#x7684;node&#x7684;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x4E0B;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x901A;&#x8FC7;babel&#x8FDB;&#x884C;ES5&#x7684;&#x517C;&#x5BB9;&#x8F6C;&#x5316;&#x3002;</p><p>&#x2003;&#x2003;&#x6211;&#x8BA4;&#x4E3A;&#x9700;&#x8981;&#x91CD;&#x70B9;&#x63D0;&#x7684;&#x662F;<code>bin</code>&#x53CA;<code>scripts</code>&#x3002;</p><h4 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h4><p>&#x2003;&#x2003;&#x8BE5;&#x5C5E;&#x6027;&#x5BF9;&#x5E94;&#x7684;&#x662F;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x65B0;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>index.js</code>&#x7684;node&#x811A;&#x672C;&#xFF0C;&#x8981;&#x8FD0;&#x884C;&#x5F97;&#x901A;&#x8FC7;<code>node index.js</code>&#x8DD1;&#x3002;&#x5F53;&#x4F60;&#x914D;&#x7F6E;&#x4E86;<code>bin</code>&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x6307;&#x5411;&#xFF0C;&#x4F7F;&#x7528;<code>npm link</code>&#x6216;&#x8005;<strong>&#x5168;&#x5C40;&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;</strong>&#x65F6;&#xFF0C;NPM&#x4F1A;&#x4E3A;<code>bin</code>&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x6587;&#x4EF6;&#x5728;<code>bin</code>&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8F6F;&#x94FE;&#x63A5;&#xFF0C;&#x5BF9;&#x4E8E;Windows&#x7CFB;&#x7EDF;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x5728;<code>C:\Users\{username}\AppData\Roaming\npm</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x82E5;&#x662F;&#x5C40;&#x90E8;&#x5B89;&#x88C5;&#x5219;&#x4F1A;&#x5728;&#x9879;&#x76EE;&#x7684;<code>./node_modules/.bin</code>&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8F6F;&#x94FE;&#x63A5;&#xFF09;&#xFF0C;MAC&#x4F1A;&#x5728;&#x5982;&#x4E0B;&#x7684;&#x76EE;&#x5F55;&#x94FE;&#x63A5;&#xFF1A;</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/translation-cli -&gt; /usr/local/lib/node_modules/language_excel_parser/index.js</span><br><span class="line">/usr/local/lib/node_modules/language_excel_parser -&gt; /Users/chendiyou/FE/language_excel_parser</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x4EC0;&#x4E48;&#x6548;&#x679C;&#x5462;&#xFF1F;&#x94FE;&#x63A5;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;<code>translation-cli</code>&#x8FBE;&#x5230;CLI&#x5305;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x8FDB;&#x884C;<code>node index.js</code>&#x4E00;&#x6837;&#x7684;&#x6548;&#x679C;&#x3002;</p><h4 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h4><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6211;&#x4E5F;&#x4E0D;&#x592A;&#x60F3;&#x591A;&#x63D0;&#xFF0C;&#x6709;&#x70B9;&#x7ECF;&#x9A8C;&#x7684;&#x9009;&#x624B;&#x90FD;&#x5BF9;&#x8FD9;&#x4E2A;&#x4E0D;&#x80FD;&#x518D;&#x719F;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x662F;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;CLI&#x5DE5;&#x5177;&#x7684;npm&#x5305;&#xFF0C;<code>scripts</code>&#x5185;&#x7684;&#x4E1C;&#x897F;&#x4F7F;&#x7528;&#x8005;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x6D89;&#x53CA;&#xFF08;&#x624B;&#x52A8;&#x72D7;&#x5934;&#x3002;</p><p>&#x2003;&#x2003;&#x6240;&#x4EE5;&#x2026;&#x8FD8;&#x662F;&#x53BB;&#x962E;&#x8001;&#x5E08;&#x7684;&#x535A;&#x5BA2;&#x770B;&#x5427;&#xFF0C;&#x5F88;&#x6E05;&#x695A;&#x3002;<a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener">&#x539F;&#x6587;&#x94FE;&#x63A5;&#x1F517;</a></p><h3 id="&#x5305;&#x7684;&#x53D1;&#x5E03;"><a href="#&#x5305;&#x7684;&#x53D1;&#x5E03;" class="headerlink" title="&#x5305;&#x7684;&#x53D1;&#x5E03;"></a>&#x5305;&#x7684;&#x53D1;&#x5E03;</h3><p>&#x2003;&#x2003;&#x8FD9;&#x91CC;&#x4F60;&#x8981;&#x786E;&#x8BA4;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x662F;&#x628A;&#x4F60;&#x7684;&#x4EE3;&#x7406;&#x6539;&#x8FC7;&#x6765;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x591A;&#x6570;&#x56FD;&#x5185;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x90FD;&#x4F1A;&#x5C06;npm&#x5305;&#x4E0B;&#x8F7D;&#x4EE3;&#x7406;&#x5230;<code>taobao</code>&#x6216;&#x8005;&#x522B;&#x7684;&#x56FD;&#x5185;&#x955C;&#x50CF;&#x6E90;&#x53BB;&#x4E0B;&#x8F7D;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x65E0;&#x6CD5;&#x767B;&#x9646;<code>npm</code>&#x5B98;&#x65B9;&#x5E76;&#x8FDB;&#x884C;&#x5305;&#x7684;&#x53D1;&#x5E03;&#x3002;&#x64CD;&#x4F5C;&#x65B9;&#x5F0F;&#xFF1A;</p><ol><li>&#x67E5;&#x770B;&#x76EE;&#x524D;npm&#x4EE3;&#x7406;&#x60C5;&#x51B5;&#xFF0C;<code>nrm ls</code> or <code>npm config ls</code>;&#x524D;&#x8005;&#x8981;&#x5148;&#x5B89;&#x88C5;ls&#xFF1B;</li><li>&#x5207;&#x6362;&#x56DE;&#x5B98;&#x65B9;&#x7684;&#x6E90;&#xFF0C;<code>nrm use npm</code> or <code>npm config set registry http://registry.npmjs.org</code>&#xFF1B;</li><li>&#x767B;&#x9646;&#x4F60;&#x7684;npm&#x8D26;&#x53F7;&#xFF0C;&#x8981;&#x53BB;&#x5B98;&#x65B9;&#x6CE8;&#x518C;&#x3002;<code>npm login</code> , <code>npm adduser</code>&#xFF1B;</li><li>&#x6253;&#x5305; <code>npm pack</code>&#xFF1B;</li><li>&#x53D1;&#x5E03; <code>npm publish</code>&#xFF1B;</li><li>&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x4FEE;&#x6539;<code>package.json</code>&#x4E2D;&#x7684;<code>version</code>&#x6216;&#x8005;&#x76F4;&#x63A5;&#x7528;&#x547D;&#x4EE4;<code>npm version patch</code>&#x66F4;&#x65B0;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8D70; 4 5&#x6B65;&#xFF1B;</li></ol><h3 id="&#x5F00;&#x53D1;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x95EE;&#x9898;"><a href="#&#x5F00;&#x53D1;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x95EE;&#x9898;" class="headerlink" title="&#x5F00;&#x53D1;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x95EE;&#x9898;"></a>&#x5F00;&#x53D1;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x95EE;&#x9898;</h3><p>&#x2003;&#x2003;&#x76F8;&#x4FE1;&#x6BCF;&#x4E2A;&#x4EBA;&#x521D;&#x6B21;&#x5F00;&#x53D1;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x8BB0;&#x5F55;&#x4E0B;&#x6211;&#x81EA;&#x5DF1;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x3002;</p><h4 id="&#x987B;&#x8981;&#x5934;&#x6587;&#x4EF6;&#x58F0;&#x660E;"><a href="#&#x987B;&#x8981;&#x5934;&#x6587;&#x4EF6;&#x58F0;&#x660E;" class="headerlink" title="&#x987B;&#x8981;&#x5934;&#x6587;&#x4EF6;&#x58F0;&#x660E;"></a>&#x987B;&#x8981;&#x5934;&#x6587;&#x4EF6;&#x58F0;&#x660E;</h4><p>&#x2003;&#x2003;&#x56E0;&#x4E3A;&#x6211;&#x662F;MAC&#x4E0A;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x5168;&#x5C40;&#x6267;&#x884C;bin&#x7684;&#x9047;&#x5230;&#x4E86;&#x4E2A;&#x627E;&#x4E0D;&#x5230;node&#x7C7B;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x89E3;&#x51B3;&#x5BF9;&#x7B56;:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// &#x5934;&#x6587;&#x4EF6;&#x58F0;&#x660E;&#xFF0C;&#x901A;&#x8FC7;env&#x6765;&#x627E;&#x5230;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;Node&#x542F;&#x52A8;&#x8DEF;&#x5F84;&#xFF0C;&#x5E76;&#x5C06;Node&#x4F5C;&#x4E3A;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x73AF;&#x5883;&#x89E3;&#x91CA;&#x5668;</span><br><span class="line">// &#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x5934;&#x6587;&#x4EF6;&#xFF0C;require&#x5F00;&#x59CB;&#x6267;&#x884C;&#x5C31;&#x4F1A;&#x62A5;&#x9519;</span><br><span class="line"><span class="meta">#</span>! /usr/bin/env node</span><br></pre></td></tr></tbody></table></figure><h4 id="&#x8BFB;&#x5199;&#x7A0B;&#x5E8F;&#x65F6;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x5F15;&#x5165;&#x65B9;&#x5F0F;"><a href="#&#x8BFB;&#x5199;&#x7A0B;&#x5E8F;&#x65F6;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x5F15;&#x5165;&#x65B9;&#x5F0F;" class="headerlink" title="&#x8BFB;&#x5199;&#x7A0B;&#x5E8F;&#x65F6;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x5F15;&#x5165;&#x65B9;&#x5F0F;"></a>&#x8BFB;&#x5199;&#x7A0B;&#x5E8F;&#x65F6;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x5F15;&#x5165;&#x65B9;&#x5F0F;</h4><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x5F88;&#x86CB;&#x75BC;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x6211;&#x7684;CLI&#x5305;&#x91CC;&#x4F7F;&#x7528;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4EFD;&#x56FD;&#x5BB6;&#x7684;key-value&#x6620;&#x5C04;&#xFF0C;&#x5728;&#x5F15;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5168;&#x5C40;&#x5B89;&#x88C5;&#x7684;CLI&#x548C;&#x5C40;&#x90E8;&#x5B89;&#x88C5;&#x7684;CLI&#x4F1A;&#x6709;&#x5DEE;&#x5F02;&#xFF0C;&#x5C40;&#x90E8;&#x5305;&#x5D4C;&#x5957;&#x5728;<code>node_modules</code>&#x5185;&#x4F1A;&#x6709;&#x5C42;&#x7EA7;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x91CC;&#x53EA;&#x80FD;&#x770B;&#x4F60;&#x60F3;&#x5728;&#x4EC0;&#x4E48;&#x573A;&#x666F;&#x751F;&#x6548;&#x8FDB;&#x884C;<code>../</code>&#xFF0C;<code>./</code>&#x7684;&#x53D6;&#x820D;&#x4E86;&#x3002;</p><h4 id="&#x5168;&#x5C40;&#x7684;unlink"><a href="#&#x5168;&#x5C40;&#x7684;unlink" class="headerlink" title="&#x5168;&#x5C40;&#x7684;unlink"></a>&#x5168;&#x5C40;&#x7684;unlink</h4><p>&#x2003;&#x2003;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7531;&#x4E8E;&#x6211;&#x5728;&#x8FDB;&#x884C;&#x5168;&#x5C40;&#x548C;&#x5C40;&#x90E8;&#x7684;CLI&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x73B0;&#x5168;&#x5C40;&#x4E00;&#x5F00;&#x59CB;&#x76F4;&#x63A5;<code>unlink</code>&#x79FB;&#x9664;&#x4E0D;&#x4E86;&#x3002;&#x540E;&#x9762;&#x53D1;&#x73B0;&#x5F97;&#x5230;<code>/usr/local/lib/node_modules/</code>&#x4E0B;&#x5220;&#x624D;&#x884C;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰πãÂâç‰∏ÄÁõ¥ÊÉ≥Êï¥‰∏™ÂèëÂ∏ÉÂà∞npm‰∏äÁöÑÂ∑•ÂÖ∑ÔºåÊñπ‰æø‰πãÂêéÁöÑÊüê‰∏™È°πÁõÆ‰ΩøÁî®Ôºå‰∏çËøáÂÖ¨Âè∏ËøôÊñπÈù¢ÁöÑËÆæÊñΩÊØîËæÉÂÖ®Èù¢Ôºå‰∏îÈÉΩÊû∂ËÆæÂú®ÂÜÖÈÉ®ÊúçÂä°Âô®‰∏äÂõ∫Ê≤°‰ªÄ‰πàÊú∫‰ºö„ÄÇÁõ¥Âà∞ÂêéÁª≠Êé•ÊâãÊµ∑Â§ñÈ°πÁõÆÔºåÂèëÁé∞Â§öËØ≠Ë®ÄÂ§ÑÁêÜÁöÑÊó∂ÂÄôÔºåÈÉΩ‰æùËµñ‰∏Ä‰∏™ËÄÅÁöÑExcelÂÆèËÑöÊú¨ËøõË°åjsÈùôÊÄÅÊñá‰ª∂ÁîüÊàêÔºåÁÅµÊ¥ªÊÄßÈùûÂ∏∏Â∑ÆÔºåÂè™Ë¶ÅÂéüÊú¨ÊñáÊ°£Ê†ºÂºèÊàñÁªìÊûÑÊîπÂèòÂ∞±‰ºöÂ§±ÊïàÔºåËÄå‰∏îÁî±‰∫éÂéÜÂè≤ÂéüÂõ†ÔºåÁõÆÂâçÊñáÊ°£ÈÉΩ‰∏ä‰∫Ü‰∫ëÁª¥Êä§ÔºàÁªìÊûÑÂ§ßÊîπÔºâÔºå‰ª•Ââç‰ºöÂÜôExcelËÑöÊú¨ÁöÑÂÖÑÂºü‰πüË∑ëË∑Ø‰∫Ü„ÄÇËá¥‰Ωø‰∏ÄÊÆµÊó∂Èó¥ÂºÄÂèë‰∫∫ÂëòÂú®ÂÅöÊµ∑Â§ñÈúÄÊ±ÇÁöÑÊó∂ÂÄôÁñØÁãÇcvÔºåÊïàÁéá‰Ωé‰∏ãËøòÂÆπÊòìÂá∫Èîô„ÄÇ‰∫éÊòØÊäΩÁ©∫Áî®nodeÂºÄÂèë‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ¨¶ÂêàÊàë‰ª¨‰∏öÂä°Âú∫ÊôØÁöÑËß£ÊûêexcelÁîüÊàêÈùôÊÄÅjsËµÑÊ∫êÁöÑcliÔºåÂπ∂ÂèëÂ∏ÉÂà∞npm‰∏äÔºåËá™Â∑±Áª¥Êä§ÁùÄÁé©ÔºåÈ°∫ÈÅìÊèêÂçá‰∏Ä‰∏ãÂºÄÂèë‰ΩìÈ™å„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="npm" scheme="https://chrisdeo.github.io/tags/npm/"/>
    
      <category term="link" scheme="https://chrisdeo.github.io/tags/link/"/>
    
      <category term="nodejs" scheme="https://chrisdeo.github.io/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>ÁÆÄÊòìIoTÈ°πÁõÆÂõæÁ§∫</title>
    <link href="https://chrisdeo.github.io/2020/02/16/%E7%AE%80%E6%98%93IoT%E9%A1%B9%E7%9B%AE%E5%9B%BE%E7%A4%BA/"/>
    <id>https://chrisdeo.github.io/2020/02/16/ÁÆÄÊòìIoTÈ°πÁõÆÂõæÁ§∫/</id>
    <published>2020-02-16T04:35:42.000Z</published>
    <updated>2020-02-16T04:42:09.879Z</updated>
    
    <content type="html"><![CDATA[<p>&#x2003;&#x2003;&#x5173;&#x4E8E;&#x8FD1;&#x671F;&#x5165;&#x5751;&#x7684;RN&#x7684;Iot&#x4E1A;&#x52A1;&#x9879;&#x76EE;&#xFF0C;&#x603B;&#x7ED3;&#x4E86;&#x4E0B;&#xFF0C;&#x753B;&#x4E86;&#x5F20;&#x4E2A;&#x4EBA;&#x7406;&#x89E3;&#x7684;&#x67B6;&#x6784;&#x56FE;&#x793A;&#x3002;</p><p><img src="/2020/02/16/ÁÆÄÊòìIoTÈ°πÁõÆÂõæÁ§∫/./project.jpg" style="width: 22.6rem"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#x2003;&amp;#x2003;&amp;#x5173;&amp;#x4E8E;&amp;#x8FD1;&amp;#x671F;&amp;#x5165;&amp;#x5751;&amp;#x7684;RN&amp;#x7684;Iot&amp;#x4E1A;&amp;#x52A1;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x603B;&amp;#x7
      
    
    </summary>
    
    
      <category term="React-Native" scheme="https://chrisdeo.github.io/tags/React-Native/"/>
    
      <category term="IoT" scheme="https://chrisdeo.github.io/tags/IoT/"/>
    
  </entry>
  
  <entry>
    <title>XMPPÂçèËÆÆ‰∏éMQTTÂçèËÆÆÂ≠¶‰π†</title>
    <link href="https://chrisdeo.github.io/2020/02/14/XMPP%E5%8D%8F%E8%AE%AE%E4%B8%8EMQTT%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/"/>
    <id>https://chrisdeo.github.io/2020/02/14/XMPPÂçèËÆÆ‰∏éMQTTÂçèËÆÆÂ≠¶‰π†/</id>
    <published>2020-02-14T08:03:49.000Z</published>
    <updated>2020-03-08T09:53:59.272Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x7531;&#x4E8E;&#x8FD1;&#x671F;&#x5F00;&#x53D1;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x4E2D;&#x6709;&#x63A5;&#x89E6;&#x5230;&#xFF0C;&#x5B66;&#x4E60;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x2026;</p></blockquote><a id="more"></a><h2 id="XMPP&#x534F;&#x8BAE;"><a href="#XMPP&#x534F;&#x8BAE;" class="headerlink" title="XMPP&#x534F;&#x8BAE;"></a>XMPP&#x534F;&#x8BAE;</h2><p>&#x2003;&#x2003;&#x53EF;&#x6269;&#x5C55;&#x6D88;&#x606F;&#x4E0E;&#x5B58;&#x5728;&#x534F;&#x8BAE;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Extensible Messaging and Presence Protocol&#xFF0C;&#x7F29;&#x5199;&#xFF1A;XMPP&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x4EE5;XML&#x4E3A;&#x57FA;&#x7840;&#x7684;&#x5F00;&#x653E;&#x5F0F;&#x5373;&#x65F6;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#xFF0C;&#x662F;&#x7ECF;&#x7531;&#x4E92;&#x8054;&#x7F51;&#x5DE5;&#x7A0B;&#x5DE5;&#x4F5C;&#x5C0F;&#x7EC4;&#xFF08;IETF&#xFF09;&#x901A;&#x8FC7;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x6807;&#x51C6;&#x3002;XMPP&#x56E0;&#x4E3A;&#x88AB;Google Talk&#x5E94;&#x7528;&#x800C;&#x88AB;&#x5E7F;&#x5927;&#x7F51;&#x6C11;&#x6240;&#x63A5;&#x89E6;&#x3002; &#x2013; wikipedia</p><p>&#x2003;&#x2003;&#x5728;&#x5F00;&#x59CB;&#x4E86;&#x89E3;XMPP&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x8FD8;&#x9700;&#x8981;&#x5148;&#x4E86;&#x89E3;&#x4E0B;XML&#xFF0C;&#x76F8;&#x4FE1;&#x73B0;&#x5728;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x524D;&#x7AEF;&#x90FD;&#x5BF9;HTML&#x5F02;&#x5E38;&#x719F;&#x6089;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;XML&#x5219;&#x8F83;&#x4E3A;&#x964C;&#x751F;&#xFF0C;&#x90A3;XML&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x7ED3;&#x6784;&#x5462;&#xFF1F;</p><h3 id="&#x4EC0;&#x4E48;&#x662F;XML&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;XML&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;XML&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F;XML&#xFF1F;</h3><ul><li>XML &#x6307;&#x53EF;&#x6269;&#x5C55;&#x6807;&#x8BB0;&#x8BED;&#x8A00;&#xFF08;EXtensible Markup Language&#xFF09;&#x3002;</li><li>XML &#x662F;&#x4E00;&#x79CD;&#x6807;&#x8BB0;&#x8BED;&#x8A00;&#xFF0C;&#x5F88;&#x7C7B;&#x4F3C; HTML&#x3002;</li><li>XML &#x7684;<strong>&#x8BBE;&#x8BA1;&#x5B97;&#x65E8;&#x662F;&#x4F20;&#x8F93;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x975E;&#x663E;&#x793A;&#x6570;&#x636E;</strong>&#x3002;</li><li>XML &#x6807;&#x7B7E;&#x6CA1;&#x6709;&#x88AB;&#x9884;&#x5B9A;&#x4E49;&#x3002;&#x60A8;&#x9700;&#x8981;&#x81EA;&#x884C;&#x5B9A;&#x4E49;&#x6807;&#x7B7E;&#x3002;</li><li>XML &#x88AB;&#x8BBE;&#x8BA1;&#x4E3A;&#x5177;&#x6709;&#x81EA;&#x6211;&#x63CF;&#x8FF0;&#x6027;&#x3002;</li><li>XML &#x662F; W3C &#x7684;&#x63A8;&#x8350;&#x6807;&#x51C6;&#x3002;</li></ul><h4 id="XML&#x672C;&#x8EAB;&#x662F;&#x6CA1;&#x6709;&#x884C;&#x4E3A;&#x7684;"><a href="#XML&#x672C;&#x8EAB;&#x662F;&#x6CA1;&#x6709;&#x884C;&#x4E3A;&#x7684;" class="headerlink" title="XML&#x672C;&#x8EAB;&#x662F;&#x6CA1;&#x6709;&#x884C;&#x4E3A;&#x7684;"></a>XML&#x672C;&#x8EAB;&#x662F;&#x6CA1;&#x6709;&#x884C;&#x4E3A;&#x7684;</h4><p>&#x2003;&#x2003;&#x5982;&#x4F55;&#x7406;&#x89E3;&#x5462;&#xFF1F;&#x5373;&#x5176;&#x7ED3;&#x6784;&#x672C;&#x8EAB;&#x53EA;&#x662F;&#x4E00;&#x79CD;&#x63CF;&#x8FF0;&#x6027;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x643A;&#x5E26;&#x4EC0;&#x4E48;&#x526F;&#x4F5C;&#x7528;&#xFF1A;</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">to</span>&gt;</span>George<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">from</span>&gt;</span>John<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">heading</span>&gt;</span>Reminder<span class="tag">&lt;/<span class="name">heading</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>Don&apos;t forget the meeting!<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="XML-&#x4EC5;&#x4EC5;&#x662F;&#x7EAF;&#x6587;&#x672C;"><a href="#XML-&#x4EC5;&#x4EC5;&#x662F;&#x7EAF;&#x6587;&#x672C;" class="headerlink" title="XML &#x4EC5;&#x4EC5;&#x662F;&#x7EAF;&#x6587;&#x672C;"></a>XML &#x4EC5;&#x4EC5;&#x662F;&#x7EAF;&#x6587;&#x672C;</h4><p>&#x2003;&#x2003;XML &#x6CA1;&#x4EC0;&#x4E48;&#x7279;&#x522B;&#x7684;&#x3002;&#x5B83;&#x4EC5;&#x4EC5;&#x662F;&#x7EAF;&#x6587;&#x672C;&#x800C;&#x5DF2;&#x3002;&#x6709;&#x80FD;&#x529B;&#x5904;&#x7406;&#x7EAF;&#x6587;&#x672C;&#x7684;&#x8F6F;&#x4EF6;&#x90FD;&#x53EF;&#x4EE5;&#x5904;&#x7406; XML&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x80FD;&#x591F;&#x8BFB;&#x61C2; XML &#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x6709;&#x9488;&#x5BF9;&#x6027;&#x5730;&#x5904;&#x7406; XML &#x7684;&#x6807;&#x7B7E;&#x3002;&#x6807;&#x7B7E;&#x7684;&#x529F;&#x80FD;&#x6027;&#x610F;&#x4E49;&#x4F9D;&#x8D56;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7279;&#x6027;&#x3002;</p><h4 id="XML-&#x4E0D;&#x662F;&#x5BF9;-HTML-&#x7684;&#x66FF;&#x4EE3;"><a href="#XML-&#x4E0D;&#x662F;&#x5BF9;-HTML-&#x7684;&#x66FF;&#x4EE3;" class="headerlink" title="XML &#x4E0D;&#x662F;&#x5BF9; HTML &#x7684;&#x66FF;&#x4EE3;"></a>XML &#x4E0D;&#x662F;&#x5BF9; HTML &#x7684;&#x66FF;&#x4EE3;</h4><ul><li><p>XML &#x662F;&#x5BF9; HTML &#x7684;&#x8865;&#x5145;&#x3002;</p></li><li><p>XML &#x662F;&#x72EC;&#x7ACB;&#x4E8E;&#x8F6F;&#x4EF6;&#x548C;&#x786C;&#x4EF6;&#x7684;&#x4FE1;&#x606F;&#x4F20;&#x8F93;&#x5DE5;&#x5177;&#x3002;</p></li><li><p>&#x5728;&#x5927;&#x591A;&#x6570; web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;<strong>XML &#x7528;&#x4E8E;&#x4F20;&#x8F93;&#x6570;&#x636E;&#xFF0C;&#x800C; HTML &#x7528;&#x4E8E;&#x683C;&#x5F0F;&#x5316;&#x5E76;&#x663E;&#x793A;&#x6570;&#x636E;</strong>&#x3002;</p></li></ul><h3 id="XMPP&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#XMPP&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="XMPP&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"></a>XMPP&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;</h3><p>&#x2003;&#x2003;XMPP&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x5728;&#x5B9E;&#x65F6;&#x901A;&#x4FE1;&#x7684;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x8BE5;&#x534F;&#x8BAE;&#x5141;&#x8BB8;&#x56E0;&#x7279;&#x7F51;&#x7528;&#x6237;&#x5411;&#x56E0;&#x7279;&#x7F51;&#x4E0A;&#x7684;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x4EBA;&#x53D1;&#x9001;&#x5373;&#x65F6;&#x6D88;&#x606F;&#xFF0C;&#x5373;&#x4F7F;&#x5176;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x548C;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x540C;&#x3002;&#x5728;&#x4F20;&#x8F93;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E0E;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#x76F8;&#x5173;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x5728;&#x4EE5;&#x524D;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x8981;&#x4E48;&#x7528;2&#x8FDB;&#x5236;&#x7684;&#x5F62;&#x5F0F;&#x53D1;&#x9001;&#xFF08;&#x6BD4;&#x5982;QQ&#xFF09;&#xFF0C;&#x8981;&#x4E48;&#x7528;&#x7EAF;&#x6587;&#x672C;&#x6307;&#x4EE4;&#x52A0;&#x7A7A;&#x683C;&#x52A0;&#x53C2;&#x6570;&#x52A0;&#x6362;&#x884C;&#x7B26;&#x7684;&#x65B9;&#x5F0F;&#x53D1;&#x9001;&#xFF08;&#x6BD4;&#x5982;MSN&#xFF09;&#x3002;&#x800C;XMPP&#x4F20;&#x8F93;&#x7684;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#x6307;&#x4EE4;&#x7684;&#x903B;&#x8F91;&#x4E0E;&#x4EE5;&#x5F80;&#x76F8;&#x4EFF;&#xFF0C;&#x53EA;&#x662F;<strong>&#x534F;&#x8BAE;&#x7684;&#x5F62;&#x5F0F;&#x53D8;&#x6210;&#x4E86;XML&#x683C;&#x5F0F;&#x7684;&#x7EAF;&#x6587;&#x672C;</strong>&#x3002;XMPP&#x9664;&#x4E86;&#x53EF;&#x7528;&#x5728;&#x5B9E;&#x65F6;&#x901A;&#x4FE1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FD8;&#x80FD;&#x7528;&#x5728;&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x3001;&#x5185;&#x5BB9;&#x4F9B;&#x7A3F;&#x3001;&#x534F;&#x540C;&#x5DE5;&#x5177;&#x3001;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x3001;&#x6E38;&#x620F;&#x3001;&#x8FDC;&#x7A0B;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x7B49;&#x3002;</p><h3 id="XMPP&#x7684;&#x901A;&#x4FD7;&#x89E3;&#x91CA;"><a href="#XMPP&#x7684;&#x901A;&#x4FD7;&#x89E3;&#x91CA;" class="headerlink" title="XMPP&#x7684;&#x901A;&#x4FD7;&#x89E3;&#x91CA;"></a>XMPP&#x7684;&#x901A;&#x4FD7;&#x89E3;&#x91CA;</h3><p>&#x2003;&#x2003;XMPP &#x662F;&#x4E00;&#x79CD;&#x5F88;&#x7C7B;&#x4F3C;&#x4E8E;http&#x534F;&#x8BAE;&#x7684;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF0C;&#x5B83;&#x7684;&#x8FC7;&#x7A0B;&#x5C31;&#x5982;&#x540C;&#x201C;&#x89E3;&#x5305;&#x88C5;&#x2013;&#x3009;&#x5305;&#x88C5;&#x201D;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x7528;&#x6237;&#x53EA;&#x9700;&#x8981;&#x660E;&#x767D;&#x5B83;&#x63A5;&#x6536;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5E76;&#x7406;&#x89E3;&#x5B83;&#x8FD4;&#x56DE;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x5229;&#x7528;xmpp&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x901A;&#x8BAF;&#x3002;</p><h3 id="XMPP&#x7684;&#x7F51;&#x7EDC;&#x67B6;&#x6784;"><a href="#XMPP&#x7684;&#x7F51;&#x7EDC;&#x67B6;&#x6784;" class="headerlink" title="XMPP&#x7684;&#x7F51;&#x7EDC;&#x67B6;&#x6784;"></a>XMPP&#x7684;&#x7F51;&#x7EDC;&#x67B6;&#x6784;</h3><p>&#x2003;&#x2003;XMPP&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x4E09;&#x4E2A;&#x89D2;&#x8272;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7F51;&#x5173;&#x3002;&#x901A;&#x4FE1;&#x80FD;&#x591F;&#x5728;&#x8FD9;&#x4E09;&#x8005;&#x7684;&#x4EFB;&#x610F;&#x4E24;&#x4E2A;&#x4E4B;&#x95F4;&#x53CC;&#x5411;&#x53D1;&#x751F;&#x3002;&#x670D;&#x52A1;&#x5668;&#x540C;&#x65F6;&#x627F;&#x62C5;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;&#x8BB0;&#x5F55;&#xFF0C;&#x8FDE;&#x63A5;&#x7BA1;&#x7406;&#x548C;&#x4FE1;&#x606F;&#x7684;&#x8DEF;&#x7531;&#x529F;&#x80FD;&#x3002;&#x7F51;&#x5173;&#x627F;&#x62C5;&#x7740;&#x4E0E;&#x5F02;&#x6784;&#x5373;&#x65F6;&#x901A;&#x4FE1;&#x7CFB;&#x7EDF;&#x7684;&#x4E92;&#x8054;&#x4E92;&#x901A;&#xFF0C;&#x5F02;&#x6784;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x5305;&#x62EC;SMS&#xFF08;&#x77ED;&#x4FE1;&#xFF09;&#xFF0C;MSN&#xFF0C;ICQ&#x7B49;&#x3002;<strong>&#x57FA;&#x672C;&#x7684;&#x7F51;&#x7EDC;&#x5F62;&#x5F0F;&#x662F;&#x5355;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;TCP/IP&#x8FDE;&#x63A5;&#x5230;&#x5355;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4E4B;&#x4E0A;&#x4F20;&#x8F93;XML</strong>&#x3002;</p><h2 id="MQTT&#x534F;&#x8BAE;"><a href="#MQTT&#x534F;&#x8BAE;" class="headerlink" title="MQTT&#x534F;&#x8BAE;"></a>MQTT&#x534F;&#x8BAE;</h2><h3 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h3><p>&#x2003;&#x2003;MQTT(&#x6D88;&#x606F;&#x961F;&#x5217;&#x9065;&#x6D4B;&#x4F20;&#x8F93;)&#x662F;ISO &#x6807;&#x51C6;(ISO/IEC PRF 20922)&#x4E0B;&#x57FA;&#x4E8E;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x8303;&#x5F0F;&#x7684;&#x6D88;&#x606F;&#x534F;&#x8BAE;&#x3002;&#x5B83;&#x5DE5;&#x4F5C;&#x5728; TCP/IP&#x534F;&#x8BAE;&#x65CF;&#x4E0A;&#xFF0C;&#x662F;&#x4E3A;&#x786C;&#x4EF6;&#x6027;&#x80FD;&#x4F4E;&#x4E0B;&#x7684;&#x8FDC;&#x7A0B;&#x8BBE;&#x5907;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x72B6;&#x51B5;&#x7CDF;&#x7CD5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x578B;&#x6D88;&#x606F;&#x534F;&#x8BAE;&#xFF0C;&#x4E3A;&#x6B64;&#xFF0C;&#x5B83;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#xFF08;MQTT&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5982;RabbitMQ&#x7B49;&#x7B49;&#xFF09; &#x3002;</p><p>&#x2003;&#x2003;MQTT&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;-&#x670D;&#x52A1;&#x5668;&#x7684;&#x6D88;&#x606F;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#x3002;MQTT&#x534F;&#x8BAE;&#x662F;&#x8F7B;&#x91CF;&#x3001;&#x7B80;&#x5355;&#x3001;&#x5F00;&#x653E;&#x548C;&#x6613;&#x4E8E;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;&#x7279;&#x70B9;&#x4F7F;&#x5B83;&#x9002;&#x7528;&#x8303;&#x56F4;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x3002;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5305;&#x62EC;&#x53D7;&#x9650;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5982;&#xFF1A;&#x673A;&#x5668;&#x4E0E;&#x673A;&#x5668;&#xFF08;M2M&#xFF09;&#x901A;&#x4FE1;&#x548C;<strong>&#x7269;&#x8054;&#x7F51;&#xFF08;IoT&#xFF09;</strong>&#x3002;&#x5176;&#x5728;&#xFF0C;&#x901A;&#x8FC7;&#x536B;&#x661F;&#x94FE;&#x8DEF;&#x901A;&#x4FE1;&#x4F20;&#x611F;&#x5668;&#x3001;&#x5076;&#x5C14;&#x62E8;&#x53F7;&#x7684;&#x533B;&#x7597;&#x8BBE;&#x5907;&#x3001;&#x667A;&#x80FD;&#x5BB6;&#x5C45;&#x3001;&#x53CA;&#x4E00;&#x4E9B;&#x5C0F;&#x578B;&#x5316;&#x8BBE;&#x5907;&#x4E2D;&#x5DF2;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x3002;</p><h3 id="&#x7279;&#x70B9;"><a href="#&#x7279;&#x70B9;" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h3><p>&#x2003;&#x2003;MQTT&#x534F;&#x8BAE;&#x662F;&#x4E3A;&#x5927;&#x91CF;&#x8BA1;&#x7B97;&#x80FD;&#x529B;&#x6709;&#x9650;&#xFF0C;&#x4E14;&#x5DE5;&#x4F5C;&#x5728;&#x4F4E;&#x5E26;&#x5BBD;&#x3001;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#x7F51;&#x7EDC;&#x7684;&#x8FDC;&#x7A0B;&#x4F20;&#x611F;&#x5668;&#x548C;&#x63A7;&#x5236;&#x8BBE;&#x5907;&#x901A;&#x8BAF;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x5B83;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x7684;&#x51E0;&#x9879;&#x7279;&#x6027;&#xFF1A;</p><ol><li>&#x4F7F;&#x7528;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x6D88;&#x606F;&#x6A21;&#x5F0F;&#xFF0C;&#x63D0;&#x4F9B;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x6D88;&#x606F;&#x53D1;&#x5E03;&#xFF0C;&#x89E3;&#x9664;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8026;&#x5408;&#xFF1B;</li></ol><ul><li>&#x5373;MQTT&#x7AEF;&#x53D1;&#x9001;&#x4E00;&#x4E2A;Topic&#x652F;&#x6301;&#x591A;&#x7AEF;&#x8FDB;&#x884C;&#x8BA2;&#x9605;&#xFF0C;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;&#x56FA;&#x4EF6;&#x7AEF;&#x5982;&#x6E29;&#x5EA6;&#x4F20;&#x611F;&#x5668;&#x901A;&#x8FC7;MQTT&#x534F;&#x8BAE;&#x53D1;&#x9001;&#x6E29;&#x5EA6;&#x53D8;&#x5316;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x53EF;&#x80FD;&#x4E91;&#x7AEF;&#x6709;&#x8BA2;&#x9605;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5165;&#x5E93;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x624B;&#x673A;APP&#x6709;&#x8FDB;&#x884C;&#x6D88;&#x606F;&#x8BA2;&#x9605;&#xFF0C;&#x663E;&#x793A;&#x6570;&#x636E;&#x53D8;&#x5316;&#x7B49;&#x7B49;&#x3002;</li></ul><ol start="2"><li>&#x5BF9;&#x8D1F;&#x8F7D;&#x5185;&#x5BB9;&#x5C4F;&#x853D;&#x7684;&#x6D88;&#x606F;&#x4F20;&#x8F93;&#xFF1B;</li><li>&#x4F7F;&#x7528; TCP/IP &#x63D0;&#x4F9B;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#xFF1B;</li><li>&#x6709;&#x4E09;&#x79CD;&#x6D88;&#x606F;&#x53D1;&#x5E03;&#x670D;&#x52A1;&#x8D28;&#x91CF;&#xFF08;<strong>&#x53EF;&#x9760;&#x6027;</strong>&#xFF09;&#xFF1A;</li></ol><ul><li>&#x201C;&#x81F3;&#x591A;&#x4E00;&#x6B21;&#x201D;&#xFF0C;&#x6D88;&#x606F;&#x53D1;&#x5E03;&#x5B8C;&#x5168;&#x4F9D;&#x8D56;&#x5E95;&#x5C42; TCP/IP &#x7F51;&#x7EDC;&#x3002;&#x4F1A;&#x53D1;&#x751F;&#x6D88;&#x606F;&#x4E22;&#x5931;&#x6216;&#x91CD;&#x590D;&#x3002;&#x8FD9;&#x4E00;&#x7EA7;&#x522B;&#x53EF;&#x7528;&#x4E8E;&#x5982;&#x4E0B;&#x60C5;&#x51B5;&#xFF0C;&#x73AF;&#x5883;&#x4F20;&#x611F;&#x5668;&#x6570;&#x636E;&#xFF0C;&#x4E22;&#x5931;&#x4E00;&#x6B21;&#x8BFB;&#x8BB0;&#x5F55;&#x65E0;&#x6240;&#x8C13;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x4E45;&#x540E;&#x8FD8;&#x4F1A;&#x6709;&#x7B2C;&#x4E8C;&#x6B21;&#x53D1;&#x9001;&#x3002;</li><li>&#x201C;&#x81F3;&#x5C11;&#x4E00;&#x6B21;&#x201D;&#xFF0C;&#x786E;&#x4FDD;&#x6D88;&#x606F;&#x5230;&#x8FBE;&#xFF0C;&#x4F46;&#x6D88;&#x606F;&#x91CD;&#x590D;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x3002;</li><li>&#x201C;&#x53EA;&#x6709;&#x4E00;&#x6B21;&#x201D;&#xFF0C;&#x786E;&#x4FDD;&#x6D88;&#x606F;&#x5230;&#x8FBE;&#x4E00;&#x6B21;&#x3002;&#x8FD9;&#x4E00;&#x7EA7;&#x522B;&#x53EF;&#x7528;&#x4E8E;&#x5982;&#x4E0B;&#x60C5;&#x51B5;&#xFF0C;&#x5728;&#x8BA1;&#x8D39;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x6D88;&#x606F;&#x91CD;&#x590D;&#x6216;&#x4E22;&#x5931;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x7ED3;&#x679C;&#x3002;</li></ul><ol start="5"><li>&#x5C0F;&#x578B;&#x4F20;&#x8F93;&#xFF0C;&#x5F00;&#x9500;&#x5F88;&#x5C0F;&#xFF08;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x5934;&#x90E8;&#x662F; 2 &#x5B57;&#x8282;&#xFF09;&#xFF0C;&#x534F;&#x8BAE;&#x4EA4;&#x6362;&#x6700;&#x5C0F;&#x5316;&#xFF0C;&#x4EE5;&#x964D;&#x4F4E;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#xFF1B;</li><li>&#x4F7F;&#x7528; Last Will &#x548C; Testament &#x7279;&#x6027;&#x901A;&#x77E5;&#x6709;&#x5173;&#x5404;&#x65B9;&#x5BA2;&#x6237;&#x7AEF;&#x5F02;&#x5E38;&#x4E2D;&#x65AD;&#x7684;&#x673A;&#x5236;&#x3002;</li></ol><h2 id="&#x9879;&#x76EE;&#x5C0F;&#x7ED3;"><a href="#&#x9879;&#x76EE;&#x5C0F;&#x7ED3;" class="headerlink" title="&#x9879;&#x76EE;&#x5C0F;&#x7ED3;"></a>&#x9879;&#x76EE;&#x5C0F;&#x7ED3;</h2><p>&#x2003;&#x2003;&#x6240;&#x4EE5;&#x5176;&#x5B9E;&#x5F53;&#x524D;&#x7684;IOT&#x9879;&#x76EE;&#x672C;&#x8D28;&#x4E0A;&#x8FD8;&#x662F;&#x8981;&#x57FA;&#x4E8E;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x7684;&#xFF0C;&#x5373;&#x5148;&#x5BF9;&#x591A;&#x7AEF;&#x8FDB;&#x884C;&#x914D;&#x7F51;&#xFF0C;&#x5206;&#x914D;IP&#x540E;&#xFF08;4G&#xFF0C;WI-FI&#x8FDE;&#x63A5;&#x7B49;&#xFF09;&#xFF0C;&#x518D;&#x5728;TCP/IP&#x6A21;&#x578B;&#x7684;&#x5E94;&#x7528;&#x5C42;&#xFF08;XMPP&#x3001;MQTT&#xFF09;&#x4E0A;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#xFF08;&#x533A;&#x5206;&#x4E8E;&#x4EE5;&#x5F80;PC&#x7AEF;&#x4E0A;&#x7684;HTTP&#x4F20;&#x8F93;&#xFF09;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Áî±‰∫éËøëÊúüÂºÄÂèëÁöÑ‰∏öÂä°Âú∫ÊôØ‰∏≠ÊúâÊé•Ëß¶Âà∞ÔºåÂ≠¶‰π†‰∫ÜËß£‰∏Ä‰∏ã‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="XMPP" scheme="https://chrisdeo.github.io/tags/XMPP/"/>
    
      <category term="MQTT" scheme="https://chrisdeo.github.io/tags/MQTT/"/>
    
      <category term="XML" scheme="https://chrisdeo.github.io/tags/XML/"/>
    
  </entry>
  
  <entry>
    <title>React-NativeÁñëÈöæË∏©ÂùëËÆ∞ÂΩï</title>
    <link href="https://chrisdeo.github.io/2020/02/14/React-Native%E7%96%91%E9%9A%BE%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>https://chrisdeo.github.io/2020/02/14/React-NativeÁñëÈöæË∏©ÂùëËÆ∞ÂΩï/</id>
    <published>2020-02-14T02:11:37.000Z</published>
    <updated>2020-11-07T05:00:47.086Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x4E2A;&#x4EBA;&#x5728;RN&#x5F00;&#x53D1;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x7591;&#x60D1;&#x548C;&#x7406;&#x89E3;&#x53CA;&#x4E00;&#x4E9B;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x7684;&#x5904;&#x7406;&#x65B9;&#x6848;&#x3002;</p></blockquote><a id="more"></a><h3 id="ScrollView"><a href="#ScrollView" class="headerlink" title="ScrollView"></a>ScrollView</h3><h4 id="&#x591A;ScrollView&#x5D4C;&#x5957;&#x95EE;&#x9898;"><a href="#&#x591A;ScrollView&#x5D4C;&#x5957;&#x95EE;&#x9898;" class="headerlink" title="&#x591A;ScrollView&#x5D4C;&#x5957;&#x95EE;&#x9898;"></a>&#x591A;ScrollView&#x5D4C;&#x5957;&#x95EE;&#x9898;</h4><p>&#x2003;&#x2003;&#x5177;&#x4F53;&#x8868;&#x73B0;&#x662F;&#xFF0C;IOS&#x8868;&#x73B0;&#x5F62;&#x5F0F;&#x4E0E;Android&#x4E0D;&#x540C;&#xFF1A;Android&#x5728;&#x7236;&#x5B50;ScrollView&#x5D4C;&#x5957;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5B50;ScrollView&#x6EDA;&#x5230;&#x5230;&#x9876;&#x90E8;&#x4F1A;&#x76F4;&#x63A5;&#x8054;&#x52A8;&#xFF08;&#x89E6;&#x53D1;&#xFF09;&#x7236;&#x7EA7;&#x7684;ScrollView&#x6EDA;&#x52A8;&#xFF0C;&#x800C;IOS&#x5E76;&#x4E0D;&#x4F1A;&#x3002;&#x8BE5;&#x95EE;&#x9898;&#x6CA1;&#x6709;&#x7279;&#x522B;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4E34;&#x65F6;&#x7684;&#x65B9;&#x6848;&#x662F;&#x6839;&#x636E;&#x6EDA;&#x52A8;&#x76D1;&#x542C;&#x6EDA;&#x52A8;&#x6761;&#x9AD8;&#x5EA6;&#xFF0C;&#x8FBE;&#x5230;&#x9876;&#x90E8;&#x540E;&#x6E10;&#x8FDB;&#x8BBE;&#x7F6E;&#x7236;&#x7EA7;&#x6EDA;&#x52A8;&#x5230;&#x9876;&#x90E8;&#x3002;</p><p>&#x2003;&#x2003;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x4F53;&#x73B0;&#x662F;&#x7236;&#x5B50;&#x5D4C;&#x5957;&#x65F6;&#xFF0C;&#x60F3;&#x8981;&#x7684;&#x6548;&#x679C;&#x662F;&#x5B50;&#x5217;&#x8868;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x540E;&#x518D;&#x89E6;&#x53D1;&#x7236;&#x7EA7;&#x7684;&#x5411;&#x4E0B;&#x6EDA;&#x52A8;&#xFF0C;Android&#x6CA1;&#x95EE;&#x9898;&#xFF0C;IOS&#x987B;&#x8981;&#x7279;&#x6B8A;&#x5904;&#x7406;&#xFF0C;&#x65B9;&#x6848;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;IOS&#x5E73;&#x53F0;&#x4F7F;&#x7528;&#x7684;API&#xFF1A;<code>canCancelContentTouches</code>&#xFF0C;&#x5F53;&#x503C;&#x4E3A;<code>false</code>&#x65F6;&#xFF0C;&#x4E00;&#x65E6;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x54CD;&#x5E94;&#x89E6;&#x6478;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x4F7F;&#x624B;&#x6307;&#x5F00;&#x59CB;&#x79FB;&#x52A8;&#x4E5F;&#x4E0D;&#x4F1A;&#x62D6;&#x52A8;&#x6EDA;&#x52A8;&#x89C6;&#x56FE;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;<code>true</code>&#xFF08;&#x5728;&#x4EE5;&#x4E0A;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x62D6;&#x52A8;&#x6EDA;&#x52A8;&#x89C6;&#x56FE;&#xFF09;&#x3002;</p><h3 id="react-native-svg"><a href="#react-native-svg" class="headerlink" title="react-native-svg"></a>react-native-svg</h3><h4 id="&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x62A5;&#x9519;&#x95EE;&#x9898;"><a href="#&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x62A5;&#x9519;&#x95EE;&#x9898;" class="headerlink" title="&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x62A5;&#x9519;&#x95EE;&#x9898;"></a>&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x62A5;&#x9519;&#x95EE;&#x9898;</h4><p>&#x2003;&#x2003;&#x9879;&#x76EE;&#x7684;&#x5B9E;&#x73B0;&#x4E3B;&#x8981;&#x4F9D;&#x8D56;<code>react-native-svg</code>&#x7684;&#x5E93;&#xFF0C;&#x8BED;&#x6CD5;&#x5176;&#x5B9E;&#x8FD8;&#x662F;<code>svg</code>&#x7684;&#x8BED;&#x6CD5;&#x3002;&#x4E0D;&#x8FC7;&#x6211;&#x8D77;&#x521D;&#x5728;&#x6A21;&#x62DF;&#x5668;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x62A5;&#x4E86;&#x4E00;&#x4E2A;<code>RNSVGXXX</code>&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x65E0;&#x5F71;&#x54CD;&#x3002;&#x6839;&#x636E;<code>npm</code>&#x5E93;&#x7684;&#x6587;&#x6863;&#x8BF4;&#x660E;&#x53CA;&#x4E00;&#x4E9B;&#x535A;&#x5BA2;&#x76F8;&#x5173;&#x95EE;&#x9898;&#x8BB0;&#x5F55;&#x6700;&#x7EC8;&#x89E3;&#x51B3;&#xFF1A;</p><ol><li>&#x7531;&#x4E8E;&#x662F;Windows&#x73AF;&#x5883;&#x4E0B;&#x7684;Android&#xFF0C;&#x5728;<code>install</code>&#x5305;&#x540E;&#xFF0C;&#x987B;&#x8981;&#x5728;<code>android/settings.gradle</code>&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">&apos;:react-native-svg&apos;</span></span><br><span class="line">project(<span class="string">&apos;:react-native-svg&apos;</span>).projectDir = <span class="keyword">new</span> File(rootProject.projectDir, <span class="string">&apos;../node_modules/react-native-svg/android&apos;</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>&#x5728;<code>android/app/build.gradle</code>&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation project(<span class="string">&apos;:react-native-svg&apos;</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li><p>&#x5728;<code>android/app/src/main/java/[...]/MainApplication.java</code>&#x9876;&#x90E8;&#x589E;&#x52A0;&#x5BFC;&#x5165;&#x8BED;&#x53E5;<code>import com.horcrux.svg.SvgPackage;</code>&#xFF0C;&#x5728;<code>getPackages()</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x7EC4;&#x5185;&#x6DFB;&#x52A0;<code>new SvgPackage()</code></p></li><li><p><code>react-native link react-native-svg</code></p></li><li><p>&#x91CD;&#x65B0;&#x88C5;&#x4E00;&#x6B21;app&#xFF0C;<code>react-native run-android</code></p></li></ol><h4 id="svg&#x753B;&#x5E03;&#x4E2D;&#x5143;&#x7D20;&#x5728;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x5E76;&#x672A;&#x6309;&#x7167;&#x4E2D;&#x5FC3;&#x5C45;&#x4E2D;"><a href="#svg&#x753B;&#x5E03;&#x4E2D;&#x5143;&#x7D20;&#x5728;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x5E76;&#x672A;&#x6309;&#x7167;&#x4E2D;&#x5FC3;&#x5C45;&#x4E2D;" class="headerlink" title="svg&#x753B;&#x5E03;&#x4E2D;&#x5143;&#x7D20;&#x5728;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x5E76;&#x672A;&#x6309;&#x7167;&#x4E2D;&#x5FC3;&#x5C45;&#x4E2D;"></a>svg&#x753B;&#x5E03;&#x4E2D;&#x5143;&#x7D20;&#x5728;&#x5B9E;&#x4F53;&#x673A;&#x4E0A;&#x5E76;&#x672A;&#x6309;&#x7167;&#x4E2D;&#x5FC3;&#x5C45;&#x4E2D;</h4><p>&#x2003;&#x2003;&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>viewBox</code>&#x5C5E;&#x6027;&#xFF0C;&#x4F30;&#x8BA1;&#x6CA1;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x8FC7;<code>svg</code>&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8BE5;&#x5E93;&#x8FDB;&#x884C;&#x4E1A;&#x52A1;&#x5B9E;&#x73B0;&#x65F6;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF08;&#x4E0D;&#x52A0;<code>viewBox</code>&#xFF09;&#x3002;<code>viewBox</code>&#x652F;&#x6301;&#x63A5;&#x6536;4&#x4E2A;&#x53C2;&#x6570;&#xFF1A;x&#x8F74;&#x504F;&#x79FB;&#xFF0C;y&#x8F74;&#x504F;&#x79FB;&#xFF0C;&#x5BBD;&#x5EA6;&#xFF0C;&#x9AD8;&#x5EA6;&#x3002;&#x5B83;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x4FDD;&#x6301;&#x6211;&#x4EEC;&#x7ED8;&#x5236;&#x56FE;&#x50CF;&#x7684;&#x6BD4;&#x4F8B;&#x5230;&#x5B9E;&#x9645;svg&#x753B;&#x5E03;&#x4E2D;&#xFF08;&#x6709;&#x53EF;&#x80FD;&#x6211;&#x4EEC;&#x7ED8;&#x753B;&#x7684;&#x5927;&#x5C0F;&#x5927;&#x4E8E;&#x7ED9;&#x5B9A;&#x7684;svg&#x5BB9;&#x5668;&#x5927;&#x5C0F;&#xFF09;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x6BD4;&#x4F8B;&#x8C03;&#x6574;&#x673A;&#x5236;&#x4F9D;&#x8D56;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A;&#x9690;&#x5F0F;&#x9ED8;&#x8BA4;&#x58F0;&#x660E;&#x7684;&#x5C5E;&#x6027;<code>preserveAspectRatio</code>&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E3A;<code>xMidYMid meet</code>&#xFF0C;&#x5373;x&#x8F74;&#x4E2D;&#x5FC3;&#x4E0E;y&#x8F74;&#x4E2D;&#x5FC3;&#x5BF9;&#x9F50;&#xFF0C;&#x5E76;&#x8C03;&#x6574;&#x6BD4;&#x4F8B;&#x81F3;&#x753B;&#x5E03;&#x80FD;&#x591F;&#x5B8C;&#x5168;&#x663E;&#x793A;&#x5185;&#x5BB9;&#x3002;</p><h4 id="&#x8FDB;&#x5EA6;&#x52A8;&#x753B;&#x6570;&#x503C;&#x4E0E;&#x8FDB;&#x5EA6;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;"><a href="#&#x8FDB;&#x5EA6;&#x52A8;&#x753B;&#x6570;&#x503C;&#x4E0E;&#x8FDB;&#x5EA6;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;" class="headerlink" title="&#x8FDB;&#x5EA6;&#x52A8;&#x753B;&#x6570;&#x503C;&#x4E0E;&#x8FDB;&#x5EA6;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;"></a>&#x8FDB;&#x5EA6;&#x52A8;&#x753B;&#x6570;&#x503C;&#x4E0E;&#x8FDB;&#x5EA6;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;</h4><p>&#x2003;&#x2003;&#x80FD;&#x591F;&#x4F7F;&#x7528;<code>react-native-svg</code>&#x540E;&#xFF0C;&#x5728;&#x5B9E;&#x73B0;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x65F6;&#xFF08;&#x4E00;&#x4E2A;&#x692D;&#x5706;&#x5F62;&#x7684;&#x8FDB;&#x5EA6;&#x6761;&#xFF09;&#xFF0C;&#x9047;&#x5230;&#x4E86;&#x6570;&#x503C;&#x4E0E;&#x8FDB;&#x5EA6;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E3B;&#x8981;&#x4ECE;&#x4E24;&#x65B9;&#x9762;&#x51FA;&#x53D1;&#xFF1A;</p><ol><li>&#x692D;&#x5706;&#x8DEF;&#x5F84;&#xFF0C;&#x5373;&#x5468;&#x957F;&#x7684;&#x8BA1;&#x7B97;: <code>L=2&#x3C0;b+4(a-b)</code></li><li>&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x4E2D;&#xFF0C;&#x4E0D;&#x8981;&#x5F00;&#x542F;<code>useNativeDriver</code>&#xFF0C;&#x5F00;&#x542F;&#x540E;&#x4F1A;&#x9020;&#x6210;&#x52A8;&#x753B;&#x52A0;&#x901F;&#x8FC7;&#x5FEB;&#xFF0C;&#x5E94;&#x5F53;&#x901A;&#x8FC7;&#x52A8;&#x753B;&#x6469;&#x64E6;&#x529B;<code>friction</code>&#x548C;&#x52A8;&#x753B;&#x5F20;&#x529B;<code>tension</code>&#x63A7;&#x5236;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { Ellipse } <span class="keyword">from</span> <span class="string">&apos;react-native-svg&apos;</span>;</span><br><span class="line"><span class="keyword">const</span> AnimatedEllipse = Animated.createAnimatedComponent(Ellipse)</span><br><span class="line"><span class="comment">// &#x8F93;&#x5165;&#x8F93;&#x51FA;&#x503C;&#x6620;&#x5C04;</span></span><br><span class="line"><span class="keyword">this</span>.ellipseAnimation = <span class="keyword">this</span>.state.ellipseAnimation.interpolate({</span><br><span class="line">    inputRange: [</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    <span class="number">100</span>,</span><br><span class="line">    ],</span><br><span class="line">    outputRange: [</span><br><span class="line">    <span class="comment">// &#x692D;&#x5706;&#x5468;&#x957F;</span></span><br><span class="line">    <span class="keyword">this</span>.ellipseCircumference,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    ],</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">Animated.timing(</span><br><span class="line">    <span class="comment">// ellipseAnimation = new Animated.Value(0),</span></span><br><span class="line">    <span class="keyword">this</span>.state.ellipseAnimation,</span><br><span class="line">    {</span><br><span class="line">    toValue,</span><br><span class="line">    duration,</span><br><span class="line">    easing: Easing.easeInOut,</span><br><span class="line">    <span class="comment">// useNativeDriver&#x5F00;&#x542F;&#x540E;&#xFF0C;&#x4F1A;&#x4F7F;&#x5F97;&#x8FDB;&#x5EA6;&#x52A8;&#x753B;&#x8FC7;&#x5FEB;</span></span><br><span class="line">    <span class="comment">// useNativeDriver: true,</span></span><br><span class="line">    friction: <span class="number">0</span>,     <span class="comment">// &#x52A8;&#x753B;&#x6469;&#x64E6;&#x529B;</span></span><br><span class="line">    tension: <span class="number">66</span>   <span class="comment">// &#x52A8;&#x753B;&#x5F20;&#x529B;</span></span><br><span class="line">    },</span><br><span class="line">).start()</span><br><span class="line"></span><br><span class="line">&lt;Svg&gt;</span><br><span class="line">    &lt;AnimatedEllipse</span><br><span class="line">        cx={cx}</span><br><span class="line">        cy={cy}</span><br><span class="line">        rx={rx}</span><br><span class="line">        ry={ry}</span><br><span class="line">        stroke=<span class="string">&quot;#619FE7&quot;</span></span><br><span class="line">        strokeWidth={strokeWidth}</span><br><span class="line">        fill=<span class="string">&quot;transparent&quot;</span></span><br><span class="line">        strokeDasharray={<span class="keyword">this</span>.ellipseCircumference} strokeDashoffset={<span class="keyword">this</span>.ellipseAnimation}</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;<span class="regexp">/Svg&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="FlatList"><a href="#FlatList" class="headerlink" title="FlatList"></a>FlatList</h3><h4 id="&#x5728;&#x672A;&#x8FDB;&#x884C;&#x6EDA;&#x52A8;&#x65F6;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x5217;&#x8868;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x4E00;&#x6B21;onEndReached"><a href="#&#x5728;&#x672A;&#x8FDB;&#x884C;&#x6EDA;&#x52A8;&#x65F6;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x5217;&#x8868;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x4E00;&#x6B21;onEndReached" class="headerlink" title="&#x5728;&#x672A;&#x8FDB;&#x884C;&#x6EDA;&#x52A8;&#x65F6;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x5217;&#x8868;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x4E00;&#x6B21;onEndReached"></a>&#x5728;&#x672A;&#x8FDB;&#x884C;&#x6EDA;&#x52A8;&#x65F6;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x5217;&#x8868;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x4E00;&#x6B21;onEndReached</h4><p>&#x2003;&#x2003;&#x8BE5;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x662F;&#x6846;&#x67B6;&#x672C;&#x8EAB;&#x7684;&#x95EE;&#x9898;&#xFF0C;github&#x7684;issue&#x533A;&#x4E5F;&#x6709;&#x4EBA;&#x63D0;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x60F3;&#x901A;&#x8FC7;&#x5185;&#x5BB9;&#x9AD8;&#x5EA6;&#x548C;&#x5BB9;&#x5668;&#x9AD8;&#x5EA6;&#x53BB;&#x505A;&#x5224;&#x65AD;&#xFF0C;&#x4E0D;&#x8FC7;&#x540E;&#x6765;&#x53D1;&#x73B0;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x7684;<code>onLayout</code>&#x8FD4;&#x56DE;&#x7684;&#x53D8;&#x5316;&#x9AD8;&#x5EA6;&#x662F;&#x56FA;&#x5B9A;&#x503C;&#xFF0C;&#x5373;&#x4E0A;&#x8FB9;&#x680F;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x7A7A;&#x95F4;&#xFF0C;&#x7528;&#x76EE;&#x6D4B;&#x4F30;&#x8BA1;&#x7684;&#x65B9;&#x5F0F;&#x6761;&#x76EE;&#x9AD8;&#x5EA6;&#x663E;&#x7136;&#x662F;&#x4E0D;&#x5408;&#x9002;&#x7684;&#xFF0C;&#x5373;&#x4F7F;&#x80FD;&#x591F;&#x786E;&#x5B9A;&#x5355;&#x4E2A;&#x680F;&#x76EE;&#x9AD8;&#x5EA6;&#xFF0C;&#x5206;&#x7EC4;&#x548C;<code>margin</code>&#x90FD;&#x5F88;&#x96BE;&#x7CBE;&#x51C6;&#x5904;&#x7406;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x540E;&#x91C7;&#x7528;&#x4E86;&#x6807;&#x8BB0;&#x91CF;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x521D;&#x59CB;&#x5316;<code>this.shouldFetchMore</code>&#x4E3A;<code>false</code>&#xFF0C;&#x65E2;&#x7136;&#x4F1A;&#x9ED8;&#x8BA4;&#x89E6;&#x53D1;&#xFF0C;&#x5219;&#x5728;&#x89E6;&#x53D1;&#x51FD;&#x6570;&#x5185;&#x901A;&#x8FC7;&#x8BE5;&#x6807;&#x8BB0;<code>return</code>&#xFF0C;&#x53E6;&#x5916;&#x901A;&#x8FC7;<code>FlatList</code>&#x7684;<code>onMomentumScrollBegin</code>&#x8FDB;&#x884C;<code>this.shouldFetchMore</code>&#x8BBE;&#x7F6E;&#xFF0C;&#x5373;&#x4EA7;&#x751F;&#x6ED1;&#x52A8;&#x540E;&#x624D;&#x80FD;&#x89E6;&#x53D1;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x6570;&#x636E;&#x3002;</p><h4 id="&#x672A;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x4FBF;&#x89E6;&#x53D1;&#x4E86;onEndReached"><a href="#&#x672A;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x4FBF;&#x89E6;&#x53D1;&#x4E86;onEndReached" class="headerlink" title="&#x672A;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x4FBF;&#x89E6;&#x53D1;&#x4E86;onEndReached"></a>&#x672A;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x4FBF;&#x89E6;&#x53D1;&#x4E86;onEndReached</h4><p>&#x2003;&#x2003;<code>onEndReachedThreshold</code>&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x8BBE;&#x7F6E;&#x5C3D;&#x91CF;&#x5C0F;&#xFF0C;&#x7ED3;&#x5408;&#x5B9E;&#x9645;&#x4F53;&#x73B0;&#xFF0C;&#x9879;&#x76EE;&#x4E2D;&#x53D6;&#x503C;<code>0.01</code>&#x3002;</p><h4 id="&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x591A;&#x6B21;onEndReached"><a href="#&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x591A;&#x6B21;onEndReached" class="headerlink" title="&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x591A;&#x6B21;onEndReached"></a>&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x591A;&#x6B21;onEndReached</h4><p>&#x2003;&#x2003;&#x5178;&#x578B;&#x7684;&#x8282;&#x6D41;&#x573A;&#x666F;&#xFF0C;&#x5199;&#x4E2A;&#x8282;&#x6D41;&#x95ED;&#x5305;&#x5373;&#x53EF;&#x3002;&#x6CE8;&#x610F;<code>throttle</code>&#x4E0D;&#x80FD;&#x5728;<code>render</code>&#x4E2D;&#x901A;&#x8FC7;&#x533F;&#x540D;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x5728;<code>render</code>&#x540E;&#x7684;</p><h4 id="IOS&#x5728;&#x6570;&#x636E;&#x672A;&#x6491;&#x6EE1;&#x9996;&#x5C4F;&#x65F6;&#xFF0C;onRefresh&#x5728;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;onEndReached"><a href="#IOS&#x5728;&#x6570;&#x636E;&#x672A;&#x6491;&#x6EE1;&#x9996;&#x5C4F;&#x65F6;&#xFF0C;onRefresh&#x5728;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;onEndReached" class="headerlink" title="IOS&#x5728;&#x6570;&#x636E;&#x672A;&#x6491;&#x6EE1;&#x9996;&#x5C4F;&#x65F6;&#xFF0C;onRefresh&#x5728;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;onEndReached"></a>IOS&#x5728;&#x6570;&#x636E;&#x672A;&#x6491;&#x6EE1;&#x9996;&#x5C4F;&#x65F6;&#xFF0C;onRefresh&#x5728;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;onEndReached</h4><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5C5E;&#x5B9E;&#x5947;&#x8469;&#xFF0C;Android&#x5728;&#x5904;&#x7406;&#x597D;&#x524D;&#x9762;&#x7684;&#x51E0;&#x4E2A;&#x95EE;&#x9898;&#x540E;&#xFF0C;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5728;IOS&#x7AEF;&#xFF0C;&#x8FDB;&#x884C;&#x7B2C;&#x4E00;&#x6B21;<code>onRefresh</code>&#x89E6;&#x53D1;&#xFF0C;&#x65E0;&#x5F02;&#x5E38;&#xFF0C;&#x4F46;&#x662F;&#x7B2C;&#x4E8C;&#x6B21;&#x89E6;&#x53D1;<code>onRefresh</code>&#x5C31;&#x4F1A;&#x9519;&#x8BEF;&#x89E6;&#x53D1;<code>onEndReached</code>&#xFF08;&#x6CA1;&#x6709;&#x770B;&#x9519;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x8C03;&#x7528;&#x5B8C;<code>onRefresh</code>&#x76F4;&#x63A5;&#x89E6;&#x53D1;<code>onEndReached</code>&#xFF0C;&#x82E5;&#x6CA1;&#x8FDB;&#x884C;&#x524D;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5C06;&#x4F1A;&#x65E0;&#x9650;&#x8C03;&#x7528;&#xFF09;&#x3002;&#x6700;&#x521D;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x901A;&#x8FC7;<code>onScrollBegin</code>&#x56DE;&#x8C03;&#x53C2;&#x6570;<code>nativeEvent</code>&#x4E2D;&#x7684;<code>layoutMeasurement</code>&#x548C;<code>contentSize</code>&#x53BB;&#x8FDB;&#x884C;&#x6807;&#x8BB0;&#x91CF;&#x63A7;&#x5236;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onScrollBegin = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">const</span> { layoutMeasurement, contentSize } = e.nativeEvent;</span><br><span class="line">  <span class="comment">// IOS&#x5728;&#x672A;&#x6491;&#x6EE1;&#x9996;&#x5C4F;&#x65F6; &#x7B2C;&#x4E8C;&#x6B21;&#x4E0B;&#x62C9;&#x5237;&#x65B0;onRefresh &#x4F1A;&#x89E6;&#x53D1;onEndReached</span></span><br><span class="line">  <span class="keyword">if</span> (layoutMeasurement.height &gt; contentSize.height) {</span><br><span class="line">    <span class="keyword">this</span>.stopIOSEndReachedAfterRefresh = <span class="literal">true</span>;</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">this</span>.stopIOSEndReachedAfterRefresh = <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">this</span>.shouldFetchMore = <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5F53;&#x7136;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x53D1;&#x73B0;&#x4E86;&#x4EE5;&#x4E0A;&#x7684;&#x8FD9;&#x4E9B;&#x5E94;&#x5BF9;&#x65B9;&#x6848;&#x662F;&#x6CBB;&#x6807;&#x4E0D;&#x6CBB;&#x672C;&#x7684;&#xFF0C;&#x5373;&#x4F7F;&#x6211;&#x4EEC;&#x73B0;&#x9636;&#x6BB5;&#x80FD;&#x591F;cover&#x4F4F;&#x6240;&#x6709;&#x7684;case&#xFF0C;&#x4EA6;&#x96BE;&#x4EE5;&#x4FDD;&#x8BC1;&#x672A;&#x6765;&#x53C8;&#x4F1A;&#x6709;&#x54EA;&#x4E9B;&#x5947;&#x8469;&#x573A;&#x666F;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x540E;&#x7684;&#x65B9;&#x6848;&#x5C31;&#x662F;&#xFF0C;<strong>&#x4E0D;&#x8981;&#x5728;FlatList&#x4E2D;&#x4F7F;&#x7528;<code>onEndReached</code>&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x7684;&#x662F;&#x4F7F;&#x7528;<code>onScroll</code>&#x5224;&#x65AD;&#x6EDA;&#x52A8;&#x4F4D;&#x7F6E;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x62C9;&#x53D6;</strong>&#x3002;</p><h4 id="onScroll&#x66FF;&#x4EE3;onEndReached"><a href="#onScroll&#x66FF;&#x4EE3;onEndReached" class="headerlink" title="onScroll&#x66FF;&#x4EE3;onEndReached"></a>onScroll&#x66FF;&#x4EE3;onEndReached</h4><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x65B9;&#x6CD5;&#x8DDF;&#x4E0A;&#x9762;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&#x56DE;&#x9988;&#x7684;&#x5185;&#x5BB9;&#xFF08;<code>FlatList</code>&#xFF09;&#x9AD8;&#x5EA6;&#x4E0E;&#x7A97;&#x4F53;&#x9AD8;&#x5EA6;&#x8BA1;&#x7B97;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x7684;&#x4E0A;&#x62C9;&#x5237;&#x65B0;&#x662F;&#x8981;&#x5728;&#x4E0B;&#x8FB9;&#x7F18;&#x89E6;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x5224;&#x5B9A;&#x6761;&#x4EF6;&#x5373;&#x8BA1;&#x7B97;&#x52A8;&#x6001;&#x5DEE;&#x503C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x62C9;&#x53D6;&#x7684;&#x89E6;&#x53D1;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">onScroll(e) {</span><br><span class="line">  <span class="keyword">let</span> y = e.nativeEvent.contentOffset.y</span><br><span class="line">  <span class="keyword">let</span> layoutHeight = e.nativeEvent.layoutMeasurement.height</span><br><span class="line">  <span class="keyword">let</span> contentHeight = e.nativeEvent.contentSize.height</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(y + layoutHeight - contentHeight) &lt; <span class="number">1</span>) {</span><br><span class="line">    <span class="comment">// fetch API</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="react-navigation"><a href="#react-navigation" class="headerlink" title="react-navigation"></a>react-navigation</h3><h4 id="static&#x5C5E;&#x6027;&#x914D;&#x7F6E;&#x95EE;&#x9898;"><a href="#static&#x5C5E;&#x6027;&#x914D;&#x7F6E;&#x95EE;&#x9898;" class="headerlink" title="static&#x5C5E;&#x6027;&#x914D;&#x7F6E;&#x95EE;&#x9898;"></a>static&#x5C5E;&#x6027;&#x914D;&#x7F6E;&#x95EE;&#x9898;</h4><h5 id="&#x4F20;&#x53C2;"><a href="#&#x4F20;&#x53C2;" class="headerlink" title="&#x4F20;&#x53C2;"></a>&#x4F20;&#x53C2;</h5><p>&#x2003;&#x2003;&#x76EE;&#x524D;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F;3.x&#x7248;&#x672C;&#x7684;<code>react-navigation</code>&#x5E93;&#xFF0C;&#x8BF4;&#x5B9E;&#x8BDD;&#x4EE5;&#x524D;&#x4E3B;PC&#x7AEF;&#x5F00;&#x53D1;&#x4F7F;&#x7528;&#x60EF;&#x4E86;<code>react-router</code>&#x7684;&#x6211;&#x5BF9;&#x6B64;&#x6709;&#x70B9;&#x4E0D;&#x9002;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x524D;&#x7248;&#x672C;&#x4E2D;&#x7684;<code>header</code>&#x914D;&#x7F6E;&#xFF08;&#x79FB;&#x52A8;&#x7AEF;&#x5934;&#x90E8;&#x533A;&#x57DF;&#xFF09;&#x662F;&#x901A;&#x8FC7;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x6211;&#x65E0;&#x6CD5;&#x5C06;&#x8981;&#x914D;&#x7F6E;&#x7684;&#x8DEF;&#x7531;&#x72B6;&#x6001;&#x653E;&#x5728;<code>state</code>&#x4E2D;&#x7EF4;&#x62A4;&#xFF08;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;&#x5B9E;&#x4F8B;&#x8BBF;&#x95EE;&#xFF09;&#x3002;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x7684;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5728;&#x5BF9;&#x4E8E;&#x89E6;&#x53D1;&#x8282;&#x70B9;&#x4F7F;&#x7528;<code>navigation.setParams</code>&#x8BBE;&#x7F6E;&#x2026;&#x540C;&#x6837;&#x7684;&#x4E00;&#x4E9B;&#x9700;&#x8981;&#x6D89;&#x53CA;&#x5230;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x6570;&#x636E;&#x7684;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4E5F;&#x65E0;&#x6CD5;&#x5728;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x4E2D;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#xFF0C;&#x8FD8;&#x8981;<code>setParams</code>&#x8FDB;&#x53BB;&#xFF0C;&#x5C5E;&#x5B9E;&#x53CD;&#x4EBA;&#x7C7B;&#x2026;</p><h5 id="&#x5934;&#x90E8;&#x6837;&#x5F0F;"><a href="#&#x5934;&#x90E8;&#x6837;&#x5F0F;" class="headerlink" title="&#x5934;&#x90E8;&#x6837;&#x5F0F;"></a>&#x5934;&#x90E8;&#x6837;&#x5F0F;</h5><p>&#x2003;&#x2003;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x51FA;&#x73B0;&#x5728;&#x6211;&#x9700;&#x8981;&#x9650;&#x5236;&#x6700;&#x957F;&#x663E;&#x793A;&#x957F;&#x5EA6;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x591A;&#x4F59;&#x7684;&#x5185;&#x5BB9;&#x8F6C;&#x7701;&#x7565;&#x53F7;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5728;&#x8BBE;&#x7F6E;&#x6837;&#x5F0F;<code>maxWidth</code>&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x4E2D;&#x95F4;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF1A;&#x6839;&#x636E;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;<code>headerTitle</code>&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x5176;&#x5B9E;&#x6700;&#x7EC8;&#x4F1A;&#x88AB;&#x5904;&#x7406;&#x6E32;&#x67D3;&#x6210;RN&#x7684;<code>Text</code>&#x7EC4;&#x4EF6;&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x662F;&#x5BF9;<code>headerTitleStyle</code>&#x8BBE;&#x7F6E;&#x4E86;&#x6700;&#x5927;&#x957F;&#x5EA6;&#xFF0C;&#x6B64;&#x65F6;&#x76F8;&#x5BF9;&#x4E8E;&#x5916;&#x5C42;&#x5BB9;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x5C45;&#x4E2D;&#x5316;&#xFF0C;&#x8FD8;&#x987B;&#x8981;&#x518D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;<code>headerTitleContainerStyle</code> &#x8FDB;&#x884C;&#x9650;&#x5236;&#x3002;</p><h3 id="BackHandler"><a href="#BackHandler" class="headerlink" title="BackHandler"></a>BackHandler</h3><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x7C7B;&#x6BD4;&#x8F83;&#x6709;&#x610F;&#x601D;&#xFF0C;&#x4E3B;&#x8981;&#x5728;&#x7269;&#x7406;&#x952E;&#x8FD4;&#x56DE;&#x5B9A;&#x5236;&#x7684;&#x573A;&#x666F;&#x6D89;&#x53CA;&#x5230;&#xFF0C;&#x6BD4;&#x5982;&#x8981;&#x6839;&#x636E;&#x8868;&#x5355;&#x6570;&#x636E;&#x62E6;&#x622A;&#x8FD4;&#x56DE;&#xFF0C;&#x63D0;&#x793A;&#x5F39;&#x7A97;&#x4E91;&#x4E91;&#x3002;&#x5E38;&#x89C4;&#x65B9;&#x6848;&#x5C31;&#x662F;&#x901A;&#x8FC7;<code>addEventListener</code>&#x6302;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF08;<code>return true</code>&#xFF09;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doSth = <span class="function"><span class="params">()</span> =&gt;</span> { <span class="keyword">return</span> <span class="literal">true</span> }</span><br><span class="line">BackHandler.addEventListener(<span class="string">&apos;hardwareBackPress&apos;</span>, <span class="keyword">this</span>.doSth)</span><br></pre></td></tr></tbody></table></figure><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><h4 id="&#x8BF7;&#x6C42;&#x8FDC;&#x7AEF;uri&#x7684;&#x7F13;&#x5B58;&#x95EE;&#x9898;"><a href="#&#x8BF7;&#x6C42;&#x8FDC;&#x7AEF;uri&#x7684;&#x7F13;&#x5B58;&#x95EE;&#x9898;" class="headerlink" title="&#x8BF7;&#x6C42;&#x8FDC;&#x7AEF;uri&#x7684;&#x7F13;&#x5B58;&#x95EE;&#x9898;"></a>&#x8BF7;&#x6C42;&#x8FDC;&#x7AEF;uri&#x7684;&#x7F13;&#x5B58;&#x95EE;&#x9898;</h4><p>&#x2003;&#x2003;&#x8BE5;&#x95EE;&#x9898;&#x51FA;&#x73B0;&#x5728;&#x6211;&#x4F7F;&#x7528;Image&#x7EC4;&#x4EF6;&#x52A0;&#x8F7D;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x56FE;&#x7247;<code>uri</code>&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x5728;<code>android</code>&#x5E73;&#x53F0;&#x51FA;&#x73B0;&#x3002;&#x7531;&#x4E8E;&#x8FDC;&#x7A0B;&#x56FE;&#x5E8A;&#x751F;&#x6210;&#x56FE;&#x7247;&#x6709;&#x6570;&#x91CF;&#x9650;&#x5236;&#xFF0C;&#x8D85;&#x8FC7;&#x6570;&#x91CF;&#x5219;&#x4F1A;&#x8986;&#x76D6;&#x4EE5;&#x524D;&#x7684;&#xFF0C;&#x5373;&#x8D85;&#x8FC7;&#x9650;&#x5236;&#x6570;&#x91CF;&#x7684;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#x7684;uri&#x5C06;&#x4F1A;&#x62FF;&#x5230;&#x4EE5;&#x524D;&#x8BF7;&#x6C42;&#x8FC7;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;uri&#xFF0C;&#x5BF9;&#x4E8E;<code>ios</code>&#xFF0C;RN&#x7684;&#x5E95;&#x5C42;&#x5E94;&#x8BE5;&#x662F;&#x505A;&#x4E86;&#x4E0D;&#x4F1A;&#x7F13;&#x5B58;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x53D6;&#x6700;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F46;<code>android</code>&#x5219;&#x4F1A;&#x62FF;&#x4E4B;&#x524D;&#x8BF7;&#x6C42;&#x8FC7;&#x7684;&#x8D44;&#x6E90;&#x5C55;&#x73B0;&#xFF1B;&#x7C7B;&#x4F3C;&#x4E8E;&#x6211;&#x4EEC;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5F3A;&#x7F13;&#x5B58;&#x73B0;&#x8C61;&#x3002;&#x7531;&#x4E8E;&#x662F;&#x7EC4;&#x4EF6;&#x81EA;&#x8EAB;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x6CA1;&#x529E;&#x6CD5;&#x8BBE;&#x7F6E;&#x8BE5;http&#x8BF7;&#x6C42;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#xFF0C;&#x63A8;&#x8350;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x5728;<code>uri</code>&#x540E;&#x62FC;&#x63A5;&#x4E00;&#x4E2A;<code>hash</code>&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x3002;&#x670D;&#x52A1;&#x7AEF;&#x53EA;&#x4F1A;&#x89E3;&#x6790;&#x524D;&#x9762;&#x8BFB;&#x53D6;&#x56FE;&#x7247;&#x4E0B;&#x8F7D;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x624B;&#x673A;&#x7AEF;&#xFF08;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;&#x4E5F;&#x80FD;&#x7406;&#x89E3;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x8D70;&#x7F13;&#x5B58;&#x3002;</p><h3 id="&#x5E03;&#x5C40;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x8BA1;&#x7B97;"><a href="#&#x5E03;&#x5C40;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x8BA1;&#x7B97;" class="headerlink" title="&#x5E03;&#x5C40;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x8BA1;&#x7B97;"></a>&#x5E03;&#x5C40;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x8BA1;&#x7B97;</h3><h4 id="onLayout"><a href="#onLayout" class="headerlink" title="onLayout"></a>onLayout</h4><p>&#x2003;&#x2003;&#x8BE5;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x5728;&#x7EC4;&#x4EF6;&#x6784;&#x9020;&#x5E03;&#x5C40;&#x5B8C;&#x6BD5;&#x540E;&#x56DE;&#x8C03;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x673A;&#x83B7;&#x53D6;&#x51C6;&#x786E;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p><h4 id="ref&#x7684;measure&#x65B9;&#x6CD5;"><a href="#ref&#x7684;measure&#x65B9;&#x6CD5;" class="headerlink" title="ref&#x7684;measure&#x65B9;&#x6CD5;"></a>ref&#x7684;measure&#x65B9;&#x6CD5;</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">handleOnLayout = <span class="function"><span class="params">e</span> =&gt;</span> {</span><br><span class="line"><span class="keyword">this</span>.someCompRef.current.measure(<span class="function">(<span class="params">x, y, width, height, left, top</span>) =&gt;</span> {</span><br><span class="line"><span class="comment">// do sth to trigger view</span></span><br><span class="line">})</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x79CD;&#x8C03;&#x6574;&#x6837;&#x5F0F;&#x5E03;&#x5C40;&#x65B9;&#x5F0F;&#x5E38;&#x7528;&#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x81EA;&#x9002;&#x5E94;&#xFF0C;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x6309;&#x8BBE;&#x8BA1;&#x56FE;&#x6BD4;&#x4F8B;&#x5B9A;&#x5236;&#x5931;&#x6548;&#x65F6;&#x4F7F;&#x7528;&#x3002;</p><h3 id="react-native-gesture-handler"><a href="#react-native-gesture-handler" class="headerlink" title="react-native-gesture-handler"></a>react-native-gesture-handler</h3><p>&#x2003;&#x2003;<code>react-navigation</code>&#x5185;&#x90E8;&#x6709;&#x4F7F;&#x7528;&#x8BE5;&#x5E93;&#x8FDB;&#x884C;&#x624B;&#x52BF;&#x8FD4;&#x56DE;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x8BE5;&#x5E93;&#x9700;&#x8981;&#x5347;&#x7EA7;&#x5230;<code>1.5.1</code>&#x7248;&#x672C;&#x540E;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x6709;&#x9876;&#x90E8;&#x5F15;&#x5165;&#x7F3A;&#x5931;&#x7684;&#x62A5;&#x9519;&#x3002;&#x5177;&#x4F53;&#x539F;&#x56E0;&#x53EF;&#x4EE5;&#x5B98;&#x65B9;issue&#x7684;&#x7248;&#x672C;&#x53D1;&#x5E03;changelog&#x3002;</p><h3 id="&#x9519;&#x8BEF;&#x6355;&#x83B7;"><a href="#&#x9519;&#x8BEF;&#x6355;&#x83B7;" class="headerlink" title="&#x9519;&#x8BEF;&#x6355;&#x83B7;"></a>&#x9519;&#x8BEF;&#x6355;&#x83B7;</h3><h4 id="&#x5168;&#x5C40;&#x7684;&#x5F02;&#x5E38;&#x6355;&#x83B7;"><a href="#&#x5168;&#x5C40;&#x7684;&#x5F02;&#x5E38;&#x6355;&#x83B7;" class="headerlink" title="&#x5168;&#x5C40;&#x7684;&#x5F02;&#x5E38;&#x6355;&#x83B7;"></a>&#x5168;&#x5C40;&#x7684;&#x5F02;&#x5E38;&#x6355;&#x83B7;</h4><p>&#x2003;&#x2003;&#x6CE8;&#xFF1A;&#x8FD9;&#x4E2A;&#x5168;&#x5C40;&#x4E0D;&#x5305;&#x62EC;promise&#x5185;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x5BF9;&#x8C61;&#x5305;&#x62EC;&#x4E00;&#x4E9B;&#x672A;<code>catch</code>&#x7684;&#x540C;&#x6B65;&#x5F02;&#x5E38;&#x53CA;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x91CC;&#x7684;timer&#x7C7B;&#x5F02;&#x5E38;&#x3002;</p><p>&#x2003;&#x2003;&#x5728;&#x5347;&#x7EA7;0.62&#x7248;&#x672C;&#x540E;&#xFF0C;RN&#x9879;&#x76EE;&#x5728;&#x5B89;&#x5353;&#x7AEF;&#x8FD0;&#x884C;&#x65F6;&#x51FA;&#x73B0;&#x8FC7;&#x4E00;&#x4E2A;&#x5F88;&#x8BE1;&#x5F02;&#x7684;crash&#x95EE;&#x9898;:</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeError: t is not a function. (In &apos;t(n)&apos;, &apos;t&apos; is &quot;change&quot;)</span></span><br><span class="line"><span class="comment">// UncaughtException detected: com.facebook.react.common.JavascriptException</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E24;&#x7AEF;&#x90FD;&#x6CA1;&#x6709;&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x5B9A;&#x4F4D;&#x65B9;&#x6848;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x95EE;&#x9898;&#x5728;&#x672C;&#x5730;&#x8C03;&#x8BD5;&#x65E0;&#x6CD5;&#x590D;&#x73B0;&#xFF08;&#x63A7;&#x5236;&#x53F0;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x5F02;&#x5E38;&#x6253;&#x5370;&#xFF09;&#xFF0C;&#x5373;&#x53EA;&#x6709;&#x90E8;&#x7F72;&#x670D;&#x52A1;&#x5668;&#x540E;&#x624D;&#x4F1A;&#x51FA;&#x73B0;&#x3002;</p><p>&#x2003;&#x2003;&#x6700;&#x7EC8;&#x7684;&#x89E3;&#x51B3;&#x7B56;&#x7565;&#x662F;&#x5229;&#x7528;RN&#x7AEF;&#x81EA;&#x8EAB;&#x7684;&#x5168;&#x5C40;&#x9519;&#x8BEF;&#x6355;&#x83B7;&#x80FD;&#x529B;&#x5C06;&#x8BE5;&#x5F02;&#x5E38;&#x541E;&#x6389;&#xFF0C;&#x6839;&#x636E;&#x5B89;&#x5353;&#x7AEF;&#x7684;&#x8BF4;&#x6CD5;&#x662F;&#x8FD9;&#x6837;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x4E0D;&#x4F1A;&#x5192;&#x6CE1;&#x5230;&#x5916;&#x5C42;&#x7684;&#x5BB9;&#x5668;&#x88AB;java&#x6355;&#x83B7;&#x5BFC;&#x81F4;&#x629B;&#x9519;&#x5F15;&#x53D1;crash&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x6CBB;&#x6807;&#x4F46;&#x662F;&#x6682;&#x65E0;&#x6709;&#x6548;&#x65B9;&#x6CD5;&#x5B9A;&#x4F4D;&#x8BE5;&#x95EE;&#x9898;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">global.ErrorUtils.setGlobalHandler(<span class="function"><span class="params">e</span> =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;&#x5F02;&#x5E38;&#x6355;&#x83B7;&#x4FE1;&#x606F;&#xFF1A;&apos;</span>, e.message)</span><br><span class="line">  printToApp(<span class="string">&apos;&#x539F;&#x751F;&#x7AEF;&#x6253;&#x5370;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF1A;&apos;</span>, e.message)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h4 id="promise&#x5F02;&#x5E38;&#x6355;&#x83B7;"><a href="#promise&#x5F02;&#x5E38;&#x6355;&#x83B7;" class="headerlink" title="promise&#x5F02;&#x5E38;&#x6355;&#x83B7;"></a>promise&#x5F02;&#x5E38;&#x6355;&#x83B7;</h4><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x662F;&#x5229;&#x7528;facebook&#x6269;&#x5C55;&#x7684;Promise&#x65B9;&#x6CD5;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&apos;promise/setimmediate/rejection-tracking&apos;</span>).enable({</span><br><span class="line">      allRejections: <span class="literal">true</span>,</span><br><span class="line">      onUnhandled: <span class="function">(<span class="params">id, error = {}</span>) =&gt;</span> {</span><br><span class="line">        <span class="keyword">let</span> message</span><br><span class="line">        <span class="keyword">let</span> stack</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">const</span> stringValue = <span class="built_in">Object</span>.prototype.toString.call(error);</span><br><span class="line">        <span class="keyword">if</span> (stringValue === <span class="string">&apos;[object Error]&apos;</span>) {</span><br><span class="line">          message = <span class="built_in">Error</span>.prototype.toString.call(error);</span><br><span class="line">          stack = error.stack;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          <span class="comment">/* $FlowFixMe(&gt;=0.54.0 site=react_native_oss) This comment suppresses</span></span><br><span class="line"><span class="comment">           * an error found when Flow v0.54 was deployed. To see the error delete</span></span><br><span class="line"><span class="comment">           * this comment and run Flow. */</span></span><br><span class="line">          message = <span class="built_in">require</span>(<span class="string">&apos;pretty-format&apos;</span>)(error);</span><br><span class="line">        }</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">const</span> warning =</span><br><span class="line">          <span class="string">`Possible Unhandled Promise Rejection (id: <span class="subst">${id}</span>):\n`</span> +</span><br><span class="line">          <span class="string">`<span class="subst">${message}</span>\n`</span> +</span><br><span class="line">          (stack == <span class="literal">null</span> ? <span class="string">&apos;&apos;</span> : stack);</span><br><span class="line">        <span class="built_in">console</span>.warn(warning);</span><br><span class="line">        <span class="comment">// promise&#x672A;&#x6355;&#x83B7;&#x7684;&#x5F02;&#x5E38;&#x8FDB;&#x884C;&#x9875;&#x9762;&#x964D;&#x7EA7;&#x5904;&#x7406;</span></span><br><span class="line">        <span class="keyword">this</span>.setState({</span><br><span class="line">          showErrorPage: <span class="literal">true</span></span><br><span class="line">        })</span><br><span class="line">      },</span><br><span class="line">      onHandled: <span class="function"><span class="params">id</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">const</span> warning =</span><br><span class="line">          <span class="string">`Promise Rejection Handled (id: <span class="subst">${id}</span>)\n`</span> +</span><br><span class="line">          <span class="string">&apos;This means you can ignore any previous messages of the form &apos;</span> +</span><br><span class="line">          <span class="string">`&quot;Possible Unhandled Promise Rejection (id: <span class="subst">${id}</span>):&quot;`</span>;</span><br><span class="line">        <span class="built_in">console</span>.warn(warning);</span><br><span class="line">      },</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Êú¨Êñá‰∏ªË¶ÅËÆ∞ÂΩï‰∏™‰∫∫Âú®RNÂºÄÂèë‰∏≠ÈÅáÂà∞ÁöÑ‰∏Ä‰∫õÁñëÊÉëÂíåÁêÜËß£Âèä‰∏Ä‰∫õ‰∏öÂä°Âú∫ÊôØÁöÑÂ§ÑÁêÜÊñπÊ°à„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ÁßªÂä®Á´Ø" scheme="https://chrisdeo.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="React-Native" scheme="https://chrisdeo.github.io/tags/React-Native/"/>
    
  </entry>
  
  <entry>
    <title>React-NativeÂêØÂä®ÁéØÂ¢ÉÈÖçÁΩÆ</title>
    <link href="https://chrisdeo.github.io/2020/02/13/React-Native%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <id>https://chrisdeo.github.io/2020/02/13/React-NativeÂêØÂä®ÁéØÂ¢ÉÈÖçÁΩÆ/</id>
    <published>2020-02-13T08:35:32.000Z</published>
    <updated>2020-05-30T03:22:42.656Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x8BB0;React-Native&#x5165;&#x5751;&#x7684;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#xFF08;Windows)&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;React-Native&#x8BA9;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#x4E5F;&#x5177;&#x5907;&#x4E86;APP&#x5F00;&#x53D1;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x7F16;&#x5199;JS&#xFF0C;&#x6700;&#x540E;&#x7F16;&#x8BD1;&#x76F4;&#x51FA;<code>android</code>&#x3001;<code>ios</code>&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x2026;&#x4E0B;&#x9762;&#x5C31;&#x770B;&#x770B;windows&#x73AF;&#x5883;&#x4E0B;&#x914D;&#x7F6E;&#x4F1A;&#x9047;&#x5230;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#xFF1A;</p><p>&#x2003;&#x2003;&#x9644;&#xFF1A; &#x5148;&#x5B89;&#x88C5;JDK&#x548C;Android Studio&#x4F1A;&#x51CF;&#x5C11;&#x540E;&#x9762;&#x5F88;&#x5927;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#xFF0C;&#x4E24;&#x8005;&#x5B89;&#x88C5;&#x540E;&#x6CE8;&#x610F;&#x914D;&#x7F6E;&#x5BF9;&#x5E94;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;</p><p>&#x2003;&#x2003;&#x914D;&#x7F6E;JAVA&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;<code>JAVA_HOME</code>&#xFF1A;</p><p><img src="/2020/02/13/React-NativeÂêØÂä®ÁéØÂ¢ÉÈÖçÁΩÆ/jdk.jpg" alt=""></p><p>&#x2003;&#x2003;&#x914D;&#x7F6E;Android&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;<code>ANDROID_HOME</code>&#xFF1A;</p><p><img src="/2020/02/13/React-NativeÂêØÂä®ÁéØÂ¢ÉÈÖçÁΩÆ/android.jpg" alt=""></p><p>&#x2003;&#x2003;&#x914D;&#x7F6E;&#x8FDB;&#x7CFB;&#x7EDF;<code>Path</code>&#xFF1A;</p><p><img src="/2020/02/13/React-NativeÂêØÂä®ÁéØÂ¢ÉÈÖçÁΩÆ/path.jpg" alt=""></p><p>&#x2003;&#x2003;&#x4E4B;&#x540E;&#x8FDB;&#x884C;RN&#x73AF;&#x5883;&#x642D;&#x5EFA;&#xFF1A;</p><ol><li>&#x9996;&#x5148;&#xFF0C;&#x786E;&#x4FDD;Node&#x7248;&#x672C;&#x591F;&#x9AD8;&#xFF0C;version &gt;= 10.0.0&#x3002;&#x82E5;&#x987B;&#x8981;&#x66F4;&#x65B0;&#x76F4;&#x63A5;&#x53BB;&#x5B98;&#x65B9;&#x4E0B;&#x8F7D;.msi&#xFF0C;&#x5B89;&#x88C5;&#x4F1A;&#x8986;&#x76D6;&#x4E4B;&#x524D;&#x7248;&#x672C;&#x3002;</li><li>&#x62C9;&#x53D6;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#xFF0C;&#x7531;&#x4E8E;&#x65B0;&#x5DE5;&#x5730;&#x4F7F;&#x7528;&#x7684;&#x662F;svn&#xFF0C;&#x5B89;&#x88C5;GUI&#x540E;&#xFF0C;&#x4F7F;&#x7528;<code>svn checkout</code>&#x5BF9;&#x5E94;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x76F4;&#x63A5;&#x62C9;&#x53D6;&#x3002;</li><li><code>npm install</code>&#x3002;</li><li><code>react-native run-android</code>&#x3002;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x751F;&#x6210;&#x4E00;&#x4E2A;<code>android</code>&#x7684;<code>apk</code>&#x5305;&#xFF0C;&#x5728;USB&#x8FDE;&#x63A5;&#x5B89;&#x5353;&#x673A;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x8F6F;&#x4EF6;&#x5305;&#x5BFC;&#x5165;&#x3002;&#x5BFC;&#x5165;&#x987B;&#x8981;&#x5B89;&#x5353;&#x673A;&#x5F00;&#x542F;&#x5F00;&#x53D1;&#x8005;&#x6A21;&#x5F0F;&#x9009;&#x9879;&#xFF0C;&#x5141;&#x8BB8;USB&#x8C03;&#x8BD5;&#x3002; </li><li><code>bcprov-jdk15on</code>&#x5B89;&#x88C5;&#x5931;&#x8D25;&#x6216;&#x7F13;&#x6162;&#xFF0C;&#x6302;&#x68AF;&#x5B50;&#x3002;</li><li><code>SDK location not found</code>&#xFF0C;&#x9996;&#x5148;&#x5728;Windows&#x73AF;&#x5883;&#x4E0B;&#x7684;RN&#x5F00;&#x53D1;&#x662F;&#x79BB;&#x4E0D;&#x5F00;Android Studio&#x7684;&#xFF0C;&#x5177;&#x4F53;&#x5B89;&#x88C5;Android Studio&#x7684;&#x6B65;&#x9AA4;&#x89C1;&#x7F51;&#x4E0A;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E9B;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x7684;&#x5751;&#xFF09;&#x3002;&#x5B89;&#x88C5;&#x597D;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x987B;&#x8981;&#x5728;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>android</code>&#x76EE;&#x5F55;&#x4E2D;&#x521B;&#x5EFA;<code>local.properties</code>&#x6587;&#x4EF6;&#xFF0C;&#x5199;&#x5165;&#xFF08;&#x81EA;&#x5DF1;&#x5B89;&#x88C5;AS SDK&#x7684;&#x4F4D;&#x7F6E;&#xFF09;<code>sdk.dir=C\:\\Users\\Shinelon\\AppData\\Local\\Android\\Sdk</code>&#x6CE8;&#x610F;&#x659C;&#x6760;&#x4F7F;&#x7528; &#xFF08;WINDOWS&#x73AF;&#x5883;&#xFF09;&#x3002;</li><li><code>Could not find tools.jar</code>&#xFF0C;&#x4E3B;&#x8981;&#x662F;JAVA&#x4E0B;&#x7684;<code>jdk</code>&#x4F9D;&#x8D56;&#x3002;&#x6B63;&#x5E38;&#x6765;&#x8BF4;&#x6211;&#x4EEC;&#x5B89;&#x88C5;&#x7684;JAVA&#x76EE;&#x5F55;&#x4E0B;&#x4F1A;&#x6709;&#x5B89;&#x88C5;&#x7684;jdk&#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x4E0B;&#x9762;&#x7684;lib&#x76EE;&#x5F55;&#x4E2D;&#x6709;tools.jar&#x6587;&#x4EF6;&#x3002;&#x62A5;&#x8BE5;&#x9519;&#xFF0C;&#x987B;&#x8981;&#x5728;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E2D;&#x6307;&#x5B9A;<code>JAVA_HOME</code> =&gt; <code>C:\Program Files\Java\jdk1.8.0_181</code> &#xFF0C;&#x4FEE;&#x6539;&#x540E;&#x6CE8;&#x610F;&#x91CD;&#x542F;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177; &#xFF08;&#x4E0D;&#x5173;&#x95ED;&#x4E0D;&#x4F1A;&#x751F;&#x6548;&#xFF09;&#x3002;</li><li><code>gradlew.bat app:installDebug</code>&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x4E00;&#x4E2A;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;<code>&#xFF08;Deprecated Gradle features were used in this build, making it incompatible with Gradle 6.0&#xFF09;</code>&#xFF0C;&#x800C;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x6307;&#x517C;&#x5BB9;&#x51FA;&#x9519;&#xFF0C;&#x6307;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;&#x5B89;&#x5353;&#x673A;&#x4E0A;&#x5BFC;&#x5165;&#x4E86;&#x8BE5;<code>apk</code>&#x3002;</li><li><code>Invalid regular expression: /(.*\\__fixtures__\\.*|node_modules[\\\]react[\\\]dist[\\\].*|website\\node_modules\\.*|heapCapture\\bundle\.js|.*\\__tests__\\.*)$/: Unterminated character class.</code>&#xFF0C;&#x5F53;&#x65F6;&#x5B89;&#x88C5;&#x4E86;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;Node&#xFF0C;&#x8BE5;&#x9519;&#x8BEF;&#x4E3A;&#x7248;&#x672C;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x56DE;&#x9000;&#x7248;&#x672C;&#x81F3;<code>v12.10.0</code>&#x3002;</li><li><code>adb devices</code>&#x663E;&#x793A;&#x5F53;&#x524D;&#x4E0E;&#x7535;&#x8111;&#x8FDE;&#x63A5;&#x7684;&#x624B;&#x673A;&#x8BBE;&#x5907;&#xFF0C;&#x7528;&#x4E8E;&#x4F20;&#x8F93;&#x8C03;&#x8BD5;&#x3002;&#x53EF;&#x80FD;&#x4F1A;&#x62A5;<code>adb server version (31) doesn&apos;t match this client (41); killing =&gt; server</code>&#xFF0C;&#x68C0;&#x67E5;&#x4E0B;&#x662F;&#x5426;&#x6709;&#x9C81;&#x5927;&#x5E08;&#x4E4B;&#x7C7B;&#x7684;&#x7A0B;&#x5E8F;&#x5360;&#x7528;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x62A5;&#x4E86;&#x8BE5;&#x95EE;&#x9898;&#x4F9D;&#x65E7;&#x6709;&#x663E;&#x793A;&#x6B63;&#x786E;&#x7684;&#x8FDE;&#x63A5;&#x8BBE;&#x5907;&#x53EF;&#x4EE5;&#x65E0;&#x89C6;&#x3002;</li><li>&#x9664;&#x4E86;&#x771F;&#x673A;&#x8C03;&#x8BD5;&#x5916;&#xFF0C;&#x4EA6;&#x53EF;&#x7528;&#x6A21;&#x62DF;&#x5668;&#x8FDE;&#x63A5;&#x8C03;&#x8BD5;&#xFF1B;Android Studio&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A; or &#x5B89;&#x88C5;&#x4E00;&#x4E2A;&#x624B;&#x6E38;&#x6A21;&#x62DF;&#x5668;&#xFF08;&#x591C;&#x795E;&#x6A21;&#x62DF;&#x5668;&#xFF09;&#x3002;&#x76EE;&#x524D;&#x6211;&#x81EA;&#x5DF1;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x591C;&#x795E;&#xFF0C;&#x4F53;&#x9A8C;&#x8FD8;&#x4E0D;&#x9519;&#x3002;</li><li>&#x591C;&#x795E;&#x6A21;&#x62DF;&#x5668;&#x8C03;&#x8BD5;&#x6D41;&#x7A0B;&#xFF1A;&#x5148;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FDB;&#x5165;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E0B;&#x7684;bin&#x76EE;&#x5F55;&#xFF0C;&#x952E;&#x5165;<code>nox_adb connect localhost:62001</code>&#x3002;&#x7AEF;&#x53E3;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7EA6;&#x5B9A;&#xFF0C;&#x4E3A;&#x7684;&#x662F;&#x4F60;&#x4F7F;&#x7528; <code>adb connect localhost:62001</code> &#xFF08;&#x4E0D;&#x8981;&#x5728;<code>/nox/bin</code>&#x4E0B;&#x952E;&#x5165;&#xFF0C;&#x5426;&#x5219;&#x4E5F;&#x4F1A;&#x89C6;&#x4F5C;<code>nox_adb</code>&#xFF09;&#x5C06;&#x6A21;&#x62DF;&#x5668;&#x8FDE;&#x63A5;&#x4E0A;&#x3002;&#xFF08;&#x8FDE;&#x63A5;&#x4E0A;&#xFF0C;&#x624D;&#x80FD;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x7684;<code>react-native run-android</code>&#x5C06;&#x8C03;&#x8BD5;apk&#x88C5;&#x8FDB;&#x53BB;&#xFF09;</li><li>&#x53EF;&#x80FD;&#x62C9;&#x51FA;&#x6765;&#x7684;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#x4E2D;&#x6CA1;&#x6709;&#x751F;&#x4EA7;<code>ios</code>&#x53CA;<code>android</code>&#x76EE;&#x5F55;&#xFF0C;&#x5F53;&#x6267;&#x884C;<code>react-native run-android</code>&#x65F6;&#x4F1A;&#x62A5;<code>error Android project not found. Are you sure this is a React Native project?</code>&#xFF0C;&#x6B64;&#x65F6;&#x6267;&#x884C;<code>react-native eject</code>&#x5373;&#x53EF;&#x3002;&#xFF08;&#x4F3C;&#x4E4E;&#x65B0;&#x7248;&#x672C;&#x7684;RN&#x4E2D;&#x8BE5;&#x65B9;&#x6CD5;&#x88AB;&#x79FB;&#x9664;&#x4E86;&#xFF09;</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;ËÆ∞React-NativeÂÖ•ÂùëÁöÑÁéØÂ¢ÉÈÖçÁΩÆÔºàWindows)„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ÁßªÂä®Á´Ø" scheme="https://chrisdeo.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="React-Native" scheme="https://chrisdeo.github.io/tags/React-Native/"/>
    
  </entry>
  
  <entry>
    <title>React‰ΩøÁî®ÊâãËÆ∞</title>
    <link href="https://chrisdeo.github.io/2020/01/27/React%E4%BD%BF%E7%94%A8%E6%89%8B%E8%AE%B0/"/>
    <id>https://chrisdeo.github.io/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/</id>
    <published>2020-01-27T06:26:22.000Z</published>
    <updated>2020-05-10T13:54:07.219Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4E00;&#x7BC7;&#x5206;&#x4EAB;&#x6587;&#x2026;</p></blockquote><a id="more"></a><h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><p>&#x2003;&#x2003;&#x7531;Vue&#x7684;H5&#x9875;&#x9762;&#x5F00;&#x53D1;&#x8F6C;&#x4E3A;React-Native&#x7684;&#x539F;&#x751F;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF1B;</p><p>&#x2003;&#x2003;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x6210;&#x5458;&#x8FC7;&#x53BB;&#x90FD;&#x662F;&#x4E3B;React&#x6280;&#x672F;&#x6808;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x548C;&#x7406;&#x89E3;&#x5404;&#x6709;&#x4E0D;&#x540C;&#xFF1B;</p><p>&#x2003;&#x2003;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x662F;&#x672C;&#x4EBA;&#x8FC7;&#x53BB;&#x5BF9;React&#x7684;&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x4E9B;&#x601D;&#x8003;&#x548C;&#x603B;&#x7ED3;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x8BA9;&#x8FD8;&#x4E0D;&#x719F;&#x7EC3;&#x7684;&#x6210;&#x5458;&#x5BF9;&#x8BE5;&#x6846;&#x67B6;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x6613;&#x51FA;&#x9519;&#x70B9;&#x5728;&#x672A;&#x6765;&#x9047;&#x5230;&#x65F6;&#x8FDB;&#x884C;&#x89C4;&#x907F;&#xFF0C;&#x540C;&#x65F6;&#x5C3D;&#x91CF;&#x80FD;&#x591F;&#x7EDF;&#x4E00;&#x4E00;&#x4E9B;&#x903B;&#x8F91;&#x7EC4;&#x7EC7;&#x548C;&#x5199;&#x6CD5;&#xFF0C;&#x51CF;&#x5C11;&#x591A;&#x4EBA;&#x5408;&#x4F5C;&#x65F6;&#x56E0;&#x4E0D;&#x540C;&#x98CE;&#x683C;&#x5E26;&#x6765;&#x7684;&#x7406;&#x89E3;&#x6210;&#x672C;&#xFF1B;</p><h2 id="&#x6846;&#x67B6;&#x5BF9;&#x6BD4;"><a href="#&#x6846;&#x67B6;&#x5BF9;&#x6BD4;" class="headerlink" title="&#x6846;&#x67B6;&#x5BF9;&#x6BD4;"></a>&#x6846;&#x67B6;&#x5BF9;&#x6BD4;</h2><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/framework.jpg" alt=""></p><p>&#x2003;&#x2003;&#x4E0A;&#x56FE;&#x6765;&#x6E90;&#x4E8E;&#x5C24;&#x5927;&#x4E4B;&#x524D;&#x5728;&#x5E73;&#x5B89;&#x505A;&#x7684;&#x5206;&#x4EAB;&#x7684;PPT&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;Vue&#x548C;React&#x4E24;&#x8005;&#x5728;&#x6846;&#x67B6;&#x65B9;&#x9762;&#x90FD;&#x662F;&#x6BD4;&#x8F83;&#x8F7B;&#x7684;&#xFF08;React&#x672C;&#x8EAB;&#x5176;&#x5B9E;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#x5E93;&#xFF0C;&#x800C;Vue&#x5C24;&#x5927;&#x672C;&#x4EBA;&#x79F0;&#x5176;&#x4E3A;&#x6E10;&#x8FDB;&#x5F0F;&#x6846;&#x67B6;&#xFF09;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x590D;&#x6742;&#x5E94;&#x7528;&#x4E2D;&#x90FD;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x914D;&#x5957;&#x7684;&#x5E93;&#x53C2;&#x4E0E;&#x624D;&#x80FD;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x9879;&#x76EE;&#x3002;</p><p>&#x2003;&#x2003;&#x5728;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E0A;&#xFF0C;&#x501F;&#x52A9;&#x4E8E;JSX&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x66F4;<strong>&#x50CF;&#x7F16;&#x5199;&#x539F;&#x751F;JS&#x4E00;&#x6837;&#x53BB;&#x6572;React</strong>&#xFF0C;&#x800C;Vue&#x5219;&#x5185;&#x90E8;&#x96C6;&#x6210;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6307;&#x4EE4;&#xFF08;<code>v-if</code>&#x903B;&#x8F91;&#x5224;&#x65AD;&#x3001;<code>v-bind</code>&#x8D1F;&#x8D23;&#x7ED1;&#x5B9A;&#x6570;&#x636E;&#x3001;&#x5C5E;&#x6027;&#x8868;&#x8FBE;&#x5F0F;&#x7B49;&#x3001;<code>v-for</code>&#x5FAA;&#x73AF;&#x7ED3;&#x6784;&#x3001;<code>v-on</code>&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x3001;<code>v-model</code>&#x8D1F;&#x8D23;&#x8868;&#x5355;&#x57DF;&#x4E2D;&#x7684;&#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x3001;<code>v-show</code>CSS&#x6837;&#x5F0F;&#x663E;&#x793A;&#x5207;&#x6362;&#x603B;&#x662F;&#x6E32;&#x67D3;&#xFF09;&#x548C;&#x6570;&#x636E;&#x6536;&#x96C6;&#x673A;&#x5236;&#x6765;&#x4F7F;&#x6211;&#x4EEC;&#x540C;&#x6837;&#x8F7B;&#x677E;&#x76F4;&#x63A5;&#x5730;&#x8FDB;&#x884C;&#x903B;&#x8F91;&#x7F16;&#x5199;&#xFF1B;&#x5728;&#x6570;&#x636E;&#x540C;&#x6B65;&#x4E0A;&#xFF0C;React&#x9700;&#x8981;&#x624B;&#x52A8;&#x5730;&#x8FDB;&#x884C;<code>setState</code>&#xFF0C;&#x800C;Vue&#x7531;&#x4E8E;&#x5185;&#x90E8;&#x4EE3;&#x7406;&#x7684;&#x673A;&#x5236;&#xFF08;&#x8FC7;&#x53BB;&#x7684;<code>Object.defineProperty</code>&#x5230;<code>Proxy</code>&#x4EE3;&#x7406;&#xFF09;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5173;&#x6CE8;&#x5177;&#x4F53;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x7528;&#x63D0;&#x4F9B;&#x7684;&#x6307;&#x4EE4;&#x5373;&#x53EF;&#xFF1B;&#x53E6;&#x5916;&#x5728;&#x5927;&#x578B;&#x9879;&#x76EE;&#x4E2D;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x540E;&#x6587;&#x8BA8;&#x8BBA;&#x3002;</p><p>&#x2003;&#x2003;Vue&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#xFF08;&#x8FFD;&#x8E2A;&#x53D8;&#x5316;&#xFF09;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/watcher.png" alt=""></p><h2 id="React&#x5F00;&#x53D1;&#x6CE8;&#x610F;&#x70B9;"><a href="#React&#x5F00;&#x53D1;&#x6CE8;&#x610F;&#x70B9;" class="headerlink" title="React&#x5F00;&#x53D1;&#x6CE8;&#x610F;&#x70B9;"></a>React&#x5F00;&#x53D1;&#x6CE8;&#x610F;&#x70B9;</h2><h3 id="&#x547D;&#x540D;&#x8981;&#x6C42;"><a href="#&#x547D;&#x540D;&#x8981;&#x6C42;" class="headerlink" title="&#x547D;&#x540D;&#x8981;&#x6C42;"></a>&#x547D;&#x540D;&#x8981;&#x6C42;</h3><p>&#x2003;&#x2003;React<strong>&#x7EC4;&#x4EF6;&#x58F0;&#x660E;&#x65F6;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x987B;&#x5927;&#x5199;</strong>&#xFF1B;</p><p>&#x2003;&#x2003;React&#x4E2D;&#x7684;<strong>&#x4E8B;&#x4EF6;&#x3001;&#x5C5E;&#x6027;&#x547D;&#x540D;&#x987B;&#x9075;&#x5B88;&#x9A7C;&#x5CF0;&#x89C4;&#x8303;&#xFF0C;&#x5982;<code>className</code>&#x3001;<code>onClick</code>&#x7B49;&#x7B49;</strong>&#xFF1B;</p><h3 id="setState&#x95EE;&#x9898;"><a href="#setState&#x95EE;&#x9898;" class="headerlink" title="setState&#x95EE;&#x9898;"></a>setState&#x95EE;&#x9898;</h3><p>&#x2003;&#x2003;&#x8FD9;&#x91CC;&#x6211;&#x53EA;&#x8BB2;&#x8868;&#x73B0;&#x5F62;&#x5F0F;&#xFF0C;&#x5E95;&#x5C42;&#x539F;&#x7406;&#x6709;&#x65F6;&#x95F4;&#x5404;&#x4F4D;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x7814;&#x7A76;~</p><ol><li><p><strong>&#x5408;&#x5E76;&#x66F4;&#x65B0;&#x95EE;&#x9898;</strong>&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5185;&#x8FDB;&#x884C;&#x591A;&#x6B21;<code>setState</code>&#x65F6;&#xFF0C;&#x5B58;&#x5728;<strong>&#x8986;&#x76D6;&#x6027;</strong>&#x5BF9;&#x540C;&#x4E00;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x591A;&#x6B21;<code>setState</code>&#xFF0C;&#x53D6;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x548C;<strong>&#x5408;&#x6210;&#x6027;</strong>&#x591A;&#x6B21;<code>setState</code>&#x52A8;&#x4F5C;&#x4F1A;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x6B21;&#x3002;</p></li><li><p><strong>&#x6CE8;&#x610F;PureComponent&#x4F7F;&#x7528;&#x4E0B;&#x53EF;&#x80FD;&#x5E26;&#x6765;&#x7684;&#x95EE;&#x9898;</strong>&#xFF0C;&#x7531;&#x4E8E;<code>PureComponent</code>&#x5B9E;&#x73B0;&#x4E86;&#x6D45;&#x5C42;&#x62F7;&#x8D1D;&#x7248;&#x672C;&#x7684;<code>ShouldComponentUpdate</code>&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;<code>setState</code>&#x65F6;&#xFF0C;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x66F4;&#x65B0;&#xFF08;&#x76F8;&#x540C;&#x5F15;&#x7528;&#x5730;&#x5740;<code>return true</code>&#xFF09;&#x3002;&#x800C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>PureComponent</code>&#x65F6;&#x5F80;&#x5F80;&#x662F;&#x4E3A;&#x4E86;&#x5E26;&#x6765;&#x4E00;&#x4E9B;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x7684;&#xFF08;&#x907F;&#x514D;&#x7236;&#x7EC4;&#x4EF6;&#x53D1;&#x751F;<code>render</code>&#xFF0C;&#x5B50;&#x7EC4;&#x4EF6;<code>props</code>&#x672A;&#x6539;&#x53D8;&#x5374;&#x4E5F;&#x9020;&#x6210;&#x4E86;&#x989D;&#x5916;&#x7684;<code>rerender</code>&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x987B;&#x8981;&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x6F5C;&#x5728;&#x7684;&#x8BA4;&#x77E5;bug&#x3002;</p></li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PureComponent&#x4E0B;</span></span><br><span class="line"><span class="keyword">let</span> { arr, obj } = <span class="keyword">this</span>.state; <span class="comment">// arr = [1,2,3], obj = { name: &apos;Leo&apos; }</span></span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">5</span>;</span><br><span class="line">obj.name = <span class="string">&apos;Tony&apos;</span></span><br><span class="line"><span class="keyword">this</span>.setState({arr, obj}) <span class="comment">// arr = [5,2,3] obj = { name: &apos;Tony&apos; }</span></span><br><span class="line"><span class="comment">// &#x867D;&#x7136; arr&#x3001;obj &#x5185;&#x90E8;&#x5143;&#x7D20;&#x6539;&#x53D8;&#x4E86; &#x4F46;&#x7531;&#x4E8E;&#x5F53;&#x524D;&#x8FDB;&#x884C;&#x7684;&#x662F;&#x6D45;&#x5C42;&#x6BD4;&#x8F83; &#x5B83;&#x4EEC;&#x8FD8;&#x662F;&#x6307;&#x5411;&#x4E4B;&#x524D;&#x7684;&#x5F15;&#x7528; &#x5E76;&#x672A;&#x53D1;&#x751F;&#x6539;&#x53D8; &#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;render</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF1A;&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x91C7;&#x7528;<code>Object.assign({}, this.state.xxx)</code>&#x3001;<code>{...this.state.xxx}</code>&#x7684;&#x65B9;&#x5F0F;&#x3001;&#x6570;&#x7EC4;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x89E3;&#x6784;&#x6216;&#x62FC;&#x63A5;&#x91CD;&#x65B0;&#x8D4B;&#x503C;<code>[...this.state.xxx]</code>&#xFF0C;<code>[].concat()</code>&#x7684;&#x65B9;&#x5F0F;&#x3002;</p><ol start="3"><li><strong>&#x540C;&#x6B65;&#x8FD8;&#x662F;&#x5F02;&#x6B65;&#xFF0C;&#x5982;&#x4F55;&#x540C;&#x6B65;&#x83B7;&#x53D6;&#x66F4;&#x65B0;&#x540E;&#x7684;&#x6570;&#x636E;</strong>&#xFF0C;<code>setState</code>&#x7531;&#x4E8E;&#x5176;&#x5E95;&#x5C42;&#x7684;&#x5224;&#x65AD;&#x6267;&#x884C;&#x673A;&#x5236;&#xFF0C;&#x4F1A;&#x7ED9;&#x6211;&#x4EEC;&#x4E00;&#x79CD;&#x201C;&#x5F02;&#x6B65;&#x201D;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x4F46;&#x672C;&#x8D28;&#x4E0A;&#x5B83;&#x8FD8;&#x662F;&#x540C;&#x6B65;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x5728;&#x6211;&#x4EEC;&#x7684;<strong>&#x751F;&#x547D;&#x5468;&#x671F;</strong>&#x53CA;<strong>&#x5408;&#x6210;&#x4E8B;&#x4EF6;</strong>&#x4E2D;&#x8868;&#x73B0;&#x4E3A;&#x5F02;&#x6B65;&#xFF0C;&#x5728;<strong>&#x539F;&#x751F;&#x4E8B;&#x4EF6;(addEventListener)</strong>&#x53CA;<code>setTimeout</code>&#x4E2D;&#x8868;&#x73B0;&#x4E3A;&#x540C;&#x6B65;&#xFF08;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x7C7B;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x662F;&#x5F02;&#x6B65;&#x8868;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x4E3A;Event Loop&#x4E0B;&#x7684;&#x673A;&#x5236;React&#x65E0;&#x6CD5;&#x4ECB;&#x5165;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x751F;&#x547D;&#x5468;&#x671F;&#x548C;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x76F8;&#x5173;&#x90FD;&#x662F;React&#x81EA;&#x8EAB;&#x5B9A;&#x4E49;&#x5E76;&#x89C4;&#x5B9A;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x7684;&#xFF09;&#x3002;</li></ol><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x4E00;&#x79CD;&#x573A;&#x666F;&#x662F;&#x5148;&#x5BF9;<code>state</code>&#x5185;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF08;&#x5982;<code>fetch</code>&#x6211;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x7136;&#x540E;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x4FDD;&#x6301;&#x72B6;&#x6001;&#xFF09;&#xFF0C;&#x518D;&#x5BF9;&#x8BE5;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x3002;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x6309;&#x4E0B;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x80AF;&#x5B9A;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x62FF;&#x5230;&#x7684;&#x8FD8;&#x662F;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x503C;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state.number 0</span></span><br><span class="line"><span class="keyword">this</span>.setState({ <span class="attr">number</span>: <span class="number">1</span> })</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.state.number) <span class="comment">// 0</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5982;&#x679C;&#x8981;&#x540C;&#x6B65;&#x987A;&#x5E8F;&#x5730;&#x83B7;&#x53D6;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x4E86;&#x56DE;&#x8C03;&#x7684;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState({</span><br><span class="line">number: <span class="number">1</span></span><br><span class="line">}, () =&gt; <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.number))</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;<code>setState</code>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E5F;&#x652F;&#x6301;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x8FDB;&#x53BB;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x4E3A;&#x8981;&#x64CD;&#x4F5C;&#x7684;<code>state</code>&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x4E00;&#x4E9B;&#x9891;&#x7E41;&#x5BF9;<code>state</code>&#x53D8;&#x91CF;&#x64CD;&#x4F5C;&#x7684;&#x573A;&#x666F;&#x9047;&#x89C1;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> {</span><br><span class="line"><span class="keyword">return</span> {</span><br><span class="line">number&#xFF1A; prevState.number++,</span><br><span class="line">}</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6700;&#x540E;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x4E0D;&#x63A8;&#x8350;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5982;<code>setTimeout</code>&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line"><span class="keyword">this</span>.setState({</span><br><span class="line">number: <span class="number">1</span></span><br><span class="line">})</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.state.number) <span class="comment">// 1</span></span><br><span class="line">}, <span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure><h3 id="&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x4E0E;&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x95EE;&#x9898;"><a href="#&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x4E0E;&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x95EE;&#x9898;" class="headerlink" title="&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x4E0E;&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x95EE;&#x9898;"></a>&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x4E0E;&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x95EE;&#x9898;</h3><p>&#x2003;&#x2003;&#x5148;&#x8BF4;<strong>&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#xFF08;SyntheticEvent&#xFF09;</strong>&#xFF0C;&#x5BF9;Web&#x5E94;&#x7528;&#x6765;&#x8BF4;&#xFF0C;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x4E0D;&#x540C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x8FC7;&#x53BB;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x73AF;&#x5883;&#x505A;&#x517C;&#x5BB9;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x73B0;&#x5728;React&#x5185;&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x505A;&#x597D;&#x4E86;&#x7EDF;&#x4E00;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;React&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x5982;<code>onClick</code>&#x89E6;&#x53D1;&#x7684;&#x56DE;&#x8C03;&#x5DF2;&#x7ECF;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x539F;&#x751F;&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x4E86;&#x3002;&#x5C31;&#x62FF;&#x4E8B;&#x4EF6;&#x5192;&#x6CE1;&#x6765;&#x8BF4;&#xFF0C;&#x8FC7;&#x53BB;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;<code>return false</code>&#x963B;&#x65AD;&#x7EE7;&#x7EED;&#x5192;&#x6CE1;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;<code>v0.14</code>&#x7248;&#x672C;&#x5F00;&#x59CB;&#x5C31;&#x65E0;&#x6548;&#x4E86;&#xFF0C;&#x987B;&#x8981;&#x4E25;&#x683C;&#x6267;&#x884C;<code>e.stopPropagation()</code>&#x6216;&#x8005;<code>e.preventDefault()</code>&#x3002;&#x539F;&#x751F;&#x7684;&#x7ED1;&#x5B9A;&#x5373;&#x524D;&#x6587;&#x63D0;&#x5230;&#x7684;<code>addEventListener</code>&#x3002;</p><p>&#x2003;&#x2003;&#x518D;&#x8BF4;<strong>&#x51FD;&#x6570;&#x7ED1;&#x5B9A;&#x95EE;&#x9898;</strong>&#xFF0C;&#x5148;&#x770B;&#x5982;&#x4E0B;&#x51E0;&#x79CD;&#x7ED1;&#x5B9A;&#x65B9;&#x5F0F;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>{</span><br><span class="line"><span class="keyword">constructor</span>(props) {</span><br><span class="line"><span class="comment">// &#x6B64;&#x5904;&#x7684;super&#x662F;&#x4E3A;&#x4E86;&#x7EE7;&#x627F;&#x7236;&#x7EA7;&#x4F20;&#x4E0B;&#x6765;&#x7684;props &#x6267;&#x884C;&#x540E;&#x53EF;&#x4EE5;&#x5728;this&#x4E0A;&#x8BBF;&#x95EE;props</span></span><br><span class="line"><span class="keyword">super</span>(props)</span><br><span class="line"><span class="keyword">this</span>.state = {</span><br><span class="line">color: <span class="keyword">this</span>.props.color,</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.printOut = <span class="keyword">this</span>.printOut.bind(<span class="keyword">this</span>);</span><br><span class="line">}</span><br><span class="line">printOut() {</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.state.color);</span><br><span class="line">}</span><br><span class="line">arrowPrintOut = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.color)</span><br><span class="line">render() {</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;&gt;</span><br><span class="line">&lt;button onClick={<span class="keyword">this</span>.printOut}&gt;&#x7ED1;&#x5B9A;&#x4E00;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;button onClick={this.arrowPrintOut}&gt;&#x7ED1;&#x5B9A;&#x4E8C;&lt;/</span>button&gt;</span><br><span class="line">&lt;button onClick={() =&gt; <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.color)}&gt;&#x7ED1;&#x5B9A;&#x4E09;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>&gt;</span><br><span class="line">)</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5148;&#x8BF4;&#x7ED1;&#x5B9A;&#x4E00;&#x3001;&#x4E8C;&#xFF0C;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x63A8;&#x8350;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x76EE;&#x7684;&#x90FD;&#x662F;&#x62FF;<code>this</code>&#xFF0C;&#x4E2A;&#x4EBA;&#x503E;&#x5411;&#x4E8E;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#x7BAD;&#x5934;&#x7ED1;&#x5B9A;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x7ED1;&#x5B9A;&#x4E00;&#x6BCF;&#x4E2A;&#x90FD;&#x8981;&#x53BB;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5185;&#x624B;&#x52A8;<code>bind</code>&#x4E00;&#x6B21;&#xFF0C;&#x9EBB;&#x70E6;&#x2026;&#x7ED1;&#x5B9A;&#x4E09;&#x80FD;&#x4E0D;&#x7528;&#x5C31;&#x4E0D;&#x7528;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x76F4;&#x63A5;&#x5199;&#x5728;<code>render</code>&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x7BAD;&#x5934;&#x533F;&#x540D;&#x51FD;&#x6570;&#x6BCF;&#x4E00;&#x6B21;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x90FD;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x9020;&#x6210;&#x7684;&#x7ED3;&#x679C;&#x4E5F;&#x5F88;&#x660E;&#x663E;&#xFF1A;diff&#x7B97;&#x6CD5;&#x4F1A;&#x5224;&#x5B9A;&#x5176;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x5BF9;&#x5176;&#x518D;&#x66F4;&#x65B0;&#xFF0C;&#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;&#x3002;</p><p>&#x2003;&#x2003;&#x53E6;&#x5916;&#xFF0C;&#x5176;&#x5B9E;&#x5728;&#x7C7B;&#x4E2D;&#x76F4;&#x63A5;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x4F1A;&#x62A5;&#x4E0B;&#x56FE;&#x95EE;&#x9898;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/error.jpg" alt=""></p><p>&#x2003;&#x2003;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x5F0F;&#x58F0;&#x660E;&#x662F;&#x4F9D;&#x8D56;&#x4E86;<code>babel</code>&#x7684;<code>@babel/plugin-proposal-class-properties</code>&#x63D2;&#x4EF6;&#x3002;&#x901A;&#x8FC7;&#x8BE5;&#x63D2;&#x4EF6;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x88AB;&#x8F6C;&#x5316;&#x4E3A;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Demo = <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>{</span><br><span class="line"><span class="keyword">this</span>.printOut = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1111</span>)</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4EE5;&#x4E0A;&#x662F;&#x5728;<code>{ &quot;loose&quot;: true }</code>&#x914D;&#x7F6E;&#x4E0B;&#x7684;&#x8F6C;&#x5316;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x914D;&#x7F6E;&#x662F;<code>false</code>&#xFF0C;&#x4F1A;&#x91C7;&#x7528;<code>Object.defineProperty</code>&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5177;&#x4F53;&#x8BE6;&#x60C5;&#x53EF;&#x89C1;<a href="https://babeljs.io/docs/en/babel-plugin-proposal-class-properties" target="_blank" rel="noopener">babel&#x5B98;&#x65B9;</a>&#x3002;</p><h3 id="React&#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5192;&#x6CE1;&#x6355;&#x83B7;"><a href="#React&#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5192;&#x6CE1;&#x6355;&#x83B7;" class="headerlink" title="React&#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5192;&#x6CE1;&#x6355;&#x83B7;"></a>React&#x4E8B;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5192;&#x6CE1;&#x6355;&#x83B7;</h3><p>&#x2003;&#x2003;React&#x7684;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x5176;&#x5B9E;&#x662F;&#x7EDF;&#x4E00;&#x5192;&#x6CE1;&#x5230;<code>document</code>&#x4E0A;&#xFF0C;&#x518D;&#x901A;&#x8FC7;<code>dispatchEvent</code>&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;DOM&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x65F6;&#xFF0C;&#x5E94;&#x5F53;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x4F7F;&#x7528;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#xFF0C;&#x907F;&#x514D;&#x539F;&#x751F;&#x7ED1;&#x5B9A;&#x548C;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x6DF7;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x8F93;&#x51FA;&#x4F8B;&#x5B50;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() {</span><br><span class="line">  <span class="keyword">this</span>.parent.addEventListener(<span class="string">&apos;click&apos;</span>, (e) =&gt; {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;dom parent&apos;</span>);</span><br><span class="line">  })</span><br><span class="line">  <span class="keyword">this</span>.child.addEventListener(<span class="string">&apos;click&apos;</span>, (e) =&gt; {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;dom child&apos;</span>);</span><br><span class="line">  })</span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">&apos;click&apos;</span>, (e) =&gt; {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&apos;document&apos;</span>);</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">childClick = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;react child&apos;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">parentClick = <span class="function">(<span class="params">e</span>) =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&apos;react parent&apos;</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">render() {</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div onClick={<span class="keyword">this</span>.parentClick} ref={ref =&gt; <span class="keyword">this</span>.parent = ref}&gt;</span><br><span class="line">      &lt;div onClick={<span class="keyword">this</span>.childClick} ref={ref =&gt; <span class="keyword">this</span>.child = ref}&gt;</span><br><span class="line">        test</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5F53;&#x6211;&#x4EEC;&#x70B9;&#x51FB;test&#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x4F9D;&#x6B21;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p><ul><li>dom child</li><li>dom parent</li><li>react child</li><li>react parent</li><li>document</li></ul><h3 id="&#x751F;&#x547D;&#x5468;&#x671F;"><a href="#&#x751F;&#x547D;&#x5468;&#x671F;" class="headerlink" title="&#x751F;&#x547D;&#x5468;&#x671F;"></a>&#x751F;&#x547D;&#x5468;&#x671F;</h3><p>&#x2003;&#x2003;React&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8981;&#x5206;&#x7248;&#x672C;&#x770B;&#xFF0C;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x7248;&#x672C;&#x662F;v16.8.x&#xFF0C;&#x4EE5;&#x4E0B;&#x5BF9;&#x6BD4;v16.3&#x524D;&#x7684;&#x5468;&#x671F;&#x548C;v16.3&#x540E;&#x7684;&#x5468;&#x671F;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/oldLifecycle.jpg" alt=""></p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/lifecycle.jpg" alt=""></p><p>&#x2003;&#x2003;&#x5BF9;&#x6BD4;&#x770B;&#x6765;&#xFF0C;&#x5728;&#x672A;&#x6765;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#x6709;&#x610F;&#x79FB;&#x9664;&#x4EE5;&#x4E0B;&#x5468;&#x671F;&#x51FD;&#x6570;&#xFF08;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>UNSAFE</code>&#x524D;&#x7F00;&#x8FDB;&#x884C;&#x6807;&#x8BB0;&#x6765;&#x63D0;&#x793A;&#x81EA;&#x5DF1;&#x672A;&#x6765;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#x8282;&#x70B9;&#x6216;&#x8BB8;&#x4F1A;&#x88AB;&#x79FB;&#x9664;&#xFF09;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/unsafe.jpg" alt=""></p><p>&#x2003;&#x2003;&#x539F;&#x56E0;&#x5728;&#x4E8E;React&#x5728;v16&#x7248;&#x672C;&#x4E2D;&#x91C7;&#x7528;&#x4E86;&#x65B0;&#x7684;&#x5F02;&#x6B65;Fiber&#x67B6;&#x6784;&#xFF0C;&#x8FD9;&#x79CD;&#x67B6;&#x6784;&#x4E0B;&#xFF0C;React&#x7684;&#x6E32;&#x67D3;&#x662F;&#x5207;&#x7247;&#x5F0F;&#x7684;&#xFF0C;&#x6709;&#x70B9;&#x50CF;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#xFF0C;&#x5B83;&#x4F1A;&#x5C06;&#x6E32;&#x67D3;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;<code>render</code>&#x548C;<code>commit</code>&#x3002;&#x5728;<code>render</code>&#x9636;&#x6BB5;&#xFF0C;&#x5982;&#x679C;&#x9047;&#x5230;&#x7D27;&#x6025;&#x4EFB;&#x52A1;&#xFF0C;&#x4F1A;&#x5C06;&#x4E4B;&#x524D;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5168;&#x90E8;&#x820D;&#x5F03;&#xFF0C;&#x4F18;&#x5148;&#x6267;&#x884C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x91CD;&#x65B0;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x8981;&#x5728;<code>componentWillMount</code>&#x4E2D;&#x8FDB;&#x884C;AJAX&#x8BF7;&#x6C42;&#x7684;&#x539F;&#x56E0;&#xFF08;&#x53EF;&#x80FD;&#x4F1A;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x5947;&#x5947;&#x602A;&#x602A;&#x7684;&#x539F;&#x56E0;&#x89E6;&#x53D1;&#x591A;&#x6B21;&#xFF09;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x5728;SSR&#x65F6;&#xFF0C;<code>componentWillMount</code>&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x4E24;&#x6B21;&#xFF08;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x5404;&#x4E00;&#x6B21;&#xFF09;&#x3002;</p><p>&#x2003;&#x2003;&#x5B98;&#x65B9;&#x4E5F;&#x5EFA;&#x8BAE;&#x5728;<code>constructor</code>&#x5185;&#x521D;&#x59CB;&#x5316;<code>state</code>&#xFF0C;&#x800C;&#x4E0D;&#x8981;&#x5728;<code>componentWillMount</code>&#x5185;<code>setState</code>:</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/willMount.jpg" alt=""></p><p>&#x2003;&#x2003;&#x670D;&#x52A1;&#x7AEF;&#x8BF7;&#x6C42;&#x3001;&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x8BA2;&#x9605;&#x4E5F;&#x5E94;&#x5F53;&#x653E;&#x5728;<code>componentDidMount</code>&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x8BA2;&#x9605;&#x7C7B;&#x987B;&#x5728;<code>componentWillUnmount</code>&#x4E2D;&#x53D6;&#x6D88;&#x8BA2;&#x9605;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/didMount.jpg" alt=""></p><p>&#x2003;&#x2003;&#x4F60;&#x6216;&#x8BB8;&#x4F1A;&#x5BF9;&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x540E;&#x5728;<code>componentDidmount</code>&#x4E2D;<code>setState</code>&#x89E6;&#x53D1;&#x989D;&#x5916;&#x7684;<code>render</code>&#x62B1;&#x6709;&#x7591;&#x60D1;&#xFF0C;&#x6211;&#x5F53;&#x5E74;&#x4E5F;&#x6709;&#xFF0C;&#x4E0D;&#x8FC7;&#x4E0A;&#x56FE;&#x4E5F;&#x7ED9;&#x51FA;&#x4E86;&#x89E3;&#x7B54;&#xFF1A;&#x989D;&#x5916;&#x7684;<code>render</code>&#x4F1A;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x66F4;&#x65B0;&#x5C4F;&#x5E55;&#x524D;&#x8FDB;&#x884C;&#x89E6;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4FBF;&#x6709;&#x591A;&#x6B21;<code>render</code>&#x7528;&#x6237;&#x4E5F;&#x4E0D;&#x4F1A;&#x611F;&#x77E5;&#x3002;</p><h4 id="getDerivedStateFromProps"><a href="#getDerivedStateFromProps" class="headerlink" title="getDerivedStateFromProps"></a>getDerivedStateFromProps</h4><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x662F;&#x5728;v16.3&#x65F6;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x76EE;&#x7684;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x6E10;&#x8FDB;&#x5E9F;&#x5F03;&#x4E4B;&#x524D;<code>render</code>&#x524D;&#x7684;&#x4E00;&#x4E9B;Cycle&#xFF1A;</p><ul><li>componentWillReceiveProps</li><li>componentWillMount</li><li>componentWillUpdate</li></ul><p>&#x2003;&#x2003;&#x90A3;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5E72;&#x6389;&#x8FD9;&#x4E9B;Cycle&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x8FC7;&#x53BB;&#x6709;&#x592A;&#x591A;&#x4EBA;&#x4F1A;&#x5728;&#x8FD9;&#x4E9B;&#x5468;&#x671F;&#x91CC;&#x505A;&#x4E00;&#x4E9B;&#x5E26;&#x6709;&#x526F;&#x4F5C;&#x7528;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6BD4;&#x5982;&#x5178;&#x578B;&#x7684;&#x53D1;AJAX&#x8BF7;&#x6C42;&#x7B49;&#x7B49;&#x3002;</p><p>&#x2003;&#x2003;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;16.3&#x7248;&#x672C;&#x8FD9;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x53EA;&#x6709;&#x5728;&#x7236;&#x7EC4;&#x4EF6;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;&#x5F53;&#x524D;&#x5B50;&#x7EC4;&#x4EF6;&#x624D;&#x4F1A;&#x88AB;&#x8FDE;&#x5E26;&#x89E6;&#x53D1;&#xFF0C;&#x800C;&#x5B50;&#x7EC4;&#x4EF6;&#x672C;&#x8EAB;<code>setState</code>&#x5219;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x3002;&#x53E6;&#x5916;&#x4ECE;16.4&#x7248;&#x672C;&#x5F00;&#x59CB;&#x5DF2;&#x7ECF;&#x517C;&#x5BB9;&#x6210;&#x4E86;<code>setState</code>&#x548C;<code>forceUpdate</code>&#x90FD;&#x4F1A;&#x89E6;&#x53D1;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>{</span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromProps(nextProps, prevState) {</span><br><span class="line">    <span class="comment">// Called after a component is instantiated or before it receives new props.</span></span><br><span class="line">    <span class="comment">// Return an object to update state in response to prop changes.</span></span><br><span class="line">    <span class="comment">// Return null to indicate no change to state.</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  UNSAFE_componentWillMount() {</span><br><span class="line">    <span class="comment">// New name for componentWillMount()</span></span><br><span class="line">    <span class="comment">// Indicates that this method can be unsafe for async rendering.</span></span><br><span class="line">    <span class="comment">// Prefer componentDidMount() instead.</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  UNSAFE_componentWillUpdate(nextProps, nextState) {</span><br><span class="line">    <span class="comment">// New name for componentWillUpdate()</span></span><br><span class="line">    <span class="comment">// Indicates that this method can be unsafe for async rendering.</span></span><br><span class="line">    <span class="comment">// Prefer componentDidUpdate() instead.</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  UNSAFE_componentWillReceiveProps(nextProps) {</span><br><span class="line">    <span class="comment">// New name for componentWillReceiveProps()</span></span><br><span class="line">    <span class="comment">// Indicates that this method can be unsafe for async rendering.</span></span><br><span class="line">    <span class="comment">// Prefer static getDerivedStateFromProps() instead.</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6539;&#x52A8;Reason&#x53C2;&#x89C1;<a href="https://github.com/reactjs/rfcs/blob/master/text/0006-static-lifecycle-methods.md" target="_blank" rel="noopener">&#x5B98;&#x65B9;RFC</a>&#x3002;</p><h4 id="getSnapshotBeforeUpdate"><a href="#getSnapshotBeforeUpdate" class="headerlink" title="getSnapshotBeforeUpdate"></a>getSnapshotBeforeUpdate</h4><p>&#x2003;&#x2003;&#x5728;16.3&#x7248;&#x672C;&#x4E2D;&#x8FD8;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;<code>getSnapshotBeforeUpdate</code>&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x73A9;&#x610F;&#x6211;&#x4EEC;&#x57FA;&#x672C;&#x6CA1;&#x5565;&#x7528;&#x5230;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5176;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x5728;&#x4E0B;&#x4E00;&#x6B21;&#x66F4;&#x65B0;DOM&#x524D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4ECB;&#x5165;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#xFF08;<code>snapshot</code>&#xFF09;&#x7684;&#x65F6;&#x673A;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">getSnapshotBeforeUpdate(prevProps, prevState) {</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;#enter getSnapshotBeforeUpdate&apos;</span>);</span><br><span class="line"><span class="comment">// &#x8FD4;&#x56DE;&#x503C;&#x5373;&#x6211;&#x4EEC;&#x5728;componentDidUpdate&#x4E2D;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5FEB;&#x7167;&#x5C5E;&#x6027;</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">&apos;foo&apos;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">componentDidUpdate(prevProps, prevState, snapshot) {</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;#enter componentDidUpdate snapshot = &apos;</span>, snapshot);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="&#x53D7;&#x63A7;&#x4E0E;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;"><a href="#&#x53D7;&#x63A7;&#x4E0E;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;" class="headerlink" title="&#x53D7;&#x63A7;&#x4E0E;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;"></a>&#x53D7;&#x63A7;&#x4E0E;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;</h3><p>&#x2003;&#x2003;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x4E3A;&#x8868;&#x5355;&#x57DF;&#x7684;&#x503C;&#x662F;&#x5426;&#x53D7;<code>state</code>&#x63A7;&#x5236;&#x3002;</p><h2 id="&#x51B7;&#x95E8;API"><a href="#&#x51B7;&#x95E8;API" class="headerlink" title="&#x51B7;&#x95E8;API"></a>&#x51B7;&#x95E8;API</h2><p>&#x2003;&#x2003;&#x51B7;&#x95E8;&#x4F46;&#x4E0D;&#x4EE3;&#x8868;&#x6CA1;&#x7528;&#xFF0C;&#x4E0B;&#x9762;&#x63D0;&#x51E0;&#x4E2A;&#xFF1A;</p><ul><li>forceUpdate</li><li>createPortal</li><li>Children</li><li>cloneElement</li></ul><h3 id="forceUpdate"><a href="#forceUpdate" class="headerlink" title="forceUpdate"></a>forceUpdate</h3><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/forceUpdate.jpg" alt=""></p><p>&#x2003;&#x2003;<code>forceUpdate</code>&#x901A;&#x5E38;&#x5728;&#x6211;&#x4EEC;&#x4E0D;&#x4F9D;&#x8D56;&#x7EC4;&#x4EF6;&#x672C;&#x8EAB;<code>state</code>&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x65F6;&#x89E6;&#x53D1;&#xFF0C;&#x5373;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x8005;&#x672C;&#x8EAB;&#x786E;&#x8BA4;&#x4E00;&#x4E9B;&#x522B;&#x7684;&#x5C5E;&#x6027;&#x53D8;&#x5316;&#x987B;&#x8981;&#x5F3A;&#x5236;&#x89E6;&#x53D1;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x65F6;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4F1A;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x7684;SCU&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x6B63;&#x5E38;SCU&#x3002;</p><p>&#x2003;&#x2003;PS&#xFF1A;&#x5927;&#x591A;&#x6570;&#x573A;&#x666F;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x4E2A;API&#xFF0C;&#x6839;&#x636E;<code>props</code>&#x3001;<code>state</code>&#x63A7;&#x5236;&#x5373;&#x53EF;&#x3002;</p><h3 id="createPortal"><a href="#createPortal" class="headerlink" title="createPortal"></a>createPortal</h3><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/createPortal.jpg" alt=""></p><p>&#x2003;&#x2003;&#x76F8;&#x5F53;&#x4E8E;&#x63D0;&#x4F9B;&#x6211;&#x4EEC;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x5728;&#x6307;&#x5B9A;&#x7684;DOM&#x7ED3;&#x6784;&#x4E0B;&#x914D;&#x7F6E;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5C31;&#x662F;&#x5168;&#x5C40;&#x6A21;&#x6001;&#x6846;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/modal.jpg" alt=""></p><p>&#x2003;&#x2003;BTW&#xFF0C;&#x7531;&#x4E8E;&#x4F9D;&#x8D56;ReactDOM&#xFF0C;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;RN&#x7684;&#x573A;&#x666F;&#x662F;&#x65E0;&#x6CD5;&#x5E94;&#x7528;&#x7684;&#x3002;</p><h3 id="Children"><a href="#Children" class="headerlink" title="Children"></a>Children</h3><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;<code>props</code>&#x5BF9;&#x8C61;&#x4E2D;&#x8FD8;&#x6709;<code>children</code>&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x3002;&#x5B83;&#x80FD;&#x591F;&#x4ECE;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x51CF;&#x5C11;&#x6211;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x5185;&#x7684;&#x5D4C;&#x5957;&#x5C42;&#x7EA7;&#xFF0C;&#x5C31;&#x662F;<code>props.children</code>&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x9ED1;&#x76D2;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x5B83;&#x53EF;&#x80FD;&#x4F20;&#x5165;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x4E0D;&#x53EF;&#x77E5;&#x7684;&#xFF08;&#x8868;&#x8FBE;&#x5F0F;&#x3001;&#x5E03;&#x5C14;&#x3001;render function&#x7B49;&#x7B49;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x5176;&#x5B9E;&#x6CA1;&#x4EC0;&#x4E48;&#x6240;&#x8C13;&#x3002;&#x4F46;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x610F;&#x8BC6;&#x4EE5;&#x4E3A;&#x662F;&#x4E2A;&#x6570;&#x7EC4;&#x8FDB;&#x884C;<code>props.children.map</code>&#x8FD9;&#x6837;&#x7684;&#x8C03;&#x7528;&#x5C31;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x975E;Array&#x5C31;&#x76F4;&#x63A5;&#x62A5;TypeError&#x4E86;&#x3002;&#x90A3;&#x600E;&#x4E48;&#x5904;&#x7406;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x666F;&#x5462;&#xFF1F;</p><p>&#x2003;&#x2003;&#x5176;&#x5B9E;<code>React.Children</code>&#x6070;&#x597D;&#x5C31;&#x662F;&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x5904;&#x7406;<code>props.children</code>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x80FD;&#x529B;&#x7684;API&#xFF0C;&#x5176;&#x5177;&#x6709;&#x7684;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li>map</li><li>forEach</li><li>count</li><li>only</li><li>toArray</li></ul><h4 id="React-Children-map"><a href="#React-Children-map" class="headerlink" title="React.Children.map"></a>React.Children.map</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React.Children.map(props.children, child =&gt; {})</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;API&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x8981;&#x5904;&#x7406;&#x7684;&#x9ED1;&#x76D2;prop.children&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x5165;&#x53C2;&#x56DE;&#x8C03;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x904D;&#x5386;&#x7684;&#x5143;&#x7D20;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x5B9A;&#x5236;&#x5316;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p><p>&#x2003;&#x2003;&#x5E76;&#x4E14;&#x6839;&#x636E;&#x6E90;&#x7801;&#xFF0C;&#x5F53;<code>props.children</code>&#x4E3A;<code>null</code>&#x548C;<code>undefined</code>&#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x539F;&#x503C;&#x8FD4;&#x56DE;&#xFF0C;&#x5176;&#x4F59;&#x60C5;&#x666F;&#x5219;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</p><h4 id="React-Children-forEach"><a href="#React-Children-forEach" class="headerlink" title="React.Children.forEach"></a>React.Children.forEach</h4><p>&#x2003;&#x2003;&#x8DDF;<code>React.Children.map</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x8FED;&#x4EE3;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#x3002;<code>undefined</code>&#x548C;<code>null</code>&#x65F6;&#x7684;&#x5224;&#x65AD;&#x903B;&#x8F91;&#x540C;&#x4E0A;&#x3002;</p><h4 id="React-Children-count"><a href="#React-Children-count" class="headerlink" title="React.Children.count"></a>React.Children.count</h4><p>&#x2003;&#x2003;&#x8FD4;&#x56DE;&#x5176;&#x4E2D;&#x5185;&#x90E8;&#x5143;&#x7D20;&#x6570;&#xFF0C;&#x5176;&#x503C;&#x4E0E;&#x524D;&#x9762;&#x4E24;&#x4E2A;&#x8FED;&#x4EE3;&#x65B9;&#x6CD5;&#x7684;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#x6B21;&#x6570;&#x76F8;&#x7B49;&#x3002;</p><h4 id="React-Children-only"><a href="#React-Children-only" class="headerlink" title="React.Children.only"></a>React.Children.only</h4><p>&#x2003;&#x2003;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x4F20;&#x5165;&#x7684;<code>children</code>&#x662F;&#x5426;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>child</code>&#x3002;&#x6CE8;&#x610F;&#x63A5;&#x6536;&#x7C7B;&#x578B;&#x662F;<code>React element</code>&#x3002;&#x4E0D;&#x80FD;&#x62FF;<code>React.Children.map()</code>&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x518D;&#x53BB;&#x5224;&#x65AD;&#x662F;&#x51E0;&#x4E2A;<code>child</code>&#xFF0C;&#x56E0;&#x4E3A;&#x6B64;&#x65F6;&#x4F60;&#x62FF;&#x5230;&#x7684;&#x5DF2;&#x7136;&#x662F;&#x4E00;&#x4E2A;<code>Array</code>&#x7C7B;&#x578B;&#x3002;</p><h3 id="cloneElement"><a href="#cloneElement" class="headerlink" title="cloneElement"></a>cloneElement</h3><p>&#x2003;&#x2003;&#x524D;&#x6587;&#x4E2D;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>React.Children</code>&#x7684;&#x7C7B;&#x65B9;&#x6CD5;&#x5F97;&#x5230;&#x4E86;&#x8BBF;&#x95EE;&#x672C;&#x662F;&#x9ED1;&#x76D2;&#x7684;<code>props.children</code>&#x7684;&#x80FD;&#x529B;&#x3002;<code>React.cloneElement</code>&#x5219;&#x662F;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x5728;&#x64CD;&#x4F5C;<code>React element</code>&#x65F6;&#xFF0C;&#x8FDB;&#x884C;&#x6D45;&#x5C42;&#x7684;&#x65B0;<code>props merge</code>&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x65B0;<code>children</code>&#x5219;&#x4F1A;&#x66FF;&#x6362;&#x65E7;&#x7684;<code>children</code>&#x3002;&#x539F;element&#x7684;<code>key</code>&#x548C;<code>ref</code>&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#x3002;</p><p>&#x2003;&#x2003;&#x5148;&#x770B;&#x4E00;&#x4E0B;API&#x5B9A;&#x4E49;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">React.cloneElement(</span><br><span class="line">  element,</span><br><span class="line">  [props],</span><br><span class="line">  [...children]</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x7531;&#x4E8E;&#x662F;&#x62F7;&#x8D1D;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7EC4;&#x5408;&#x5143;&#x7D20;&#xFF0C;<code>React.cloneElement</code>&#x5904;&#x7406;<code>element</code>&#x65F6;&#x53EF;&#x4EE5;&#x5927;&#x81F4;&#x7406;&#x89E3;&#x6210;<code>&lt;element.type {...element.props} {...props}&gt;{children}&lt;/element.type&gt;</code>&#x3002;</p><p>&#x2003;&#x2003;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x6709;&#x516C;&#x5171;&#x65B9;&#x6CD5;&#x6216;&#x5C5E;&#x6027;&#x987B;&#x8981;&#x4F20;&#x9012;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x63D0;&#x524D;&#x5C06;&#x5176;&#x9700;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#x8FDB;&#x53BB;&#x3002;&#x4E3E;&#x4E2A;<a href="https://codesandbox.io/s/cloneele-0oxo6" target="_blank" rel="noopener">&#x4F8B;&#x5B50;</a>&#x3002;</p><h2 id="&#x6570;&#x636E;&#x7BA1;&#x7406;"><a href="#&#x6570;&#x636E;&#x7BA1;&#x7406;" class="headerlink" title="&#x6570;&#x636E;&#x7BA1;&#x7406;"></a>&#x6570;&#x636E;&#x7BA1;&#x7406;</h2><p>&#x2003;&#x2003;React&#x7684;&#x6570;&#x636E;&#x7BA1;&#x7406;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x9010;&#x6B65;&#x6F14;&#x5316;&#x3001;&#x8FDB;&#x6B65;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x65B9;&#x9762;&#xFF0C;&#x4ECE;<code>flux</code>&#x5230;<code>redux</code>&#xFF0C;&#x518D;&#x5230;&#x793E;&#x533A;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6210;&#x719F;&#x4E2D;&#x95F4;&#x4EF6;<code>thunk</code>&#x3001;<code>saga</code>&#x3001;<code>observable</code>&#x7B49;&#x8F85;&#x52A9;&#xFF1B;&#x89C2;&#x5BDF;&#x8005;&#x65B9;&#x9762;&#xFF0C;&#x6709;&#x7C7B;&#x4F3C;Vuex&#x7684;<code>mobx</code>&#x3002;</p><h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p>&#x2003;&#x2003;&#x8BB2;Redux&#x524D;&#xFF0C;&#x7B80;&#x8981;&#x63D0;&#x63D0;Flux&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x672C;&#x4EBA;&#x6CA1;&#x7528;&#x8FC7;&#xFF09;&#x3002;Flux&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5355;&#x9879;&#x6D41;&#x7684;&#x5148;&#x9A71;&#xFF0C;&#x672C;&#x8EAB;&#x5176;&#x5B9E;&#x4EC5;&#x662F;&#x4E00;&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;&#x8DDF;React&#x4E00;&#x6837;&#xFF0C;&#x7531;FB&#x63D0;&#x51FA;&#xFF09;&#xFF0C;&#x5373;&#x4FBF;&#x662F;&#x6E90;&#x7801;&#x4E2D;&#x4E5F;&#x4E3B;&#x8981;&#x662F;&#x5BF9;<code>dispatcher</code>&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x5B83;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;MVC&#x6DF7;&#x4E71;&#x7684;&#x6570;&#x636E;&#x6D41;&#x5411;&#x95EE;&#x9898;&#x3002;&#x5BF9;&#x4E8E;Flux&#x6765;&#x8BF4;&#xFF0C;&#x89C6;&#x56FE;&#x5C42;&#x552F;&#x4E00;&#x7684;&#x6570;&#x636E;&#x6E90;&#x90FD;&#x662F;&#x6765;&#x81EA;<code>store</code>,&#x901A;&#x8FC7;<code>dispatch action</code>&#x53BB;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x62C9;&#x53D6;&#x548C;&#x66F4;&#x65B0;&#xFF08;event&#x76D1;&#x542C;&#xFF09;&#x3002;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/flux.jpg" alt=""></p><p>&#x2003;&#x2003;&#x65E2;&#x7136;&#x662F;&#x4E00;&#x79CD;&#x601D;&#x60F3;&#xFF0C;&#x90A3;&#x5C31;&#x610F;&#x5473;&#x7740;&#x4E0D;&#x540C;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x4F1A;&#x6709;&#x5404;&#x79CD;&#x5B9E;&#x73B0;&#x548C;&#x7406;&#x89E3;&#xFF0C;&#x65E0;&#x6CD5;&#x7EDF;&#x4E00;&#x5728;&#x67D0;&#x4E9B;&#x573A;&#x666F;&#x7684;&#x5904;&#x7406;&#x65B9;&#x6848;&#x3002;&#x5916;&#x52A0;&#x5176;&#x4E2D;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x4E8E;&#x662F;&#x4E4E;&#x6709;&#x4E86;&#x540E;&#x7EED;&#x5728;&#x793E;&#x533A;&#x4E2D;&#x8131;&#x9896;&#x800C;&#x51FA;&#x7684;Redux&#x3002;</p><p>&#x2003;&#x2003;Redux&#x540C;&#x6837;&#x662F;&#x7C7B;Flux&#x8BBE;&#x8BA1;&#xFF0C;&#x5B83;&#x7B80;&#x5316;&#x4E86;Flux&#x7684;&#x4E00;&#x4E9B;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x53EB;<code>redux</code>&#x7684;npm&#x5305;&#xFF0C;&#x5185;&#x7F6E;&#x4E86;&#x4E0D;&#x5C11;API&#x8BA9;&#x6211;&#x4EEC;&#x5EFA;&#x7ACB;<code>store</code>&#xFF0C;&#x6784;&#x5EFA;<code>action</code>&#x3001;&#x7EC4;&#x7EC7;<code>reducer</code>&#x7B49;&#x3002;&#x5F53;&#x7136;&#x5B8C;&#x6574;&#x7684;&#x6570;&#x636E;&#x7BA1;&#x7406;&#xFF0C;&#x5149;&#x6709;<code>redux</code>&#x5E93;&#x662F;&#x4E0D;&#x591F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x628A;<code>store</code>&#x7406;&#x89E3;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#x5C06;&#x6570;&#x636E;&#x4E0E;&#x6211;&#x4EEC;&#x7684;React&#x5E94;&#x7528;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x90A3;&#x5C31;&#x662F;<code>react-redux</code>&#xFF0C;&#x5B83;&#x662F;&#x7531;Redux&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;React&#x7ED1;&#x5B9A;&#xFF0C;&#x53EF;&#x4EE5;&#x653E;&#x5FC3;&#x98DF;&#x7528;&#x3002;</p><p>&#x2003;&#x2003;&#x5148;&#x804A;&#x804A;&#x51E0;&#x4E2A;<code>redux</code>&#x7684;&#x6838;&#x5FC3;API&#xFF1A;<code>createStore</code>&#x3001;<code>combineReducers</code>&#x3001;<code>applyMiddleware</code>&#x3001;<code>compose</code>&#x3001;<code>bindActionCreators</code>&#x3002;</p><h4 id="createStore"><a href="#createStore" class="headerlink" title="createStore"></a>createStore</h4><p>&#x2003;&#x2003;&#x901A;&#x8FC7;&#x9605;&#x8BFB;&#x6E90;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;<code>createStore</code>&#x63A5;&#x6536;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x5982;<code>dispatch</code>&#x3001;<code>getState</code>&#x7B49;&#x5173;&#x952E;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x83B7;&#x53D6;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) </span>{</span><br><span class="line"><span class="comment">// &#x7565;</span></span><br><span class="line"><span class="comment">// return {</span></span><br><span class="line"><span class="comment">// dispatch, // &#x53BB;&#x6539;&#x53D8;state&#x7684;&#x65B9;&#x6CD5; &#x6D3E;&#x53D1; action</span></span><br><span class="line"><span class="comment">// subscribe, // &#x76D1;&#x542C;state&#x53D8;&#x5316; &#x7136;&#x540E;&#x89E6;&#x53D1;&#x56DE;&#x8C03;</span></span><br><span class="line"><span class="comment">// getState, // &#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;createStore&#x7684;&#x5185;&#x90E8;&#x53D8;&#x91CF;currentState &#x4E5F;&#x5C31;&#x662F;&#x5168;&#x5C40;&#x90A3;&#x4E2A;&#x5927;state</span></span><br><span class="line"><span class="comment">// replaceReducer, // &#x4F20;&#x5165;&#x65B0;&#x7684;reducer &#x6765;&#x66FF;&#x6362;&#x4E4B;&#x524D;&#x5185;&#x90E8;&#x7684;reducer &#x53EF;&#x80FD;&#x573A;&#x666F;&#x662F;&#x5728;&#x4EE3;&#x7801;&#x62C6;&#x5206;&#x3001;redux&#x7684;&#x70ED;&#x52A0;&#x8F7D;&#xFF1F;</span></span><br><span class="line"><span class="comment">// [$$observable]: observable // symbol&#x5C5E;&#x6027; &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;observable&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x63A5;&#x7740;&#x6211;&#x4EEC;&#x4E00;&#x4E2A;&#x4E2A;&#x5206;&#x6790;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;<code>reducer</code>&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;<code>combineReducers</code>&#x7EC4;&#x5408;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;reducer&#x4F20;&#x5165;&#xFF0C;&#x90A3;<code>combineReducers</code>&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p><h4 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>) </span>{</span><br><span class="line"><span class="comment">//  &#x7565;&#x53BB;&#x4E00;&#x4E9B;</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state = {}, action</span>) </span>{</span><br><span class="line"><span class="keyword">const</span> nextState = {}</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.length; i++) {</span><br><span class="line"><span class="keyword">const</span> key = finalReducerKeys[i]</span><br><span class="line"><span class="keyword">const</span> reducer = finalReducers[key]</span><br><span class="line"><span class="keyword">const</span> previousStateForKey = state[key]</span><br><span class="line"><span class="keyword">const</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> nextStateForKey === <span class="string">&apos;undefined&apos;</span>) {</span><br><span class="line"><span class="keyword">const</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(errorMessage)</span><br><span class="line">}</span><br><span class="line">nextState[key] = nextStateForKey</span><br><span class="line">hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> hasChanged ? nextState : state</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* &#x6BD4;&#x5982;&#x4F20;&#x5165;&#x7684;&#x5B50;reducer&#x51FD;&#x6570;&#x662F;  </span></span><br><span class="line"><span class="comment">* function childA(state = 0, action) {</span></span><br><span class="line"><span class="comment">*   switch (action.type) {</span></span><br><span class="line"><span class="comment">*case &apos;INCREMENT&apos;:</span></span><br><span class="line"><span class="comment">*return state + 1</span></span><br><span class="line"><span class="comment">*case &apos;DECREMENT&apos;:</span></span><br><span class="line"><span class="comment">*return state - 1</span></span><br><span class="line"><span class="comment">*default:</span></span><br><span class="line"><span class="comment">*return state</span></span><br><span class="line"><span class="comment">* }</span></span><br><span class="line"><span class="comment">* }</span></span><br><span class="line"><span class="comment">* &#x90A3;&#x521D;&#x59CB;&#x60C5;&#x51B5;&#x4E0B;&#x7684;store.getState() // { childA: 0 }</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;<code>combineReducers</code>&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x91CC;&#x9762;&#x7684;<code>key</code>&#x662F;&#x6BCF;&#x4E00;&#x4E2A;&#x5C0F;<code>reducer</code>&#x6587;&#x4EF6;&#x6216;&#x51FD;&#x6570;&#x5BFC;&#x51FA;&#x7684;namespace&#xFF0C;value&#x5219;&#x662F;&#x4E0E;&#x5176;&#x5BF9;&#x5E94;&#x7684;reducer&#x51FD;&#x6570;&#x5B9E;&#x4F53;&#x3002;&#x7136;&#x540E;&#x5B83;&#x4F1A;&#x5C06;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;reducer&#x51FD;&#x6570;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A;reducer&#x51FD;&#x6570;&#x4E2D;&#x3002;&#x5B83;&#x4F1A;&#x8C03;&#x7528;&#x6BCF;&#x4E00;&#x4E2A;&#x5408;&#x5E76;&#x7684;&#x5B50;reducer&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5C06;&#x4ED6;&#x4EEC;&#x7684;&#x7ED3;&#x679C;&#x653E;&#x5165;&#x4E00;&#x4E2A;state&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x95ED;&#x5305;&#x4F7F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x50CF;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x7684;&#x5B50;reducer&#x4E00;&#x6837;&#x64CD;&#x4F5C;&#x8FD9;&#x4E2A;&#x5927;reducer&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x53EA;&#x8981;&#x6CE8;&#x610F;&#x5BFC;&#x5165;&#x7684;&#x5B50;<code>reducer</code>&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5373;<code>key</code>&#x503C;&#x4FBF;&#x53EF;&#x3002;</p><p>&#x2003;&#x2003;<code>preloadedState</code>&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x7684;&#x521D;&#x59CB;<code>state</code>&#xFF0C;&#x5F53;&#x7136;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x91CC;&#x63CF;&#x8FF0;&#x8FD8;&#x53EF;&#x4EE5;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x6CE8;&#x5165;&#x8BE5;&#x503C;or&#x6062;&#x590D;&#x5386;&#x53F2;&#x7528;&#x6237;&#x7684;session&#x8BB0;&#x5F55;&#xFF0C;&#x4E0D;&#x8FC7;&#x6CA1;&#x5B9E;&#x8DF5;&#x8FC7;&#xFF0C;&#x5C31;&#x4E0D;&#x5EF6;&#x5C55;&#x4E86;&#x2026;</p><p>&#x2003;&#x2003;&#x6700;&#x540E;&#x7684;&#x5165;&#x53C2;<code>enhancer</code>&#x6BD4;&#x8F83;&#x5173;&#x952E;&#xFF0C;&#x5B57;&#x9762;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x7528;&#x6765;&#x589E;&#x5F3A;&#x529F;&#x80FD;&#x7684;&#xFF0C;&#x5148;&#x770B;&#x770B;&#x90E8;&#x5206;&#x6E90;&#x7801;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">&apos;function&apos;</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">&apos;undefined&apos;</span>) {</span><br><span class="line">    enhancer = preloadedState</span><br><span class="line">    preloadedState = <span class="literal">undefined</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">&apos;undefined&apos;</span>) {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&apos;Expected the enhancer to be a function.&apos;</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5176;&#x5B9E;<code>createStore</code>&#x53EF;&#x4EE5;&#x53EA;&#x63A5;&#x6536;2&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5F53;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521D;&#x59CB;&#x5316;<code>state</code>&#x4E3A;<code>undefined</code>&#xFF0C;&#x6240;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E9B;<code>createStore</code>&#x53EA;&#x4F20;&#x4E86;2&#x4E2A;&#x53C2;&#x6570;&#x4E0D;&#x8981;&#x89C9;&#x5F97;&#x5947;&#x602A;&#x3002;</p><h4 id="applyMiddleware"><a href="#applyMiddleware" class="headerlink" title="applyMiddleware"></a>applyMiddleware</h4><p>&#x2003;&#x2003;&#x5173;&#x4E8E;<code>applyMiddleware</code>&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x7EC4;&#x5408;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;API&#xFF0C;&#x793E;&#x533A;&#x4E2D;&#x4E5F;&#x6709;&#x8BF8;&#x591A;&#x8F85;&#x52A9;&#x7684;&#x5E93;&#x5982;<code>redux-logger</code>&#xFF08;&#x6D3E;&#x53D1;<code>action</code>&#x65F6;&#xFF0C;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x6253;&#x5370;&#xFF09;&#x3001;<code>redux-thunk</code>&#xFF08;&#x652F;&#x6301;<code>function</code>&#x7C7B;&#x578B;&#x7684;<code>action</code>&#xFF09;&#x3001;<code>redux-saga</code>&#xFF08;&#x91C7;&#x7528;<code>Generator</code>&#x8BED;&#x6CD5;&#x7684;&#x5F02;&#x6B65;&#x6D41;&#x7A0B;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF0C;&#x907F;&#x514D;&#x4E86;callback hell&#xFF09;&#x7B49;&#x7B49;&#x3002;</p><p>&#x2003;&#x2003;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x770B;&#x6E90;&#x7801;&#xFF0C;&#x518D;&#x770B;&#x770B;&#x901A;&#x5E38;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7684;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...funcs</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) {</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">createStore</span>) =&gt;</span> (reducer, preloadedState, enhancer) =&gt; {</span><br><span class="line">    <span class="keyword">const</span> store = createStore(reducer, preloadedState, enhancer)</span><br><span class="line">    <span class="keyword">let</span> dispatch = store.dispatch</span><br><span class="line">    <span class="keyword">let</span> chain = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> middlewareAPI = {</span><br><span class="line">      getState: store.getState,</span><br><span class="line">      dispatch: <span class="function">(<span class="params">action</span>) =&gt;</span> dispatch(action)</span><br><span class="line">    }</span><br><span class="line">    chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class="line">    dispatch = compose(...chain)(store.dispatch)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      ...store,</span><br><span class="line">      dispatch</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4ECE;&#x6E90;&#x7801;&#x4E2D;&#x5206;&#x6790;&#xFF0C;&#x53EF;&#x4EE5;&#x6BD4;&#x8F83;&#x76F4;&#x89C2;&#x5730;&#x7406;&#x89E3;API&#x610F;&#x56FE;&#xFF0C;&#x5982;<code>redux</code>&#x4E2D;&#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;<code>compose</code>&#x662F;&#x4E3A;&#x4E86;&#x4F18;&#x96C5;&#x5730;&#x8FDB;&#x884C;&#x9AD8;&#x9636;&#x51FD;&#x6570;&#x5D4C;&#x5957;&#xFF1B;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709;&#x9AD8;&#x9636;&#x51FD;&#x6570;A&#x3001;B&#x3001;C &#xFF0C;&#x8981;&#x5B9E;&#x73B0;A(B(C(&#x2026;args)))&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;<code>compose</code>&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4E0D;&#x65AD;&#x5730;&#x5C06;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x8D4B;&#x503C;&#xFF0C;&#x8C03;&#x7528;&#x3002;&#x800C;&#x4F7F;&#x7528;<code>compose</code>&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x6B21;&#x8D4B;&#x503C;<code>let HOC = compose(A, B, C)</code>;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;<code>HOC(...args)</code>&#x5373;&#x53EF;&#x3002;</p><p>&#x2003;&#x2003;&#x800C;<code>applyMiddleware</code>&#x7684;&#x4F5C;&#x7528;&#x4E5F;&#x5F88;&#x81EA;&#x7136;&#x5F97;&#x5230;&#x662F;&#x7528;&#x6765;&#x589E;&#x5F3A;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x7684;<code>store</code>&#x5BF9;&#x8C61;&#x7684;<code>dispatch</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x589E;&#x52A0;&#x8BC6;&#x522B;<code>function</code>&#x7C7B;&#x578B;&#x7684;<code>action</code>&#x3001;&#x652F;&#x6301;Generator&#x5199;&#x6CD5;&#xFF0C;&#x8F93;&#x51FA;&#x65E5;&#x5FD7;&#x7B49;&#x7B49;&#x3002;</p><p>&#x2003;&#x2003;&#x524D;&#x6587;&#x6E90;&#x7801;&#x4E2D;&#x7684;<code>middlewareAPI</code>&#x5185;&#x7684;&#x5C5E;&#x6027;&#x521D;&#x89C1;&#x8005;&#x53EF;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x8FF7;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x4E00;&#x4E0B;<code>redux-thunk</code>&#x7684;&#x6E90;&#x7801;&#x5C31;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x4E86;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createThunkMiddleware</span>(<span class="params">extraArgument</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">{ dispatch, getState }</span>) =&gt;</span> next =&gt; <span class="function"><span class="params">action</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">      <span class="keyword">return</span> action(dispatch, getState, extraArgument);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> next(action);</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> thunk = createThunkMiddleware();</span><br><span class="line">thunk.withExtraArgument = createThunkMiddleware;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> thunk;</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x77E5;&#x4E00;&#x822C;middleWare&#x7684;&#x5185;&#x90E8;&#x6784;&#x9020;&#x90FD;&#x9075;&#x4ECE;&#x4E00;&#x4E2A;<code>({ getState, dispatch }) =&gt; next =&gt; action =&gt; {...}</code>&#x7684;&#x8303;&#x5F0F;&#xFF0C;&#x5E76;&#x4E14;&#x5BFC;&#x51FA;&#x7684;&#x65F6;&#x5019;&#x5DF2;&#x7ECF;&#x88AB;&#x8C03;&#x7528;&#x4E86;&#x4E00;&#x6B21;&#xFF0C;&#x5373;&#x8FD4;&#x56DE;&#x4E86;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x63A5;&#x6536;<code>getState</code>&#x548C;<code>dispatch</code>&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5F88;&#x597D;&#x89E3;&#x91CA;<code>middlewareAPI</code>&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E86;&#x3002;&#x7EFC;&#x5408;<code>applyMiddleware</code>&#x8C03;&#x7528;&#x6613;&#x5F97;&#x5176;&#x4E2D;&#x7684;<code>next</code>&#x65B9;&#x6CD5;&#x5373;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x7684;<code>store.dispatch</code>&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x822C;&#x5E94;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;&#x652F;&#x6301;<code>function</code>&#x7C7B;&#x578B;&#x7684;<code>action</code>&#x6D3E;&#x53D1;&#x3002;</p><h4 id="bindActionCreators"><a href="#bindActionCreators" class="headerlink" title="bindActionCreators"></a>bindActionCreators</h4><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5E2E;&#x6211;&#x4EEC;&#x5C06;<code>action</code>&#x76F4;&#x63A5;&#x8FDB;&#x884C;<code>store.dispatch</code>&#x5305;&#x88F9;&#xFF0C;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;&#x5176;&#x5B9E;&#x5C06;<code>dispatch</code>&#x6CE8;&#x5165;&#x540E;&#x518D;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x903B;&#x8F91;&#x53BB;&#x505A;&#x4E5F;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#xFF0C;&#x770B;&#x4E2A;&#x4EBA;&#x559C;&#x597D;~</p><p>&#x2003;&#x2003;&#x4E0B;&#x9762;&#x770B;&#x770B;&#x8FD9;&#x90E8;&#x5206;&#x6E90;&#x7801;&#x4E2D;&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x5904;&#x7406;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5185;&#x90E8;&#x5E2E;&#x6211;&#x4EEC;&#x8FDB;&#x884C;dispatch&#x8C03;&#x7528;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> dispatch(actionCreator.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>) </span>{</span><br><span class="line">  <span class="comment">// &#x5982;&#x679C;&#x4F20;&#x5165;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5C01;&#x88C5;&#x540E;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x6CD5;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators === <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">    <span class="keyword">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x4E3A;&#x7A7A; &#x6216; &#x4E0D;&#x662F;&#x5BF9;&#x8C61; &#x629B;&#x51FA;&#x9519;&#x8BEF;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators !== <span class="string">&apos;object&apos;</span> || actionCreators === <span class="literal">null</span>) {</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">      <span class="string">`bindActionCreators expected an object or a function, instead received <span class="subst">${</span></span></span><br><span class="line"><span class="string"><span class="subst">        actionCreators === <span class="literal">null</span> ? <span class="string">&apos;null&apos;</span> : <span class="keyword">typeof</span> actionCreators</span></span></span><br><span class="line"><span class="string"><span class="subst">      }</span>. `</span> +</span><br><span class="line">        <span class="string">`Did you write &quot;import ActionCreators from&quot; instead of &quot;import * as ActionCreators from&quot;?`</span></span><br><span class="line">    )</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x904D;&#x5386;&#x5BF9;&#x8C61;&#x7684;key&#xFF0C;&#x5E76;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;key&#x5BF9;&#x5E94;&#x7684;actionCreator&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x6700;&#x540E;&#x96C6;&#x4E2D;&#x5728;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0B;&#x8FD4;&#x56DE;</span></span><br><span class="line">  <span class="keyword">const</span> boundActionCreators = {}</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> actionCreators) {</span><br><span class="line">    <span class="keyword">const</span> actionCreator = actionCreators[key]</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreator === <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> boundActionCreators</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6839;&#x636E;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x8FD9;&#x4E2A;API&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x5728;&#x5C06;&#x5305;&#x88F9;&#x7684;&#x591A;&#x4E2A;<code>actionCreator</code>&#x4F20;&#x5165;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#x65B9;&#x4FBF;&#x8C03;&#x7528;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TodoActionCreators.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    type: <span class="string">&apos;ADD_TODO&apos;</span>,</span><br><span class="line">    text</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeTodo</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    type: <span class="string">&apos;REMOVE_TODO&apos;</span>,</span><br><span class="line">    id</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// SomeComponent.js</span></span><br><span class="line"><span class="keyword">import</span> { Component } <span class="keyword">from</span> <span class="string">&apos;react&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { bindActionCreators } <span class="keyword">from</span> <span class="string">&apos;redux&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { connect } <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> TodoActionCreators <span class="keyword">from</span> <span class="string">&apos;./TodoActionCreators&apos;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(TodoActionCreators);</span><br><span class="line"><span class="comment">// {</span></span><br><span class="line"><span class="comment">//   addTodo: Function,</span></span><br><span class="line"><span class="comment">//   removeTodo: Function</span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoListContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>{</span><br><span class="line">  <span class="keyword">constructor</span>(props) { </span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> {dispatch} = props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684; bindActionCreators &#x7684;&#x4F7F;&#x7528;&#x793A;&#x4F8B;&#xFF1A;</span></span><br><span class="line">    <span class="comment">// &#x4F60;&#x60F3;&#x8BA9;&#x4F60;&#x7684;&#x5B50;&#x7EC4;&#x4EF6;&#x5B8C;&#x5168;&#x4E0D;&#x611F;&#x77E5; Redux &#x7684;&#x5B58;&#x5728;&#x3002;</span></span><br><span class="line">    <span class="comment">// &#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x5BF9; action creator &#x7ED1;&#x5B9A; dispatch &#x65B9;&#x6CD5;&#xFF0C;</span></span><br><span class="line">    <span class="comment">// &#x4EE5;&#x4FBF;&#x7A0D;&#x540E;&#x5C06;&#x5176;&#x4F20;&#x7ED9;&#x5B50;&#x7EC4;&#x4EF6;&#x3002;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.boundActionCreators = bindActionCreators(TodoActionCreators, dispatch);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.boundActionCreators);</span><br><span class="line">    <span class="comment">// {</span></span><br><span class="line">    <span class="comment">//   addTodo: Function,</span></span><br><span class="line">    <span class="comment">//   removeTodo: Function</span></span><br><span class="line">    <span class="comment">// }</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  componentDidMount() {</span><br><span class="line">    <span class="comment">// &#x7531; react-redux &#x6CE8;&#x5165;&#x7684; dispatch&#xFF1A;</span></span><br><span class="line">    <span class="keyword">let</span> { dispatch } = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x6837;&#x662F;&#x884C;&#x4E0D;&#x901A;&#x7684;&#xFF1A;</span></span><br><span class="line">    <span class="comment">// TodoActionCreators.addTodo(&apos;Use Redux&apos;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F60;&#x53EA;&#x662F;&#x8C03;&#x7528;&#x4E86;&#x521B;&#x5EFA; action &#x7684;&#x65B9;&#x6CD5;&#x3002;</span></span><br><span class="line">    <span class="comment">// &#x4F60;&#x5FC5;&#x987B;&#x8981;&#x540C;&#x65F6; dispatch action&#x3002;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8FD9;&#x6837;&#x505A;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF1A;</span></span><br><span class="line">    <span class="keyword">let</span> action = TodoActionCreators.addTodo(<span class="string">&apos;Use Redux&apos;</span>);</span><br><span class="line">    dispatch(action);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  render() {</span><br><span class="line">    <span class="comment">// &#x7531; react-redux &#x6CE8;&#x5165;&#x7684; todos&#xFF1A;</span></span><br><span class="line">    <span class="keyword">let</span> { todos } = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">TodoList</span> <span class="attr">todos</span>=<span class="string">{todos}</span> {<span class="attr">...this.boundActionCreators</span>} /&gt;</span>;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    // &#x53E6;&#x4E00;&#x66FF;&#x4EE3; bindActionCreators &#x7684;&#x505A;&#x6CD5;&#x662F;</span></span><br><span class="line"><span class="xml">    // &#x76F4;&#x63A5;&#x628A; dispatch &#x51FD;&#x6570;&#x5F53;&#x4F5C; prop &#x4F20;&#x9012;&#x7ED9;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F46;&#x8FD9;&#x65F6;&#x4F60;&#x7684;&#x5B50;&#x7EC4;&#x4EF6;&#x9700;&#x8981;</span></span><br><span class="line"><span class="xml">    // &#x5F15;&#x5165; action creator &#x5E76;&#x4E14;&#x611F;&#x77E5;&#x5B83;&#x4EEC;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line">    // return &lt;TodoList todos={todos} dispatch={dispatch} /&gt;;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">  state =&gt; ({ todos: state.todos })</span><br><span class="line">)(TodoListContainer);</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5F53;&#x7136;&#x5982;&#x679C;&#x53EA;&#x662F;&#x60F3;&#x5BF9;&#x5355;&#x4E00;&#x7684;<code>action</code>&#x5C01;&#x88C5;&#x5E76;&#x4E14;&#x4E0D;&#x6D89;&#x53CA;&#x5F80;&#x5B50;&#x7EC4;&#x4EF6;&#x4F20;&#x65B9;&#x6CD5;&#xFF0C;&#x540E;&#x6587;<code>react-redux</code>&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x5F0F;&#x4F1A;&#x66F4;&#x4E3A;&#x7B80;&#x4FBF;&#x3002;</p><h3 id="React-Redux"><a href="#React-Redux" class="headerlink" title="React Redux"></a>React Redux</h3><p>&#x2003;&#x2003;&#x524D;&#x6587;&#x4E2D;&#x8BB2;&#x89E3;&#x4E86;<code>redux</code>&#x7684;&#x6BD4;&#x8F83;&#x5173;&#x952E;&#x7684;&#x4E00;&#x4E9B;API&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x63D0;&#x5230;&#x4E86;<code>redux</code>&#x4EC5;&#x662F;&#x6784;&#x5EFA;<code>store</code>&#x7684;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x6709;&#x4E00;&#x5EA7;&#x6865;&#x6881;&#x5C06;&#x5176;&#x4E0E;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;<code>react-redux</code>&#x3002;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x4E86;&#x6E05;&#x6670;&#x7684;&#x4F7F;&#x7528;DEMO&#xFF0C;&#x6838;&#x5FC3;&#x662F;&#x4E00;&#x4E2A;&#x63D0;&#x4F9B;&#x5168;&#x5C40;<code>store</code>&#x7684;<code>Provider</code>&#x7EC4;&#x4EF6;&#x53CA;&#x4E00;&#x4E2A;&#x5173;&#x8054;<code>store</code>&#x7684;<code>state</code>&#x5185;&#x5BB9;&#x5230;&#x7EC4;&#x4EF6;&#x7684;<code>connect</code>API&#xFF1A;</p><h4 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&apos;react&apos;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&apos;react-dom&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> { Provider } <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&apos;./store&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&apos;./App&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootElement = <span class="built_in">document</span>.getElementById(<span class="string">&apos;root&apos;</span>)</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store={store}&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">  rootElement</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></tbody></table></figure><h4 id="connect"><a href="#connect" class="headerlink" title="connect()"></a>connect()</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { connect } <span class="keyword">from</span> <span class="string">&apos;react-redux&apos;</span></span><br><span class="line"><span class="keyword">import</span> { increment, decrement, reset } <span class="keyword">from</span> <span class="string">&apos;./actionCreators&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const Counter = ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state <span class="regexp">/*, ownProps*/</span></span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    counter: state.counter</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = { increment, decrement, reset }</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  mapDispatchToProps</span><br><span class="line">)(Counter)</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>Provider</code>&#x7EC4;&#x4EF6;&#x662F;&#x5D4C;&#x5957;&#x5728;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x6700;&#x5916;&#x5C42;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x6784;&#x8981;&#x8BA9;&#x5168;&#x5C40;&#x7EC4;&#x4EF6;&#x53BB;&#x83B7;&#x53D6;&#x5176;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x5F88;&#x81EA;&#x7136;&#x80FD;&#x591F;&#x8054;&#x60F3;&#x5230;React&#x7684;<code>context</code>&#xFF0C;&#x4ECE;&#x6E90;&#x7801;&#x4E2D;&#x5206;&#x6790;&#xFF0C;&#x65B0;&#x7248;&#x672C;<code>react-redux</code>&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;HOOKS&#x8BED;&#x6CD5;&#x91CD;&#x6784;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x539F;&#x7406;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;<code>ReactReduxContext</code>&#x5373;&#x901A;&#x8FC7;<code>React.createContext(null)</code>&#x5BFC;&#x51FA;&#x7684;&#x521D;&#x59CB;<code>context</code>&#xFF0C;<code>useMemo</code>&#x7528;&#x4EE5;&#x6784;&#x9020;&#x4E24;&#x4E2A;&#x76D1;&#x542C;<code>store</code>&#x53D8;&#x5316;&#x89E6;&#x53D1;&#x66F4;&#x65B0;&#x7684;&#x503C;&#xFF0C;<code>contextValue</code>&#x53CA;<code>previousState</code>&#x3002;<code>useEffect</code>&#x5728;&#x4E24;&#x503C;&#x53D1;&#x751F;&#x53D8;&#x52A8;&#x65F6;&#x8FDB;&#x884C;&#x4E8B;&#x4EF6;&#x8BA2;&#x9605;&#xFF0C;&#x5982;&#x679C;&#x72B6;&#x6001;&#x6539;&#x52A8;&#x4F1A;&#x901A;&#x77E5;&#x5D4C;&#x5957;&#x7684;&#x5173;&#x8054;&#x5B50;&#x7EC4;&#x4EF6;&#x3002;&#x6700;&#x7EC8;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>Context.Provider</code>&#x7EC4;&#x4EF6;&#xFF0C;&#x5C06;<code>contextValue</code>&#x4EA4;&#x7ED9;&#x5D4C;&#x5957;&#x7684;&#x6D88;&#x8D39;&#x8005;&#x4F7F;&#x7528;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, { useMemo, useEffect } <span class="keyword">from</span> <span class="string">&apos;react&apos;</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&apos;prop-types&apos;</span></span><br><span class="line"><span class="keyword">import</span> { ReactReduxContext } <span class="keyword">from</span> <span class="string">&apos;./Context&apos;</span></span><br><span class="line"><span class="keyword">import</span> Subscription <span class="keyword">from</span> <span class="string">&apos;../utils/Subscription&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Provider</span>(<span class="params">{ store, context, children }</span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> contextValue = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> subscription = <span class="keyword">new</span> Subscription(store)</span><br><span class="line">    subscription.onStateChange = subscription.notifyNestedSubs</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      store,</span><br><span class="line">      subscription</span><br><span class="line">    }</span><br><span class="line">  }, [store])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> previousState = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> store.getState(), [store])</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> { subscription } = contextValue</span><br><span class="line">    subscription.trySubscribe()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (previousState !== store.getState()) {</span><br><span class="line">      subscription.notifyNestedSubs()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      subscription.tryUnsubscribe()</span><br><span class="line">      subscription.onStateChange = <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  }, [contextValue, previousState])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> Context = context || ReactReduxContext</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Context.Provider</span> <span class="attr">value</span>=<span class="string">{contextValue}</span>&gt;</span>{children}<span class="tag">&lt;/<span class="name">Context.Provider</span>&gt;</span></span></span><br><span class="line"><span class="xml">}</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">if (process.env.NODE_ENV !== &apos;production&apos;) {</span></span><br><span class="line"><span class="xml">  Provider.propTypes = {</span></span><br><span class="line"><span class="xml">    store: PropTypes.shape({</span></span><br><span class="line"><span class="xml">      subscribe: PropTypes.func.isRequired,</span></span><br><span class="line"><span class="xml">      dispatch: PropTypes.func.isRequired,</span></span><br><span class="line"><span class="xml">      getState: PropTypes.func.isRequired</span></span><br><span class="line"><span class="xml">    }),</span></span><br><span class="line"><span class="xml">    context: PropTypes.object,</span></span><br><span class="line"><span class="xml">    children: PropTypes.any</span></span><br><span class="line"><span class="xml">  }</span></span><br><span class="line"><span class="xml">}</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default Provider</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;<code>connect()</code>&#x6D89;&#x53CA;&#x5230;&#x7684;&#x6E90;&#x7801;&#x5185;&#x5BB9;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4F5C;&#x8FC7;&#x6DF1;&#x8BA8;&#x8BBA;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x901A;&#x8FC7;HOC&#x7684;&#x65B9;&#x5F0F;&#x5C06;<code>store</code>&#x7684;<code>state</code>&#x5185;&#x5BB9;&#x6620;&#x5C04;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;<code>props</code>&#x5C5E;&#x6027;&#x4E0A;&#x3002;</p><p>&#x2003;&#x2003;&#x524D;&#x6587;&#x5185;&#x5BB9;&#x4E86;&#x89E3;&#x5F97;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#x540E;&#xFF0C;&#x4E0B;&#x9762;&#x8BF4;&#x8BF4;&#x6211;&#x4E2A;&#x4EBA;&#x4F7F;&#x7528;&#x8FC7;&#x7684;&#x4E00;&#x4E9B;&#x65B9;&#x5F0F;&#x3002;</p><h4 id="&#x76EE;&#x5F55;&#x7EC4;&#x7EC7;"><a href="#&#x76EE;&#x5F55;&#x7EC4;&#x7EC7;" class="headerlink" title="&#x76EE;&#x5F55;&#x7EC4;&#x7EC7;"></a>&#x76EE;&#x5F55;&#x7EC4;&#x7EC7;</h4><p>&#x2003;&#x2003;&#x4E00;&#x822C;&#x6211;&#x4E2A;&#x4EBA;&#x4E60;&#x60EF;&#x4E0B;&#x56FE;&#x8FD9;&#x6837;&#x7EC4;&#x7EC7;<code>redux</code>&#x7684;&#x5185;&#x5BB9;&#x7ED3;&#x6784;&#xFF0C;&#x56E0;&#x4E3A;<code>store</code>&#x662F;C&#x4F4D;&#xFF0C;<code>action</code>&#x548C;<code>reducer</code>&#x90FD;&#x662F;&#x8F85;&#x52A9;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/menu.jpg" alt=""></p><h4 id="&#x62C6;&#x5206;&#x5408;&#x5E76;reducer"><a href="#&#x62C6;&#x5206;&#x5408;&#x5E76;reducer" class="headerlink" title="&#x62C6;&#x5206;&#x5408;&#x5E76;reducer"></a>&#x62C6;&#x5206;&#x5408;&#x5E76;reducer</h4><p>&#x2003;&#x2003;&#x6839;&#x636E;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8FDB;&#x884C;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;<code>reducer</code>&#x7684;&#x5408;&#x5E76;&#xFF08;<code>combineReducers</code>&#xFF09;&#xFF0C;<code>connect</code>&#x4E2D;&#x901A;&#x8FC7;<code>state.xxx.xxx</code>&#x7ED1;&#x5B9A;&#x3002;</p><h4 id="connect&#x4F20;&#x53C2;&#x98CE;&#x683C;"><a href="#connect&#x4F20;&#x53C2;&#x98CE;&#x683C;" class="headerlink" title="connect&#x4F20;&#x53C2;&#x98CE;&#x683C;"></a>connect&#x4F20;&#x53C2;&#x98CE;&#x683C;</h4><p>&#x2003;&#x2003;<code>connect</code>&#x7684;&#x5165;&#x53C2;&#x6709;&#x591A;&#x79CD;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x6548;&#x679C;&#x4E5F;&#x4E0D;&#x540C;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x662F;&#x5426;&#x6839;&#x636E;&#x7ED1;&#x5B9A;&#x5185;&#x5BB9;<code>rerender</code>&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x81EA;&#x8EAB;&#x573A;&#x666F;&#x51B3;&#x5B9A;&#x54EA;&#x79CD;&#x4F7F;&#x7528;&#xFF1A;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/connect.jpg" alt=""></p><p>&#x2003;&#x2003;&#x53E6;&#x5916;&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x5728;<code>mapDispatchToProps</code>&#x4E2D;&#x91C7;&#x7528;&#x4F20;&#x5BF9;&#x8C61;&#x7684;<strong>&#x7B80;&#x5199;</strong>&#x683C;&#x5F0F;&#xFF08;<code>dispatch =&gt; bindActionCreators({ xxx }, dispatch)</code>&#x7684;&#x7B80;&#x5199;&#xFF09;&#x3002;&#x8FD9;&#x4E9B;&#x5904;&#x7406;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>this.props.xxx</code>&#x76F4;&#x63A5;&#x8FDB;&#x884C;<code>dispatch</code>&#x3002;&#x5F53;&#x7136;&#x5728;&#x4E0D;&#x4F20;<code>mapDispatchToProps</code>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E5F;&#x4F1A;&#x4E3A;&#x4F60;&#x9ED8;&#x8BA4;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;<code>dispatch</code>&#x65B9;&#x6CD5;&#x5230;<code>props</code>&#x4E0A;&#xFF0C;&#x4EA4;&#x7531;&#x5F00;&#x53D1;&#x8005;&#x624B;&#x52A8;&#x5904;&#x7406;&#x3002;</p><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/intro.jpg" alt=""></p><p>&#x2003;&#x2003;PS&#xFF0C;<code>connect</code>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x88C5;&#x9970;&#x5668;&#x7684;&#x5199;&#x6CD5;&#x3002;</p><h4 id="&#x5F02;&#x6B65;&#x5386;&#x7A0B;"><a href="#&#x5F02;&#x6B65;&#x5386;&#x7A0B;" class="headerlink" title="&#x5F02;&#x6B65;&#x5386;&#x7A0B;"></a>&#x5F02;&#x6B65;&#x5386;&#x7A0B;</h4><p><a href="https://chrisdeo.github.io/2019/12/02/redux%E5%BC%82%E6%AD%A5%E5%8E%86%E7%A8%8B/">&#x4F20;&#x9001;&#x95E8;</a></p><h4 id="&#x67B6;&#x6784;&#x56FE;"><a href="#&#x67B6;&#x6784;&#x56FE;" class="headerlink" title="&#x67B6;&#x6784;&#x56FE;"></a>&#x67B6;&#x6784;&#x56FE;</h4><p><img src="/2020/01/27/React‰ΩøÁî®ÊâãËÆ∞/infra.jpg" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰∏ÄÁØáÂàÜ‰∫´Êñá‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://chrisdeo.github.io/tags/React/"/>
    
      <category term="ÊÄªÁªì" scheme="https://chrisdeo.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>reduxÂºÇÊ≠•ÂéÜÁ®ã</title>
    <link href="https://chrisdeo.github.io/2019/12/02/redux%E5%BC%82%E6%AD%A5%E5%8E%86%E7%A8%8B/"/>
    <id>https://chrisdeo.github.io/2019/12/02/reduxÂºÇÊ≠•ÂéÜÁ®ã/</id>
    <published>2019-12-02T02:54:26.000Z</published>
    <updated>2019-12-09T12:43:04.494Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x7406;&#x89E3;&#x4E3A;&#x4EC0;&#x4E48;&#x800C;&#x7528;&#xFF1F;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x524D;&#x9635;&#x5B50;&#x624B;&#x6495;&#x4E86;&#x90E8;&#x5206;<code>redux</code>&#x6E90;&#x7801;&#xFF0C;&#x5BF9;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#x7684;&#x7406;&#x89E3;&#x63D0;&#x5347;&#x4E86;&#x4E0D;&#x5C11;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x6211;&#x81EA;&#x8EAB;&#x5F00;&#x53D1;&#x7684;&#x5386;&#x7A0B;&#x4E2D;&#x8FD8;&#x662F;&#x4E00;&#x76F4;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x56F0;&#x6270;&#x7740;&#x6211;&#xFF1A;&#x8FD9;&#x4E9B;&#x4E0D;&#x65AD;&#x8FDB;&#x5316;&#x7684;<code>redux</code>&#x5F02;&#x6B65;&#x4E2D;&#x95F4;&#x4EF6;&#x5E93;&#x5230;&#x5E95;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x8BC9;&#x6C42;&#x7A76;&#x7ADF;&#x662F;&#x89E3;&#x51B3;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF1F;</p><h3 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h3><p>&#x2003;&#x2003;<code>redux-thunk</code>&#x662F;&#x6211;&#x6700;&#x65E9;&#x63A5;&#x89E6;&#x7684;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x4E2D;&#x95F4;&#x4EF6;&#x5E93;&#x3002;&#x5B83;&#x89E3;&#x51B3;&#x7684;&#x6838;&#x5FC3;&#x8BC9;&#x6C42;&#x662F;&#xFF1A;&#x5982;&#x4F55;&#x7EDF;&#x4E00;&#x7EC4;&#x7EC7;&#x5F02;&#x6B65;&#x573A;&#x666F;&#x7684;<code>action</code>&#x6D3E;&#x53D1;&#xFF0C;&#x7528;&#x767D;&#x8BDD;&#x6587;&#x6765;&#x8BF4;&#x5C31;&#x662F;<strong>&#x7EDF;&#x4E00;&#x5728;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#xFF08;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0B;&#xFF09;&#x8FDB;&#x884C;&#x5F02;&#x6B65;<code>action</code>&#x903B;&#x8F91;&#x7684;&#x5C01;&#x88C5;</strong>&#x3002;&#x5728;&#x4E4B;&#x524D;<a href="https://chrisdeo.github.io/2019/10/23/%E8%AE%BARedux%E5%BC%82%E6%AD%A5%E6%B5%81/">&lt;&lt;&#x8BBA;Redux&#x5F02;&#x6B65;&#x6D41;&gt;&gt;</a>&#x4E00;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8BA8;&#x8BBA;&#x8FC7;&#x672C;&#x8EAB;<code>action</code>&#x8FDB;&#x884C;<code>dispatch</code>&#x65F6;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x7684;&#x52A8;&#x4F5C;&#x3002;&#x800C;<code>redux-thunk</code>&#x4E2D;&#x95F4;&#x4EF6;&#x652F;&#x6301;&#x4E86;<code>action</code>&#x4E3A;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x7684;&#x4F20;&#x503C;&#xFF0C;&#x8FD9;&#x4E5F;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5728;&#x8FD9;&#x4E2A;<code>action</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#x8FDB;&#x884C;&#x5F02;&#x6B65;&#x903B;&#x8F91;&#x63A7;&#x5236;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x56DE;&#x8C03;&#x4E2D;&#x540C;&#x6B65;<code>dispatch</code>&#x6570;&#x636E;&#x3002;</p><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5728;<code>redux-thunk</code>&#x4E2D;&#xFF0C;&#x5BF9;<code>action</code>&#x51FD;&#x6570;&#x7684;&#x5904;&#x7406;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">    <span class="keyword">return</span> action(dispatch, getState, extraArgument);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x5982;<code>action</code>&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x8FDB;&#x884C;&#x5BF9;&#x5E94;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x5F02;&#x6B65;&#x5C01;&#x88C5;&#x3002;&#x4E0B;&#x9762;&#x4EE5;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x9875;&#x6570;&#x636E;&#x4E3A;&#x4F8B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FETCH_TABLE_LIST = <span class="string">&apos;FETCH_TABLE_LIST&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Action Creator With Side Effects</span></span><br><span class="line"><span class="keyword">const</span> fetchTableList = <span class="function"><span class="params">params</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> dispatch =&gt; {</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> axios.post(<span class="string">&apos;xx&apos;</span>, params);</span><br><span class="line">        <span class="keyword">if</span> (res &amp;&amp; res.retCode === <span class="string">&apos;success_code&apos;</span>) {</span><br><span class="line">            <span class="keyword">let</span> { tableList = [] } = res;</span><br><span class="line">            dispatch({</span><br><span class="line">                type: FETCH_TABLE_LIST,</span><br><span class="line">                payload: tableList</span><br><span class="line">            })</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reducers</span></span><br><span class="line"><span class="keyword">const</span> initState = {</span><br><span class="line">    tableList: [],</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tableList = <span class="function">(<span class="params">state = initState, action</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">switch</span> (action.type) {</span><br><span class="line">        <span class="keyword">case</span> FETCH_TABLE_LIST:</span><br><span class="line">            <span class="keyword">return</span> {</span><br><span class="line">                ...state,</span><br><span class="line">                tableList: action.payload,</span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;<code>redux-thunk</code>&#x4E4B;&#x7C7B;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x8FDB;&#x884C;&#x903B;&#x8F91;&#x7684;&#x96C6;&#x4E2D;&#x7BA1;&#x7406;&#xFF08;&#x4F7F;<code>dispatch</code>&#x63A5;&#x53D7;<code>function</code>&#x3001;<code>promise</code>&#x7B49;&#x7C7B;&#x578B;&#x7684;<code>action</code>&#xFF09;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x4E0A;&#x8FF0;&#x7684;&#x4E00;&#x4E9B;&#x526F;&#x4F5C;&#x7528;&#x5C31;&#x4F1A;&#x6563;&#x6B65;&#x5728;&#x5404;&#x4E2A;&#x4E1A;&#x52A1;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x5C31;&#x4EE5;&#x6211;&#x4EEC;&#x524D;&#x6587;&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x5217;&#x8868;&#x6570;&#x636E;&#x6765;&#x8BF4;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x4E1A;&#x52A1;&#x7EC4;&#x4EF6; xx.js</span></span><br><span class="line"><span class="keyword">const</span> FETCH_TABLE_LIST = <span class="string">&apos;FETCH_TABLE_LIST&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetchTableList = <span class="keyword">async</span> params =&gt; {</span><br><span class="line">    <span class="keyword">const</span> { dispatch } = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> axios.post(<span class="string">&apos;xx&apos;</span>, params);</span><br><span class="line">    <span class="keyword">if</span> (res &amp;&amp; res.retCode === <span class="string">&apos;success_code&apos;</span>) {</span><br><span class="line">        <span class="keyword">let</span> { tableList = [] } = res;</span><br><span class="line">        dispatch({</span><br><span class="line">            type: FETCH_TABLE_LIST,</span><br><span class="line">            payload: tableList</span><br><span class="line">        })</span><br><span class="line">    }    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x770B;&#x4E0A;&#x53BB;&#x5176;&#x5B9E;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#xFF0C;<strong>&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5C06;&#x4EE3;&#x7801;&#x653E;&#x5728;&#x54EA;&#x91CC;&#x7BA1;&#x7406;&#x8FDB;&#x884C;&#x590D;&#x7528;&#x7684;&#x95EE;&#x9898;&#x3002;</strong>&#x5BF9;&#x6BD4;<code>redux-thunk</code>&#x5C01;&#x88C5;&#x540E;&#x8C03;&#x7528;&#x7684;&#x5199;&#x6CD5;&#x662F;&#xFF1A;<code>this.props.dispatch(fetchTableList(params))</code>&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x63A5;&#x53D7;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x7684;<code>action</code>&#xFF0C;&#x4F7F;&#x5F97;&#x5728;&#x4E1A;&#x52A1;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;<code>dispatch</code>&#x5448;&#x73B0;&#x663E;&#x7136;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#xFF0C;&#x526F;&#x4F5C;&#x7528;&#x4E5F;&#x4E0D;&#x4F1A;&#x88AB;&#x66B4;&#x9732;&#x5728;&#x4E1A;&#x52A1;&#x7EC4;&#x4EF6;&#x4E2D;&#x3002;</p><h3 id="redux-promise"><a href="#redux-promise" class="headerlink" title="redux-promise"></a>redux-promise</h3><p>&#x2003;&#x2003;&#x4E0E;<code>thunk</code>&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x63A5;&#x6536;&#x7684;&#x662F;<code>Promise</code>&#xFF0C;&#x5B83;&#x7684;&#x8BC9;&#x6C42;&#x4F30;&#x8BA1;&#x5728;&#x4E8E;<strong>&#x4E0D;&#x7528;&#x5728;&#x4E1A;&#x52A1;&#x7EC4;&#x4EF6;&#x5C42;&#x5199;&#x90A3;&#x4E48;&#x591A;<code>this.props.dispatch(fetchTableList(params)).then().catch()</code>&#x4E4B;&#x7C7B;&#x7684;&#x4EE3;&#x7801;&#x3002;</strong></p><p>&#x2003;&#x2003;&#x7785;&#x7785;&#x6E90;&#x7801;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {</span><br><span class="line">  isPlainObject,</span><br><span class="line">  isString,</span><br><span class="line">} <span class="keyword">from</span> <span class="string">&apos;lodash&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isValidKey</span>(<span class="params">key</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="string">&apos;type&apos;</span>,</span><br><span class="line">    <span class="string">&apos;payload&apos;</span>,</span><br><span class="line">    <span class="string">&apos;error&apos;</span>,</span><br><span class="line">    <span class="string">&apos;meta&apos;</span>,</span><br><span class="line">  ].indexOf(key) &gt; <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// flux-standard-action&#x5E93;&#x4E2D;&#x7684;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x51C6;action&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isFSA</span>(<span class="params">action</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    isPlainObject(action) &amp;&amp;</span><br><span class="line">    isString(action.type) &amp;&amp;</span><br><span class="line">    <span class="built_in">Object</span>.keys(action).every(isValidKey)</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">promiseMiddleware</span>(<span class="params">{ dispatch }</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">next</span> =&gt;</span> action =&gt; {</span><br><span class="line">    <span class="keyword">if</span> (!isFSA(action)) {</span><br><span class="line">      <span class="keyword">return</span> isPromise(action) ? action.then(dispatch) : next(action);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isPromise(action.payload)</span><br><span class="line">      ? action.payload</span><br><span class="line">          .then(<span class="function"><span class="params">result</span> =&gt;</span> dispatch({ ...action, <span class="attr">payload</span>: result }))</span><br><span class="line">          .catch(<span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">            dispatch({ ...action, <span class="attr">payload</span>: error, <span class="attr">error</span>: <span class="literal">true</span> });</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">          })</span><br><span class="line">      : next(action);</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5927;&#x610F;&#x5C31;&#x662F;&#xFF0C;&#x5148;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;<code>action</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5219;&#x5224;&#x65AD;&#x662F;&#x4E0D;&#x662F;<code>Promise</code>&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x662F;&#x5219;&#x5728;<code>resolved</code>&#x540E;<code>dispatch</code>&#xFF0C;&#x4E0D;&#x662F;&#x5219;&#x6B63;&#x5E38;&#x8D70;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;<code>next</code>&#x6B65;&#x9AA4;&#x3002;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x51C6;<code>action</code>&#xFF0C;&#x5219;&#x5BF9;&#x5176;<code>payload</code>&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF08;&#x662F;&#x5426;&#x662F;<code>Promise</code>&#xFF09;&#xFF0C;&#x5176;&#x4E2D;&#x8FDB;&#x884C;&#x6210;&#x529F;&#x548C;&#x5931;&#x8D25;&#x60C5;&#x51B5;&#x4E0B;&#x7684;<code>dispatch</code>&#x3002;</p><p>&#x2003;&#x2003;&#x8FD8;&#x662F;&#x62FF;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x83B7;&#x53D6;&#x5217;&#x8868;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x7ED3;&#x5408;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x7528;&#x4F8B;&#x6709;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createAction } <span class="keyword">from</span> <span class="string">&apos;redux-actions&apos;</span>;</span><br><span class="line"><span class="keyword">import</span> { WebAPI } <span class="keyword">from</span> <span class="string">&apos;../utils/WebAPI&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchTableList = createAction(<span class="string">&apos;FETCH_TABLE_LIST&apos;</span>, WebAPI.fetchTableList);</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6CE8;&#xFF0C;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;<code>action</code>&#x5177;&#x6709;<code>type</code>&#x3001;<code>payload</code>&#x3001;<code>error</code>&#x3001;<code>meta</code>&#x56DB;&#x4E2A;<code>key</code>&#xFF0C;<code>createAction</code>&#x80FD;&#x5E2E;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;FSA&#x5BF9;&#x8C61;&#x3002;&#x50CF;&#x4E0A;&#x9762;&#x7684;&#x8BF7;&#x6C42;API&#x4F1A;&#x88AB;&#x8D4B;&#x503C;&#x5230;<code>action.payload</code>&#x4E0B;&#x3002;&#x81EA;&#x7136;&#x4E5F;&#x4F1A;&#x8D70;&#x4E2D;&#x95F4;&#x4EF6;&#x5185;<code>action.payload</code>&#x7684;<code>Promise.then.catch</code>&#x6D41;&#x7A0B;&#x3002;</p><h3 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h3><p>&#x2003;&#x2003;<code>saga</code>&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;&#x5B83;&#x5E26;&#x6765;&#x7684;&#x6838;&#x5FC3;&#x4EF7;&#x503C;&#x6709;&#x4E8C;&#xFF1A;&#x5176;&#x4E00;&#x662F;&#x4F7F;&#x7528;<code>generator</code>&#x8BED;&#x6CD5;&#x5904;&#x7406;&#x4E86;&#x5F02;&#x6B65;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#x95EE;&#x9898;&#xFF1B;&#x5176;&#x4E8C;&#x662F;&#x4F7F;&#x7528;&#x6DF7;&#x5408;&#x5F0F;&#xFF08;&#x547D;&#x4EE4;+&#x58F0;&#x660E;&#xFF09;&#x7F16;&#x7A0B;&#x7684;&#x601D;&#x60F3;&#x7EC4;&#x7EC7;&#x5F02;&#x6B65;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x5728;&#x5177;&#x4F53;&#x5F02;&#x6B65;&#x903B;&#x8F91;&#x4E2D;&#x91C7;&#x7528;&#x547D;&#x4EE4;&#x5F0F;&#x7F16;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x58F0;&#x660E;&#x5F0F;&#x8C03;&#x7528;&#x6D3E;&#x53D1;<code>action</code>&#xFF0C;&#x89E6;&#x53D1;<code>saga</code>&#x7684;<code>effects</code>&#x3002;</p><p>&#x2003;&#x2003;&#x901A;&#x8FC7;&#x9605;&#x8BFB;<code>saga</code>&#x5E93;&#x7684;<code>README.md</code>&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7406;&#x6E05;&#x5176;&#x63D0;&#x4F9B;&#x7684;&#x51E0;&#x4E2A;API&#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;&#xFF1A;</p><ul><li><code>put</code>: &#x76F8;&#x5F53;&#x4E8E;&#x6570;&#x636E;&#x6D3E;&#x53D1;&#x65F6;&#x7684;<code>dispatch</code>&#xFF1B;</li><li><code>call</code>: &#x914D;&#x5408;<code>yield</code>&#xFF0C;&#x8C03;&#x7528;API&#xFF0C;&#x4F20;&#x5165;&#x53C2;&#x6570;&#xFF1B;</li><li><code>takeEvery</code>: &#x7C7B;&#x4F3C;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#x89C2;&#x5BDF;&#x8005;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x89E6;&#x53D1;<code>dispatch</code>&#x65F6;&#xFF0C;&#x5BF9;&#x5E94;<code>type</code>&#x7684;<code>action</code>&#x4F1A;&#x8C03;&#x7528;&#x5BF9;&#x5E94;&#x7684;<code>generator</code>&#x51FD;&#x6570;&#xFF1B;</li><li><code>takeLatest</code>: &#x662F;<code>takeEvery</code>&#x7684;&#x4E00;&#x79CD;&#x53EF;&#x66FF;&#x4EE3;&#x65B9;&#x6848;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x76F8;&#x540C;&#xFF0C;&#x4E0D;&#x8FC7;&#x5982;&#x679C;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FD8;&#x6709;&#x522B;&#x7684;&#x8BF7;&#x6C42;&#x5B58;&#x5728;&#xFF08;&#x6BD4;&#x5982;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x5BFC;&#x81F4;&#x7684;<code>pending</code>&#xFF09;&#xFF0C;&#x65E7;&#x7684;&#x5C06;&#x4F1A;&#x88AB;&#x53D6;&#x6D88;&#xFF0C;&#x5373;&#x53EA;&#x6709;&#x6700;&#x65B0;&#x7684;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x4F1A;&#x4FDD;&#x7559;&#xFF1B;</li></ul><h3 id="&#x8BDD;&#x5916;"><a href="#&#x8BDD;&#x5916;" class="headerlink" title="&#x8BDD;&#x5916;"></a>&#x8BDD;&#x5916;</h3><p>&#x2003;&#x2003;&#x5206;&#x4EAB;&#x4E00;&#x7BC7;stackoverflow&#x4E0A;&#x5173;&#x4E8E;redux middleware&#x7684;&#x8BA8;&#x8BBA;&#x6587;&#x7AE0; <a href="https://stackoverflow.com/questions/34570758/why-do-we-need-middleware-for-async-flow-in-redux/34623840#34623840" target="_blank" rel="noopener">Why do we need middleware for async flow in Redux?</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;ÁêÜËß£‰∏∫‰ªÄ‰πàËÄåÁî®Ôºü&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="redux" scheme="https://chrisdeo.github.io/tags/redux/"/>
    
  </entry>
  
  <entry>
    <title>axiosÊ∫êÁ†ÅÈòÖËØª</title>
    <link href="https://chrisdeo.github.io/2019/11/30/axios%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
    <id>https://chrisdeo.github.io/2019/11/30/axiosÊ∫êÁ†ÅÈòÖËØª/</id>
    <published>2019-11-30T04:10:43.000Z</published>
    <updated>2020-05-05T03:38:39.499Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x6CA1;&#x4E8B;&#x8BFB;&#x8BFB;&#x7801;&#x2026;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;<code>axios</code>&#x5728;&#x4E1A;&#x52A1;&#x4E2D;&#x8BF7;&#x6C42;&#x7528;&#x5F97;&#x6BD4;&#x8F83;&#x591A;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x5468;&#x672B;&#x5C31;&#x82B1;&#x70B9;&#x65F6;&#x95F4;&#x9605;&#x8BFB;&#x4E0B;&#x6E90;&#x7801;&#xFF0C;&#x5148;&#x8FDB;<code>github</code>&#x5F00;&#x542F;<code>sourcegraph</code>&#x63D2;&#x4EF6;&#xFF0C;&#x627E;&#x5230;&#x6838;&#x5FC3;&#x5B9E;&#x73B0;&#x76EE;&#x5F55;&#xFF1A;</p><p><img src="/2019/11/30/axiosÊ∫êÁ†ÅÈòÖËØª/menu.jpg" alt=""></p><p>&#x2003;&#x2003;&#x90A3;&#x4ECE;&#x54EA;&#x91CC;&#x5F00;&#x59CB;&#x6162;&#x6162;&#x770B;&#x6BD4;&#x8F83;&#x597D;&#x5462;&#xFF1F;&#x6211;&#x4E2A;&#x4EBA;&#x5176;&#x5B9E;&#x6BD4;&#x8F83;&#x503E;&#x5411;&#x4ECE;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x91CC;&#x5165;&#x624B;&#xFF0C;&#x53EF;&#x4EE5;&#x5B66;&#x4E60;&#x5176;&#x4E2D;&#x7684;&#x7F16;&#x7801;&#x601D;&#x8DEF;&#xFF0C;&#x53D1;&#x73B0;&#x5E73;&#x5E38;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x529F;&#x80FD;&#x5BB9;&#x6613;&#x5FFD;&#x7565;&#x7684;&#x7EC6;&#x8282;&#x3002;&#x4E86;&#x89E3;&#x4E86;&#x5176;&#x4E2D;&#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x4F5C;&#x7528;&#x540E;&#xFF0C;&#x5BF9;&#x6211;&#x4EEC;&#x540E;&#x7EED;&#x76D8;&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x7684;&#x903B;&#x8F91;&#x4E5F;&#x4F1A;&#x8F7B;&#x677E;&#x4E0D;&#x5C11;&#x3002;</p><h2 id="helpers"><a href="#helpers" class="headerlink" title="helpers"></a>helpers</h2><p>&#x2003;&#x2003;&#x8BE5;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4E0B;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E9B;&#x5BF9;&#x6211;&#x4EEC;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x62FC;&#x63A5;URL&#x3001;&#x5904;&#x7406;&#x53C2;&#x6570;&#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x3002;</p><h3 id="bind-js"><a href="#bind-js" class="headerlink" title="bind.js"></a>bind.js</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&apos;use strict&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, thisArg</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">wrap</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> args = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">arguments</span>.length);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; args.length; i++) {</span><br><span class="line">      args[i] = <span class="built_in">arguments</span>[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fn.apply(thisArg, args);</span><br><span class="line">  };</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5728;ES5&#x4E0B;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;<code>bind</code>&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x95ED;&#x5305;&#xFF0C;&#x6700;&#x540E;&#x8FD4;&#x56DE;&#x7ED1;&#x5B9A;<code>this</code>&#x7684;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</p><h2 id="utils-js"><a href="#utils-js" class="headerlink" title="utils.js"></a>utils.js</h2><p>&#x2003;&#x2003;&#x8BE5;&#x6587;&#x4EF6;&#x4E0B;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E9B;&#x5224;&#x65AD;&#x7C7B;&#x578B;&#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#xFF1A;</p><p><img src="/2019/11/30/axiosÊ∫êÁ†ÅÈòÖËØª/utils.jpg" alt=""></p><p>&#x2003;&#x2003;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x5224;&#x65AD;&#x7C7B;&#x578B;&#x601D;&#x8DEF;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x83B7;&#x53D6;toString &#x65B9;&#x4FBF;&#x540E;&#x7EED;&#x8C03;&#x7528; &#x907F;&#x514D;&#x6BCF;&#x6B21;&#x90FD;&#x7528;.&#x91CD;&#x65B0;&#x67E5;&#x627E;&#x83B7;&#x53D6;</span></span><br><span class="line"><span class="keyword">var</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="comment">// &#x901A;&#x8FC7;&#x8F6C;&#x5316;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x7279;&#x70B9;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x5224;&#x65AD;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isXXX</span>(<span class="params">val</span>) </span>{</span><br><span class="line"><span class="keyword">return</span> toString.call(val) === <span class="string">&apos;[object XXX]&apos;</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x6211;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x53EF;&#x4EE5;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x7684;&#xFF1A;</p><h3 id="isObject"><a href="#isObject" class="headerlink" title="isObject"></a>isObject</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is an Object</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} val The value to test</span></span><br><span class="line"><span class="comment"> * @returns {boolean} True if value is an Object, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">val</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> val !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">&apos;object&apos;</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="isFormData"><a href="#isFormData" class="headerlink" title="isFormData"></a>isFormData</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a FormData</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} val The value to test</span></span><br><span class="line"><span class="comment"> * @returns {boolean} True if value is an FormData, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFormData</span>(<span class="params">val</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">typeof</span> FormData !== <span class="string">&apos;undefined&apos;</span>) &amp;&amp; (val <span class="keyword">instanceof</span> FormData);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="isStandardBrowserEnv"><a href="#isStandardBrowserEnv" class="headerlink" title="isStandardBrowserEnv"></a>isStandardBrowserEnv</h3><p>&#x2003;&#x2003;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF0C;WEB&#x7AEF;&#x4F9D;&#x8D56;<code>window</code>&#x53CA;<code>document</code>&#xFF0C;Native&#x7AEF;&#x6838;&#x5FC3;&#x5219;&#x662F;&#x5728;<code>navigator.product</code>&#x4E0A;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if we&apos;re running in a standard browser environment</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This allows axios to run in a web worker, and react-native.</span></span><br><span class="line"><span class="comment"> * Both environments support XMLHttpRequest, but not fully standard globals.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * web workers:</span></span><br><span class="line"><span class="comment"> *  typeof window -&gt; undefined</span></span><br><span class="line"><span class="comment"> *  typeof document -&gt; undefined</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * react-native:</span></span><br><span class="line"><span class="comment"> *  navigator.product -&gt; &apos;ReactNative&apos;</span></span><br><span class="line"><span class="comment"> * nativescript</span></span><br><span class="line"><span class="comment"> *  navigator.product -&gt; &apos;NativeScript&apos; or &apos;NS&apos;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStandardBrowserEnv</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> navigator !== <span class="string">&apos;undefined&apos;</span> &amp;&amp; (navigator.product === <span class="string">&apos;ReactNative&apos;</span> ||</span><br><span class="line">navigator.product === <span class="string">&apos;NativeScript&apos;</span> ||</span><br><span class="line">navigator.product === <span class="string">&apos;NS&apos;</span>)) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">&apos;undefined&apos;</span> &amp;&amp;</span><br><span class="line">    <span class="keyword">typeof</span> <span class="built_in">document</span> !== <span class="string">&apos;undefined&apos;</span></span><br><span class="line">  );</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Iterate over an Array or an Object invoking a function for each item.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * If `obj` is an Array callback will be called passing</span></span><br><span class="line"><span class="comment"> * the value, index, and complete array for each item.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * If &apos;obj&apos; is an Object callback will be called passing</span></span><br><span class="line"><span class="comment"> * the value, key, and complete object for each property.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object|Array} obj The object to iterate</span></span><br><span class="line"><span class="comment"> * @param {Function} fn The callback to invoke for each item</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">forEach</span>(<span class="params">obj, fn</span>) </span>{</span><br><span class="line">  <span class="comment">// Don&apos;t bother if no value provided</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj === <span class="string">&apos;undefined&apos;</span>) {</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Force an array if not already something iterable</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&apos;object&apos;</span>) {</span><br><span class="line">    <span class="comment">/*eslint no-param-reassign:0*/</span></span><br><span class="line">    obj = [obj];</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isArray(obj)) {</span><br><span class="line">    <span class="comment">// Iterate over array values</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = obj.length; i &lt; l; i++) {</span><br><span class="line">      fn.call(<span class="literal">null</span>, obj[i], i, obj);</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// Iterate over object keys</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) {</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, key)) {</span><br><span class="line"><span class="comment">// &#x7531;&#x4E8E; in &#x4F1A;&#x6839;&#x636E;&#x539F;&#x578B;&#x94FE;&#x5F80;&#x4E0A;&#x53BB;&#x62FF;&#x7EE7;&#x627F;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x53EA;&#x5173;&#x6CE8;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x6240;&#x76F4;&#x63A5;&#x5305;&#x542B;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x56FA;&#x6B64;&#x5904;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x5F0F;&#x8FC7;&#x6EE4;</span></span><br><span class="line">        fn.call(<span class="literal">null</span>, obj[key], key, obj);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="normalizeHeaderName"><a href="#normalizeHeaderName" class="headerlink" title="normalizeHeaderName"></a>normalizeHeaderName</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeHeaderName</span>(<span class="params">headers, normalizedName</span>) </span>{</span><br><span class="line">  utils.forEach(headers, <span class="function"><span class="keyword">function</span> <span class="title">processHeader</span>(<span class="params">value, name</span>) </span>{</span><br><span class="line"><span class="comment">// &#x683C;&#x5F0F;&#x5316;&#x5934;&#x90E8;&#xFF0C;&#x6BD4;&#x8F83;headers&#x4E2D;&#x7684;key&#x53CA;&#x5165;&#x53C2;&#x4E2D;&#x7684;&#x683C;&#x5F0F;&#x5316;name&#x662F;&#x5426;&#x62FC;&#x5199;&#x76F8;&#x540C;&#xFF08;&#x90FD;&#x8F6C;&#x5927;&#x5199;&#x6BD4;&#x8F83;&#xFF09;</span></span><br><span class="line"><span class="comment">// &#x82E5;&#x4E24;&#x8005;&#x5185;&#x5BB9;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4EE5;&#x5165;&#x53C2;&#x4F20;&#x5165;&#x7684;&#x4E3A;&#x51C6;(&#x6DFB;&#x52A0;&#x65B0;&#x7684;key)&#xFF0C;&#x5220;&#x9664;&#x539F;&#x672C;headers&#x4E2D;&#x7684;key</span></span><br><span class="line">    <span class="keyword">if</span> (name !== normalizedName &amp;&amp; name.toUpperCase() === normalizedName.toUpperCase()) {</span><br><span class="line">      headers[normalizedName] = value;</span><br><span class="line">      <span class="keyword">delete</span> headers[name];</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><h3 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h3><p>&#x2003;&#x2003;&#x76F8;&#x5F53;&#x4E8E;&#x628A;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5185;&#x7684;&#x5185;&#x5BB9;&#x7EE7;&#x627F;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E2D;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Extends object a by mutably adding to it the properties of object b.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} a The object to be extended</span></span><br><span class="line"><span class="comment"> * @param {Object} b The object to copy properties from</span></span><br><span class="line"><span class="comment"> * @param {Object} thisArg The object to bind function to</span></span><br><span class="line"><span class="comment"> * @return {Object} The resulting value of object a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">a, b, thisArg</span>) </span>{</span><br><span class="line">  forEach(b, <span class="function"><span class="keyword">function</span> <span class="title">assignValue</span>(<span class="params">val, key</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (thisArg &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">&apos;function&apos;</span>) {</span><br><span class="line">      a[key] = bind(val, thisArg);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      a[key] = val;</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="axios-js"><a href="#axios-js" class="headerlink" title="axios.js"></a>axios.js</h2><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x4E00;&#x4E2A;&#x5165;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x903B;&#x8F91;&#x90FD;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5F15;&#x5165;&#xFF0C;&#x518D;&#x901A;&#x8FC7;&#x6A21;&#x5757;&#x5316;&#x5BFC;&#x51FA;&#x4F9B;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x5E93;&#x3002;</p><p>&#x2003;&#x2003;&#x5148;&#x770B;&#x751F;&#x6210;&#x5B9E;&#x4F8B;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create an instance of Axios</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} defaultConfig The default config for the instance</span></span><br><span class="line"><span class="comment"> * @return {Axios} A new instance of Axios</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createInstance</span>(<span class="params">defaultConfig</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> context = <span class="keyword">new</span> Axios(defaultConfig);</span><br><span class="line">  <span class="keyword">var</span> instance = bind(Axios.prototype.request, context);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Copy axios.prototype to instance</span></span><br><span class="line">  utils.extend(instance, Axios.prototype, context);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Copy context to instance</span></span><br><span class="line">  utils.extend(instance, context);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x9996;&#x5148;&#x901A;&#x8FC7;<code>Axios</code>&#x6784;&#x9020;&#x65B9;&#x6CD5;<code>new</code>&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5176;&#x4E2D;&#x4F20;&#x5165;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;<code>defaults</code>&#x3002;&#x4E0B;&#x9762;&#x770B;&#x770B;<code>defaults.js</code>&#x5185;&#x662F;&#x4E9B;&#x4EC0;&#x4E48;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> defaults = {</span><br><span class="line">  <span class="comment">// &#x83B7;&#x53D6;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x7684;&#x9002;&#x914D;&#x5668;&#x5C5E;&#x6027;</span></span><br><span class="line">  adapter: getDefaultAdapter(),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x8F6C;&#x5316;&#x8BF7;&#x6C42;&#x5934;&#x914D;&#x7F6E;</span></span><br><span class="line">  transformRequest: [<span class="function"><span class="keyword">function</span> <span class="title">transformRequest</span>(<span class="params">data, headers</span>) </span>{</span><br><span class="line">    normalizeHeaderName(headers, <span class="string">&apos;Accept&apos;</span>);</span><br><span class="line">    normalizeHeaderName(headers, <span class="string">&apos;Content-Type&apos;</span>);</span><br><span class="line"><span class="comment">// &#x6839;&#x636E;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;</span></span><br><span class="line">    <span class="keyword">if</span> (utils.isFormData(data) ||</span><br><span class="line">      utils.isArrayBuffer(data) ||</span><br><span class="line">      utils.isBuffer(data) ||</span><br><span class="line">      utils.isStream(data) ||</span><br><span class="line">      utils.isFile(data) ||</span><br><span class="line">      utils.isBlob(data)</span><br><span class="line">    ) {</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (utils.isArrayBufferView(data)) {</span><br><span class="line">      <span class="keyword">return</span> data.buffer;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (utils.isURLSearchParams(data)) {</span><br><span class="line">      setContentTypeIfUnset(headers, <span class="string">&apos;application/x-www-form-urlencoded;charset=utf-8&apos;</span>);</span><br><span class="line">      <span class="keyword">return</span> data.toString();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (utils.isObject(data)) {</span><br><span class="line">      setContentTypeIfUnset(headers, <span class="string">&apos;application/json;charset=utf-8&apos;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(data);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  }],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x8F6C;&#x5316;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF0C;&#x5373;&#x6211;&#x4EEC;&#x62FF;&#x5230;&#x7684;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x5DF2;&#x7ECF;&#x662F;&#x901A;&#x8FC7;JSON.parse&#x5904;&#x7406;&#x540E;&#x7684;&#x5BF9;&#x8C61;&#x4E86;</span></span><br><span class="line">  transformResponse: [<span class="function"><span class="keyword">function</span> <span class="title">transformResponse</span>(<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="comment">/*eslint no-param-reassign:0*/</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&apos;string&apos;</span>) {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        data = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">      } <span class="keyword">catch</span> (e) { <span class="comment">/* Ignore */</span> }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  }],</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * A timeout in milliseconds to abort a request. If set to 0 (default) a</span></span><br><span class="line"><span class="comment">   * timeout is not created.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  timeout: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  xsrfCookieName: <span class="string">&apos;XSRF-TOKEN&apos;</span>,</span><br><span class="line">  xsrfHeaderName: <span class="string">&apos;X-XSRF-TOKEN&apos;</span>,</span><br><span class="line"></span><br><span class="line">  maxContentLength: <span class="number">-1</span>,</span><br><span class="line">  maxBodyLength: <span class="number">-1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x662F;&#x5426;&#x8BF7;&#x6C42;&#x6210;&#x529F;</span></span><br><span class="line">  validateStatus: <span class="function"><span class="keyword">function</span> <span class="title">validateStatus</span>(<span class="params">status</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">defaults.headers = {</span><br><span class="line">  common: {</span><br><span class="line">    <span class="string">&apos;Accept&apos;</span>: <span class="string">&apos;application/json, text/plain, */*&apos;</span></span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x518D;&#x770B;&#x770B;<code>Axios</code>&#x8FD9;&#x4E2A;&#x201C;&#x7C7B;&#x201D;&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create a new instance of Axios</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} instanceConfig The default config for the instance</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Axios</span>(<span class="params">instanceConfig</span>) </span>{</span><br><span class="line">  <span class="keyword">this</span>.defaults = instanceConfig;</span><br><span class="line">  <span class="keyword">this</span>.interceptors = {</span><br><span class="line"><span class="comment">// &#x521D;&#x59CB;&#x5316;&#x4E24;&#x4E2A;&#x62E6;&#x622A;&#x5668;&#x5B9E;&#x4F8B;</span></span><br><span class="line">    request: <span class="keyword">new</span> InterceptorManager(),</span><br><span class="line">    response: <span class="keyword">new</span> InterceptorManager()</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5148;&#x58F0;&#x660E;&#x4E00;&#x4E2A;<code>Axios</code>&#x51FD;&#x6570;&#xFF0C;&#x5B9E;&#x4F8B;&#x4E0A;&#x6709;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5B9E;&#x4F8B;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;<code>this.defaults</code>&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x5219;&#x662F;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x548C;&#x63A5;&#x6536;&#x54CD;&#x5E94;&#x7684;&#x62E6;&#x622A;&#x5668;<code>this.interceptors</code>&#x3002;</p><p>&#x2003;&#x2003;<code>InterceptorManager</code>&#x8FD9;&#x4E2A;&#x62E6;&#x622A;&#x5668;&#x53C8;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InterceptorManager</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">this</span>.handlers = [];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Add a new interceptor to the stack</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Function} fulfilled The function to handle `then` for a `Promise`</span></span><br><span class="line"><span class="comment"> * @param {Function} rejected The function to handle `reject` for a `Promise`</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return {Number} An ID used to remove interceptor later</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">InterceptorManager.prototype.use = <span class="function"><span class="keyword">function</span> <span class="title">use</span>(<span class="params">fulfilled, rejected</span>) </span>{</span><br><span class="line">  <span class="keyword">this</span>.handlers.push({</span><br><span class="line">    fulfilled: fulfilled,</span><br><span class="line">    rejected: rejected</span><br><span class="line">  });</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.handlers.length - <span class="number">1</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove an interceptor from the stack</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Number} id The ID that was returned by `use`</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">InterceptorManager.prototype.eject = <span class="function"><span class="keyword">function</span> <span class="title">eject</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.handlers[id]) {</span><br><span class="line">    <span class="keyword">this</span>.handlers[id] = <span class="literal">null</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Iterate over all the registered interceptors</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This method is particularly useful for skipping over any</span></span><br><span class="line"><span class="comment"> * interceptors that may have become `null` calling `eject`.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Function} fn The function to call for each interceptor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">InterceptorManager.prototype.forEach = <span class="function"><span class="keyword">function</span> <span class="title">forEach</span>(<span class="params">fn</span>) </span>{</span><br><span class="line">  utils.forEach(<span class="keyword">this</span>.handlers, <span class="function"><span class="keyword">function</span> <span class="title">forEachHandler</span>(<span class="params">h</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (h !== <span class="literal">null</span>) {</span><br><span class="line">      fn(h);</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5B9E;&#x4F8B;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;<code>handlers</code>&#x521D;&#x59CB;&#x5316;&#x7A7A;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x5185;&#x5BB9;&#x6DFB;&#x52A0;&#xFF0C;&#x539F;&#x578B;&#x94FE;&#x4E0A;&#x6DFB;&#x52A0;<code>use</code>&#x3001;<code>eject</code>&#x3001;<code>forEach</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x8FDB;&#x884C;<code>Promise</code>&#x5904;&#x7406;&#x72B6;&#x6001;&#x5165;&#x6808;&#xFF0C;&#x6E05;&#x9664;&#x4EE5;&#x53CA;&#x8FED;&#x4EE3;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x3002;</p><p>&#x2003;&#x2003;&#x7136;&#x540E;&#x5728;<code>Axios</code>&#x7684;&#x539F;&#x578B;&#x94FE;&#x4E0A;&#x914D;&#x7F6E;&#x65B9;&#x6CD5;<code>request</code>&#x3001;<code>getUri</code>&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Dispatch a request</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param {Object} config The config specific for this request (merged with this.defaults)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Axios.prototype.request = <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>{</span><br><span class="line">  <span class="comment">/*eslint no-param-reassign:0*/</span></span><br><span class="line">  <span class="comment">// Allow for axios(&apos;example/url&apos;[, config]) a la fetch API</span></span><br><span class="line">  <span class="comment">// &#x652F;&#x6301;2&#x79CD; request&#x65B9;&#x5F0F; &#x5F53;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x5373;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;&#x63A5;&#x53E3;URL&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;config&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</span></span><br><span class="line">  <span class="comment">// &#x5F53;&#x4F20;&#x5165;&#x975E;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;config</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> config === <span class="string">&apos;string&apos;</span>) {</span><br><span class="line">    config = <span class="built_in">arguments</span>[<span class="number">1</span>] || {};</span><br><span class="line">    config.url = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    config = config || {};</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x6B64;&#x5904;&#x5C06;&#x4F1A;&#x62FF;&#x6211;&#x4EEC;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F; &#x4E0E; &#x524D;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x7684;defaultConfig&#x5408;&#x5E76; &#x76F8;&#x540C;key&#x7684;value&#x88AB;&#x8986;&#x76D6;</span></span><br><span class="line">  config = mergeConfig(<span class="keyword">this</span>.defaults, config);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set config.method</span></span><br><span class="line">  <span class="comment">// &#x4F9D;&#x6B21;&#x5224;&#x65AD; &#x4F20;&#x5165;config&#x5185;&#x7684;&#x8BF7;&#x6C42;&#x7C7B;&#x578B; &gt; &#x9ED8;&#x8BA4;&#x7684;defaultConfig&#x5185;&#x7684;&#x8BF7;&#x6C42;&#x7C7B;&#x578B; &#xFF0C; &#x82E5;&#x90FD;&#x4E0D;&#x5B58;&#x5728; &#x5219;&#x521D;&#x59CB;&#x5316;&#x4E3A;get&#x7C7B;&#x578B;&#x8BF7;&#x6C42;</span></span><br><span class="line">  <span class="keyword">if</span> (config.method) {</span><br><span class="line">    config.method = config.method.toLowerCase();</span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.defaults.method) {</span><br><span class="line">    config.method = <span class="keyword">this</span>.defaults.method.toLowerCase();</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    config.method = <span class="string">&apos;get&apos;</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Hook up interceptors middleware</span></span><br><span class="line">  <span class="keyword">var</span> chain = [dispatchRequest, <span class="literal">undefined</span>];</span><br><span class="line">  <span class="keyword">var</span> promise = <span class="built_in">Promise</span>.resolve(config);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.interceptors.request.forEach(<span class="function"><span class="keyword">function</span> <span class="title">unshiftRequestInterceptors</span>(<span class="params">interceptor</span>) </span>{</span><br><span class="line">    chain.unshift(interceptor.fulfilled, interceptor.rejected);</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.interceptors.response.forEach(<span class="function"><span class="keyword">function</span> <span class="title">pushResponseInterceptors</span>(<span class="params">interceptor</span>) </span>{</span><br><span class="line">    chain.push(interceptor.fulfilled, interceptor.rejected);</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (chain.length) {</span><br><span class="line">    promise = promise.then(chain.shift(), chain.shift());</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Ê≤°‰∫ãËØªËØªÁ†Å‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="axios" scheme="https://chrisdeo.github.io/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>leetcodeÂ∏¶Êù•ÁöÑÁÆóÊ≥ïÊÄùËÄÉ</title>
    <link href="https://chrisdeo.github.io/2019/11/29/leetcode%E5%B8%A6%E6%9D%A5%E7%9A%84%E7%AE%97%E6%B3%95%E6%80%9D%E8%80%83/"/>
    <id>https://chrisdeo.github.io/2019/11/29/leetcodeÂ∏¶Êù•ÁöÑÁÆóÊ≥ïÊÄùËÄÉ/</id>
    <published>2019-11-29T01:11:52.000Z</published>
    <updated>2019-11-30T02:17:49.263Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4F4E;&#x7EA7;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x53EA;&#x8FFD;&#x6C42;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x9AD8;&#x7EA7;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x5728;&#x5B8C;&#x6210;&#x529F;&#x80FD;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x8FFD;&#x6C42;&#x6027;&#x80FD;&#x7684;&#x6781;&#x81F4;&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x5B58;&#x5728;&#x7684;&#x610F;&#x4E49;&#x5C31;&#x662F;&#x8BA9;&#x6211;&#x4EEC;&#x5728;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x8FD0;&#x7B97;&#x4E2D;&#x63D0;&#x5347;&#x6027;&#x80FD;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x6709;&#x610F;&#x8BC6;&#x7684;&#x5BF9;&#x67D0;&#x79CD;&#x7C7B;&#x578B;&#x95EE;&#x9898;&#x5E94;&#x7528;&#x7B97;&#x6CD5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x524D;&#x9884;&#x9632;&#x540E;&#x671F;&#x7531;&#x4E8E;&#x6570;&#x636E;&#x91CF;&#x589E;&#x52A0;&#x5E26;&#x6765;&#x7684;&#x79CD;&#x79CD;&#x95EE;&#x9898;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰ΩéÁ∫ßÁöÑÁ®ãÂ∫èÂëòÂè™ËøΩÊ±ÇÂäüËÉΩÁöÑÂÆûÁé∞ÔºåÈ´òÁ∫ßÁöÑÁ®ãÂ∫èÂëòÂú®ÂÆåÊàêÂäüËÉΩÁöÑÂü∫Á°Ä‰∏äËøΩÊ±ÇÊÄßËÉΩÁöÑÊûÅËá¥„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ÊÄªÁªì" scheme="https://chrisdeo.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="ÁÆóÊ≥ï" scheme="https://chrisdeo.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ËÆ°ÁÆóÊú∫Âü∫Á°Ä" scheme="https://chrisdeo.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>‰ªéÈõ∂ÂºÄÂßãÊê≠Âª∫Ëá™Â∑±ÁöÑReactÂ∫îÁî®</title>
    <link href="https://chrisdeo.github.io/2019/11/19/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84React%E5%BA%94%E7%94%A8/"/>
    <id>https://chrisdeo.github.io/2019/11/19/‰ªéÈõ∂ÂºÄÂßãÊê≠Âª∫Ëá™Â∑±ÁöÑReactÂ∫îÁî®/</id>
    <published>2019-11-19T04:14:45.000Z</published>
    <updated>2019-12-30T12:46:49.960Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;Write less &amp; Think more.</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x91C7;&#x7528;&#x7684;&#x9879;&#x76EE;&#x542F;&#x52A8;&#x65B9;&#x6848;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x5BF9;&#x5E94;&#x6846;&#x67B6;&#x7684;&#x811A;&#x624B;&#x67B6;&#x751F;&#x6210;&#xFF0C;&#x518D;&#x7ED3;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x52A0;&#x52A0;&#x6539;&#x6539;&#x2026;&#x8FD9;&#x4E48;&#x505A;&#x65E0;&#x53EF;&#x539A;&#x975E;&#xFF0C;&#x6BD5;&#x7ADF;&#x5DE5;&#x671F;&#x8D76;&#xFF0C;&#x81EA;&#x5DF1;&#x624B;&#x642D;&#x5DE5;&#x7A0B;&#x91CF;&#x548C;&#x8E29;&#x5751;&#x6210;&#x672C;&#x90FD;&#x662F;&#x8981;&#x652F;&#x4ED8;&#x7684;&#x3002;&#x4F46;&#x662F;&#x6211;&#x8FD8;&#x662F;&#x60F3;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x6280;&#x672F;&#x80FD;&#x529B;&#x548C;&#x67B6;&#x6784;&#x601D;&#x7EF4;&#x6709;&#x8FFD;&#x6C42;&#x7684;&#x4EBA;&#x90FD;&#x5E94;&#x5F53;&#x4ECE;&#x96F6;&#x5F00;&#x59CB;&#x6784;&#x5EFA;&#x4E00;&#x904D;&#x9879;&#x76EE;&#xFF0C;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x4EC5;&#x80FD;&#x591F;&#x5BF9;&#x5168;&#x5C40;&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x7EC6;&#x81F4;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x5373;&#x4FBF;&#x662F;&#x4EE5;&#x540E;&#x8981;&#x8FDB;&#x884C;&#x5B9A;&#x5236;&#x4F18;&#x5316;&#x4EA6;&#x80FD;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x7684;&#x60F3;&#x6CD5;&#x65E0;&#x6210;&#x672C;&#x63A5;&#x5165;&#x3002;</p><p>&#x2003;&#x2003;&#x4EE5;&#x6211;&#x81EA;&#x8EAB;&#x7684;&#x5F00;&#x53D1;&#x5386;&#x7A0B;&#x800C;&#x8A00;&#xFF0C;&#x4E3B;&#x8981;&#x6280;&#x672F;&#x6808;&#x662F;React&#xFF0C;&#x4E1A;&#x5185;&#x6709;&#x5F88;&#x591A;&#x6210;&#x719F;&#x7684;&#x811A;&#x624B;&#x67B6;&#x9879;&#x76EE;&#x751F;&#x6210;&#x5DE5;&#x5177;&#x5982;fb&#x7684;<code>create-react-app</code>&#x3001;dvajs&#x751F;&#x6001;&#x7684;<code>antd-admin</code>&#x7B49;&#x3002;&#x5B83;&#x4EEC;&#x7684;&#x5171;&#x6027;&#x90FD;&#x662F;&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x52A0;&#x5173;&#x6CE8;&#x4E1A;&#x52A1;&#x4E0A;&#x7684;&#x5F00;&#x53D1;&#x903B;&#x8F91;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x8017;&#x8D39;&#x592A;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x5728;&#x9879;&#x76EE;&#x67B6;&#x6784;&#x642D;&#x5EFA;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E2D;&#x5C06;&#x5F88;&#x591A;&#x7EC6;&#x8282;&#x90FD;&#x9ED1;&#x76D2;&#x5316;&#x4E86;&#xFF08;&#x6BD4;&#x5982;<code>create-react-app</code>&#x8981;<code>eject</code>&#x624D;&#x77E5;&#x9053;&#x5E95;&#x4E0B;&#x5230;&#x5E95;&#x6709;&#x54EA;&#x4E9B;&#x4F9D;&#x8D56;&#xFF0C;<code>roadhog</code>&#x3001;<code>umi</code>&#x8FD9;&#x4E9B;&#x96C6;&#x6210;&#x4E86;&#x6574;&#x5957;&#x7684;<code>webpack</code>&#x3001;<code>mock</code>&#x4F53;&#x7CFB;&#xFF09;&#xFF0C;&#x8FD9;&#x4E9B;&#x5728;&#x9879;&#x76EE;&#x521D;&#x671F;&#x5E26;&#x6765;&#x7684;&#x6548;&#x7387;&#x63D0;&#x5347;&#x662F;&#x663E;&#x8457;&#x7684;&#xFF0C;&#x4F46;&#x540C;&#x6837;&#x7684;&#x5230;&#x4E86;&#x540E;&#x671F;&#x60F3;&#x518D;&#x66F4;&#x65B0;&#x6216;&#x5B9A;&#x5236;&#x4E00;&#x4E9B;&#x65B9;&#x6848;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5F80;&#x5F80;&#x4F1A;&#x201C;&#x65E0;&#x4ECE;&#x4E0B;&#x624B;&#x201D;&#x3002;</p><p>&#x2003;&#x2003;&#x903C;&#x903C;&#x53E8;&#x4E86;&#x534A;&#x5929;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x4EBA;&#x8FD8;&#x662F;&#x8981;&#x89C6;&#x81EA;&#x8EAB;&#x60C5;&#x51B5;&#x6765;&#x9009;&#x62E9;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x9879;&#x76EE;&#x6784;&#x5EFA;&#x65B9;&#x6848;&#x3002;&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x5C31;&#x5F00;&#x59CB;&#x672C;&#x6587;&#x7684;&#x6B63;&#x9898;&#x5427;&#xFF0C;&#x5982;&#x4F55;&#x4ECE;&#x96F6;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;React&#x5E94;&#x7528;&#xFF1F;</p><h2 id="&#x8003;&#x8651;&#x65B9;&#x5411;"><a href="#&#x8003;&#x8651;&#x65B9;&#x5411;" class="headerlink" title="&#x8003;&#x8651;&#x65B9;&#x5411;"></a>&#x8003;&#x8651;&#x65B9;&#x5411;</h2><ul><li>&#x751F;&#x6001;&#x4F9D;&#x8D56;</li><li>&#x5DE5;&#x5177;&#x5E93;</li><li>webpack </li><li>ESLint</li><li>&#x76EE;&#x5F55;&#x5206;&#x5C42;</li><li>&#x8DEF;&#x7531;&#x914D;&#x7F6E;</li><li>&#x6570;&#x636E;Mock&#x65B9;&#x6848;</li><li>CI</li></ul><h2 id="&#x8E29;&#x5751;&#x65E5;&#x5FD7;"><a href="#&#x8E29;&#x5751;&#x65E5;&#x5FD7;" class="headerlink" title="&#x8E29;&#x5751;&#x65E5;&#x5FD7;"></a>&#x8E29;&#x5751;&#x65E5;&#x5FD7;</h2><h3 id="&#x8DEF;&#x7531;&#x914D;&#x7F6E;"><a href="#&#x8DEF;&#x7531;&#x914D;&#x7F6E;" class="headerlink" title="&#x8DEF;&#x7531;&#x914D;&#x7F6E;"></a>&#x8DEF;&#x7531;&#x914D;&#x7F6E;</h3><p>&#x2003;&#x2003;&#x8DEF;&#x7531;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;SPA&#x7684;&#x7075;&#x9B42;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x5BF9;&#x5E94;React&#x7684;&#x9009;&#x578B;&#x81EA;&#x7136;&#x662F;<code>react-router</code>&#xFF0C;&#x672C;&#x6B21;&#x642D;&#x5EFA;&#x91C7;&#x7528;&#x4E86;&#x6700;&#x65B0;&#x7684;v5.x&#x7248;&#x672C;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;key point&#x8BB0;&#x5F55;&#x3002;</p><h4 id="BrowserRouter-vs-HashRouter"><a href="#BrowserRouter-vs-HashRouter" class="headerlink" title="BrowserRouter vs HashRouter"></a>BrowserRouter vs HashRouter</h4><p>&#x2003;&#x2003;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Write less &amp;amp; Think more.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://chrisdeo.github.io/tags/React/"/>
    
      <category term="webpack" scheme="https://chrisdeo.github.io/tags/webpack/"/>
    
      <category term="Êû∂ÊûÑ" scheme="https://chrisdeo.github.io/tags/%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>Èâ¥ÊùÉ‰∫å‰∏â‰∫ã</title>
    <link href="https://chrisdeo.github.io/2019/11/17/%E9%89%B4%E6%9D%83%E4%BA%8C%E4%B8%89%E4%BA%8B/"/>
    <id>https://chrisdeo.github.io/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/</id>
    <published>2019-11-17T08:14:11.000Z</published>
    <updated>2019-11-17T15:40:01.592Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x77E5;&#x6653;&#x4E8B;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x624D;&#x80FD;&#x7406;&#x89E3;&#x5176;&#x672C;&#x8D28;&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x804A;&#x5230;&#x9274;&#x6743;&#xFF0C;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x5F53;&#x6210;&#x4E00;&#x672C;&#x7F16;&#x5E74;&#x53F2;&#x6765;&#x770B;&#x2026;</p><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;HTTP&#x534F;&#x8BAE;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x662F;&#x65E0;&#x72B6;&#x6001;&#x3002;&#x5728;&#x65E9;&#x671F;web&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x5728;&#x4E0D;&#x540C;&#x9875;&#x9762;&#x8DF3;&#x8F6C;&#x7136;&#x540E;&#x8BF7;&#x6C42;&#x5BF9;&#x5E94;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x79CD;&#x65E0;&#x72B6;&#x6001;&#x5E76;&#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x4EC0;&#x4E48;&#x5F71;&#x54CD;&#x3002;&#x4F46;&#x968F;&#x7740;&#x4E92;&#x8054;&#x7F51;&#x7684;&#x9AD8;&#x901F;&#x53D1;&#x5C55;&#xFF0C;&#x5E94;&#x7528;&#x573A;&#x666F;&#x9A6C;&#x4E0A;&#x53D8;&#x5F97;&#x590D;&#x6742;&#x8D77;&#x6765;&#xFF0C;&#x6BD4;&#x5982;&#x670D;&#x52A1;&#x7AEF;&#x987B;&#x8981;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7528;&#x6237;&#x533A;&#x5206;&#x5B9A;&#x5236;&#x72B6;&#x6001;&#xFF08;&#x5982;&#x4FDD;&#x6301;&#x7528;&#x6237;&#x767B;&#x9646;&#x6001;&#x3001;&#x5546;&#x57CE;&#x8D2D;&#x7269;&#x8F66;&#x8BB0;&#x5F55;&#x7B49;&#x7B49;&#xFF09;&#xFF0C;&#x5F7C;&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x8BC6;&#x522B;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x4E8E;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x9274;&#x6743;&#x65B9;&#x6848;&#x5E94;&#x8FD0;&#x800C;&#x751F;&#x2026;</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>&#x2003;&#x2003;&#x5148;&#x8BF4;Cookie&#xFF0C;&#x5B83;&#x662F;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x5934;&#x952E;<code>Set-cookie</code>&#xFF0C;&#x503C;<code>&lt;cookie&#x540D;&gt;=&lt;cookie&#x503C;&gt;</code>&#xFF09;&#x53D1;&#x9001;&#x5230;&#x7528;&#x6237;&#x6D4F;&#x89C8;&#x5668;&#x5E76;&#x4FDD;&#x5B58;&#x5728;&#x672C;&#x5730;&#x7684;&#x4E00;&#x5C0F;&#x5757;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E0B;&#x6B21;&#x5411;&#x540C;&#x4E00;&#x670D;&#x52A1;&#x5668;&#x518D;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x65F6;&#x88AB;&#x643A;&#x5E26;&#x5E76;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x5982;&#x4E0B;&#xFF08;via MDN&#xFF09;&#xFF1A;</p><ul><li>&#x4F1A;&#x8BDD;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#xFF08;&#x5982;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x3001;&#x8D2D;&#x7269;&#x8F66;&#x3001;&#x6E38;&#x620F;&#x5206;&#x6570;&#x6216;&#x5176;&#x5B83;&#x9700;&#x8981;&#x8BB0;&#x5F55;&#x7684;&#x4FE1;&#x606F;&#xFF09;</li><li>&#x4E2A;&#x6027;&#x5316;&#x8BBE;&#x7F6E;&#xFF08;&#x5982;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x8BBE;&#x7F6E;&#x3001;&#x4E3B;&#x9898;&#x7B49;&#xFF09;</li><li>&#x6D4F;&#x89C8;&#x5668;&#x884C;&#x4E3A;&#x8DDF;&#x8E2A;&#xFF08;&#x5982;&#x8DDF;&#x8E2A;&#x5206;&#x6790;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x7B49;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x8FD9;&#x7BC7;<a href="https://mp.weixin.qq.com/s/oOGIuJCplPVW3BuIx9tNQg" target="_blank" rel="noopener">&#x7B2C;&#x4E09;&#x65B9;cookie&#x5E94;&#x7528;</a>&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x6DF7;&#x6DC6;&#x70B9;&#x9700;&#x8981;&#x641E;&#x6E05;&#x695A;&#xFF1A;&#x7B2C;&#x4E09;&#x65B9;Cookie&#x4F9D;&#x65E7;&#x53EA;&#x80FD;&#x83B7;&#x53D6;&#x7B2C;&#x4E09;&#x65B9;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x7684;Cookie&#x4FE1;&#x606F;&#xFF08;&#x540C;Domain&#xFF09;&#xFF0C;&#x5F53;&#x524D;&#x9875;&#x9762;&#x5373;&#x7B2C;&#x4E00;&#x65B9;Cookie&#x662F;&#x65E0;&#x5173;&#x8054;&#x7684;&#xFF1B;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#x5728;&#x4E0D;&#x540C;&#x9875;&#x9762;&#x6295;&#x653E;&#x5E7F;&#x544A;&#x6765;&#x6536;&#x96C6;&#x3002;</li></ul><h3 id="&#x95EE;&#x9898;-amp-&#x5904;&#x7406;"><a href="#&#x95EE;&#x9898;-amp-&#x5904;&#x7406;" class="headerlink" title="&#x95EE;&#x9898;&amp;&#x5904;&#x7406;"></a>&#x95EE;&#x9898;&amp;&#x5904;&#x7406;</h3><h4 id="&#x5B58;&#x50A8;"><a href="#&#x5B58;&#x50A8;" class="headerlink" title="&#x5B58;&#x50A8;"></a>&#x5B58;&#x50A8;</h4><p>&#x2003;&#x2003;&#x5728;&#x65E9;&#x671F;web&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5176;&#x8FD8;&#x5145;&#x5F53;&#x8FC7;&#x4E00;&#x9635;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x65B9;&#x6848;&#xFF0C;&#x4E0D;&#x8FC7;&#x672C;&#x8EAB;&#x7A7A;&#x95F4;&#x6709;&#x5C40;&#x9650;&#xFF08;4KB&#xFF09;&#xFF0C;&#x73B0;&#x5DF2;&#x88AB;<code>sessionStorage</code>&#x3001;<code>localStorage</code>&#xFF0C;<code>IndexedDB</code>&#x66FF;&#x4EE3;&#x3002;</p><h4 id="&#x5B89;&#x5168;"><a href="#&#x5B89;&#x5168;" class="headerlink" title="&#x5B89;&#x5168;"></a>&#x5B89;&#x5168;</h4><p>&#x2003;&#x2003;&#x53E6;&#x5916;&#xFF0C;Cookie&#x5BB9;&#x6613;&#x88AB;&#x5229;&#x7528;&#x8FDB;&#x884C;XSS&#x653B;&#x51FB;&#xFF08;&#x53CD;&#x5C04;&#x3001;DOM&#x3001;&#x5B58;&#x50A8;&#xFF09;&#xFF0C;&#x4E0D;&#x8FC7;&#x672C;&#x8D28;&#x4E0A;&#x8FD8;&#x662F;&#x53BB;&#x62FF;<code>document.cookie</code>&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x540E;&#x7AEF;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x5934;&#x8BBE;&#x7F6E;<code>HttpOnly</code>&#x5C5E;&#x6027;&#x6765;&#x9632;&#x8303;&#x3002;<code>HttpOnly</code>&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x7684;<code>document.cookie</code>&#x8FD4;&#x56DE;&#xFF0C;&#x6307;&#x5B9A;&#x4E86;<code>HttpOnly</code>&#x5C5E;&#x6027;&#x7684;Cookie&#x503C;&#x5C06;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x8FD4;&#x56DE;&#x503C;&#x4E2D;&#xFF1B;</p><p>&#x2003;&#x2003;CSRF&#x6211;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5927;&#x6982;&#x7406;&#x89E3;&#x4E0B;&#x5C31;&#x662F;&#x8BF1;&#x5BFC;&#x7528;&#x6237;&#x8FDB;&#x5165;&#x6076;&#x610F;&#x9875;&#x9762;&#xFF0C;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;&#x540C;&#x6E90;&#x6307;&#x5411;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x4E4B;&#x524D;&#x767B;&#x9646;&#x4E86;<code>http://bank.example.com</code>&#xFF0C;&#x6709;&#x4E00;&#x4E2A;<code>cookie</code>&#x7684;&#x767B;&#x9646;&#x6001;&#xFF0C;&#x5728;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x63A5;&#x53E3;&#x88AB;&#x89E6;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;&#x63D0;&#x6B3E;&#x7684;&#x64CD;&#x4F5C;<code>http://bank.example.com/withdraw?account=bob&amp;amount=1000000&amp;for=mallory</code>&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x540C;&#x6E90;&#xFF0C;&#x4E4B;&#x524D;&#x7684;<code>cookie</code>&#x5C31;&#x4F1A;&#x88AB;&#x643A;&#x5E26;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x7528;&#x6237;&#x4E0D;&#x77E5;&#x60C5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x6210;&#x529F;&#x63D0;&#x73B0;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E00;&#x822C;&#x6709;<strong>&#x9A8C;&#x8BC1;&#x7801;</strong>&#x548C;<strong>Referrer&#x68C0;&#x6D4B;</strong>&#x7684;&#x65B9;&#x6848;&#x89C4;&#x907F;&#x3002;</p><h4 id="&#x6D41;&#x91CF;"><a href="#&#x6D41;&#x91CF;" class="headerlink" title="&#x6D41;&#x91CF;"></a>&#x6D41;&#x91CF;</h4><p>&#x2003;&#x2003;&#x5728;&#x8BBF;&#x95EE;web&#x5E94;&#x7528;&#x540E;&#xFF0C;&#x968F;&#x540E;&#x5BF9;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F1A;&#x643A;&#x5E26;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x7684;Cookie&#x4FE1;&#x606F;&#xFF08;Header&#xFF09;&#xFF0C;&#x65E0;&#x5F62;&#x95F4;&#x589E;&#x5927;&#x4E86;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6D41;&#x91CF;&#x6D88;&#x8017;&#x3002;</p><h4 id="&#x8DE8;&#x57DF;"><a href="#&#x8DE8;&#x57DF;" class="headerlink" title="&#x8DE8;&#x57DF;"></a>&#x8DE8;&#x57DF;</h4><p>&#x2003;&#x2003;Cookie&#x7684;&#x8DE8;&#x57DF;&#x53D1;&#x9001;&#x987B;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x540C;&#x65F6;&#x652F;&#x6301;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8BBE;&#x7F6E;<code>xhr</code>&#x7684;<code>withCredentials</code>&#x4E3A;<code>true</code>,&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x7F6E;<code>Access-Control-Allow-Origin</code>&#x4E3A;&#x5BF9;&#x5E94;Domain&#xFF08;&#x4E0D;&#x80FD;&#x4E3A;<code>*</code>&#xFF09;&#xFF0C;<code>Access-Control-Allow-Credentials</code>&#x4E3A;<code>true</code>&#x3002;&#x89C1;<a href="https://zhuanlan.zhihu.com/p/28818954" target="_blank" rel="noopener">&#x903C;&#x4E4E;&#x4E00;&#x6587;</a>&#x3002;</p><h3 id="&#x5C5E;&#x6027;"><a href="#&#x5C5E;&#x6027;" class="headerlink" title="&#x5C5E;&#x6027;"></a>&#x5C5E;&#x6027;</h3><p>&#x2003;&#x2003;Cookie&#x7684;&#x5C5E;&#x6027;&#x5982;&#x4E0B;&#xFF08;via Chrome&#x63A7;&#x5236;&#x53F0;&#xFF09;&#xFF1A;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/cookie.jpg" alt=""></p><ul><li>Name: &#x952E;&#x3002;</li><li>Value: &#x503C;&#x3002;</li><li>Domain: &#x6807;&#x8BC6;&#x5B9A;&#x4E49;Cookie&#x5E94;&#x8BE5;&#x53D1;&#x9001;&#x7ED9;&#x54EA;&#x4E9B;URL &#x82E5;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x5F53;&#x524D;&#x6587;&#x6863;&#x7684;&#x4E3B;&#x673A;&#xFF08;&#x4E0D;&#x5305;&#x542B;&#x5B50;&#x57DF;&#x540D;&#xFF09;&#xFF1B;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;Domain&#xFF0C;&#x5219;&#x4E00;&#x822C;&#x5305;&#x542B;&#x5B50;&#x57DF;&#x540D;&#x3002;</li><li>Path: &#x6807;&#x8BC6;&#x6307;&#x5B9A;&#x4E86;&#x4E3B;&#x673A;&#x4E0B;&#x7684;&#x54EA;&#x4E9B;&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;Cookie&#xFF08;&#x8BE5;URL&#x8DEF;&#x5F84;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#x4E8E;&#x8BF7;&#x6C42;URL&#x4E2D;&#xFF09;&#x3002;&#x4EE5;&#x5B57;&#x7B26; %x2F (&#x201C;/&#x201C;) &#x4F5C;&#x4E3A;&#x8DEF;&#x5F84;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5B50;&#x8DEF;&#x5F84;&#x4E5F;&#x4F1A;&#x88AB;&#x5339;&#x914D;&#xFF08;&#x5373;&#x4E3B;&#x673A;&#x4E2D;&#x670D;&#x52A1;&#x7AEF;&#x5BF9;Cookie&#x7684;&#x5171;&#x4EAB;&#x8BBF;&#x95EE;&#xFF09;&#x3002;</li><li>Expires/Max-Age: &#x6709;&#x6548;&#x65F6;&#x95F4;&#xFF08;&#x7EDD;&#x5BF9;&#xFF09;&#xFF0C;&#x53D7;&#x5BA2;&#x6237;&#x7AEF;&#x65F6;&#x95F4;&#x5F71;&#x54CD;&#x3002;</li><li>HttpOnly&#xFF1A;&#x524D;&#x6587;&#x5DF2;&#x8FF0;&#x3002;</li><li>Secure&#xFF1A;&#x7531;&#x4E8E;HTTP&#x672C;&#x8EAB;&#x5BF9;&#x5185;&#x5BB9;&#x662F;&#x660E;&#x6587;&#x4F20;&#x8F93;&#x7684;&#xFF0C;&#x82E5;&#x662F;&#x6709;&#x4EBA;&#x52AB;&#x6301;&#x4E86;&#x4E2D;&#x95F4;&#x4FE1;&#x606F;&#xFF0C;Cookie&#x5C31;&#x4F1A;&#x88AB;&#x76D7;&#x7528;&#xFF0C;&#x8BBE;&#x7F6E;Secure&#x5C31;&#x662F;&#x9650;&#x5236;&#x5BF9;&#x5E94;Cookie&#x4EC5;&#x5728;HTTPS&#x4E0B;&#x624D;&#x80FD;&#x591F;&#x4F20;&#x8F93;&#x3002;</li><li>SameSite: &#x5904;&#x4E8E;&#x5B9E;&#x9A8C;&#x9636;&#x6BB5;&#xFF0C;&#x4F7F;&#x7528;&#x8BF7;&#x8003;&#x8651;&#x517C;&#x5BB9;&#x6027;&#x3002;&#x8DE8;&#x7AD9;&#x8BF7;&#x6C42;&#x7684;Cookie&#x4E0D;&#x4F1A;&#x88AB;&#x53D1;&#x9001;&#xFF0C;&#x7528;&#x6765;&#x9632;&#x6B62; CSRF &#x653B;&#x51FB;&#x548C;&#x7528;&#x6237;&#x8FFD;&#x8E2A;&#xFF0C;&#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x53C2;&#x8003;<a href="http://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html" target="_blank" rel="noopener">&#x962E;&#x8001;&#x5E08;&#x8FD9;&#x7BC7;</a>&#x3002;</li></ul><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>&#x2003;&#x2003;Session&#x5176;&#x5B9E;&#x662F;&#x548C;Cookie&#x914D;&#x5408;&#x98DF;&#x7528;&#x7684;&#x3002;&#x533A;&#x5206;&#x4E8E;Cookie&#x5B58;&#x50A8;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#xFF0C;Session&#x4F1A;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x5B58;&#x50A8;&#x3002;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#x53D6;&#x51B3;&#x4E8E;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5728;&#x5168;&#x5C40;&#x7A7A;&#x95F4;&#x4E2D;&#x7EF4;&#x62A4;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#x767B;&#x51FA;&#x6216;&#x8D85;&#x8FC7;&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x7F6E;&#x6709;&#x6548;&#x65F6;&#x957F;&#x540E;&#x4E3B;&#x52A8;&#x8FDB;&#x884C;&#x6E05;&#x7406;&#xFF0C;&#x4EA6;&#x6216;&#x6781;&#x7AEF;&#xFF08;&#x65AD;&#x7535;&#xFF09;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x88AB;&#x52A8;&#x6E05;&#x7A7A;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5927;&#x578B;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x5728;Redis&#x6216;&#x81EA;&#x8EAB;&#x5E93;&#x4E2D;&#x7EF4;&#x62A4;&#xFF0C;&#x4EA6;&#x6709;Nginx&#x6839;&#x636E;&#x8BBF;&#x95EE;IP&#x5B9A;&#x5236;&#x56FA;&#x5B9A;&#x670D;&#x52A1;IP&#x7684;&#x505A;&#x6CD5;&#xFF08;&#x6700;&#x7EC8;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x5206;&#x4EAB;&#x3001;&#x5BB9;&#x9519;&#x3001;&#x9AD8;&#x53EF;&#x7528;&#xFF09;&#x3002;</p><p>&#x2003;&#x2003;&#x7B80;&#x5355;&#x7406;&#x89E3;Cookie&#x548C;Session&#x8054;&#x7CFB;&#x5C31;&#x662F;&#xFF1A;&#x7528;&#x6237;&#x53D1;&#x8D77;&#x767B;&#x9646;&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x4F20;&#x9012;<code>username</code>&#x548C;<code>password</code>&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x901A;&#x8FC7;&#x540E;&#x6839;&#x636E;&#x4E00;&#x5B9A;&#x52A0;&#x5BC6;&#x89C4;&#x5219;&#xFF08;SHA-256&#x6458;&#x8981;&#x5904;&#x7406;&#x3001;&#x52A0;&#x76D0;&#x7B49;&#xFF09;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>sessionId</code>&#x4E32;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x8BE5;&#x503C;&#x5B58;&#x5230;Cookie&#x5185;&#xFF0C;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x4E2D;&#x643A;&#x5E26;&#x3002;&#x56FE;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/sessionId.jpg" alt=""></p><h2 id="Token-amp-JWT"><a href="#Token-amp-JWT" class="headerlink" title="Token &amp; JWT"></a>Token &amp; JWT</h2><p>&#x2003;&#x2003;&#x4ECE;&#x524D;&#x6587;&#x68B3;&#x7406;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x7528;Cookie-Session&#x505A;&#x9274;&#x6743;&#x5927;&#x81F4;&#x5B58;&#x5728;&#x4E09;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5176;&#x4E00;&#x662F;&#x5B89;&#x5168;&#x6027;&#xFF0C;XSS&#x3001;CSRF&#x90FD;&#x53EF;&#x80FD;&#x4F1A;&#x6CC4;&#x9732;Cookie&#xFF1B;&#x5176;&#x4E8C;&#x5C31;&#x662F;&#x5728;&#x5927;&#x578B;&#x5E94;&#x7528;&#x4E2D;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x8FD9;&#x4E2A;Session&#xFF08;&#x5982;&#x963F;&#x91CC;&#x767B;&#x9646;&#x5929;&#x732B;&#x518D;&#x8BBF;&#x95EE;&#x5176;&#x4ED6;&#x963F;&#x91CC;&#x7684;&#x7F51;&#x9875;&#x540C;&#x6837;&#x4F1A;&#x4FDD;&#x6301;&#x767B;&#x9646;&#x6001;&#xFF09;&#xFF0C;&#x5DE5;&#x7A0B;&#x91CF;&#x5927;&#xFF0C;&#x5BB9;&#x707E;&#x8FD8;&#x5F97;&#x505A;&#x5F97;&#x5C4C;&#xFF1B;&#x6700;&#x540E;&#x5219;&#x662F;&#x8DE8;&#x57DF;&#x7684;&#x9650;&#x5236;&#x3002;</p><p>&#x2003;&#x2003;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x6848;&#x5462;&#xFF1F;JWT&#xFF08;JSON Web Token&#xFF09;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;&#x4E0D;&#x8FC7;&#x5728;&#x5F00;&#x59CB;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7406;&#x4E00;&#x4E0B;Token&#x548C;JWT&#x7684;&#x5173;&#x8054;&#x3002;&#x5148;&#x4ECE;&#x5B57;&#x9762;&#x4E0A;&#x770B;&#xFF0C;&#x663E;&#x7136;Token&#x8868;&#x8FF0;&#x7684;&#x8303;&#x7574;&#x66F4;&#x5927;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x51ED;&#x8BC1;&#x4EE4;&#x724C;&#xFF0C;&#x81F3;&#x4E8E;&#x751F;&#x6210;&#x65B9;&#x5F0F;&#x5E76;&#x6CA1;&#x6709;&#x6807;&#x51C6;&#x5B9A;&#x4E49;&#xFF0C;&#x7528;&#x4EC0;&#x4E48;&#x7B97;&#x6CD5;&#x3001;&#x751F;&#x6210;&#x957F;&#x5EA6;&#x3001;&#x683C;&#x5F0F;&#x90FD;&#x6CA1;&#x6709;&#x8981;&#x6C42;&#x3002;&#x4EE5;&#x6211;&#x81EA;&#x5DF1;&#x5B9E;&#x9645;&#x7ECF;&#x5386;&#x7684;&#x9879;&#x76EE;&#x800C;&#x8A00;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x7528;Token&#x9274;&#x6743;&#xFF08;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x662F;JWT&#x3001;&#x4E00;&#x4E2A;&#x662F;&#x666E;&#x901A;TOKEN&#xFF09;&#x7684;&#x3002;</p><p>&#x2003;&#x2003;&#x5148;&#x770B;&#x666E;&#x901A;TOKEN&#xFF0C;&#x540E;&#x53F0;&#x901A;&#x8FC7;&#x5B9A;&#x5236;&#x7684;&#x89C4;&#x5219;&#x5BF9;&#x7528;&#x6237;&#x767B;&#x9646;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x5168;&#x5C40;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x5B57;&#x5178;&#x7ED3;&#x6784;&#xFF08;&#x540E;&#x7AEF;&#x5C0F;&#x54E5;&#x8BB2;&#x7684;&#xFF0C;&#x54B1;&#x4E5F;&#x4E0D;&#x6562;&#x591A;&#x8BF4;&#xFF09;&#xFF0C;&#x5C06;&#x751F;&#x6210;&#x7684;accToken&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#xFF0C;&#x524D;&#x7AEF;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x5934;&#x5185;&#x643A;&#x5E26;&#x2026;&#x6240;&#x4EE5;&#x4F3C;&#x4E4E;&#x8FD9;&#x6837;&#x7684;&#x505A;&#x6CD5;&#x53EA;&#x662F;&#x76F8;&#x5F53;&#x4E8E;&#x5C06;&#x51ED;&#x8BC1;&#x4ECE;Cookie&#x91CC;&#x6539;&#x5230;&#x4E86;&#x8BF7;&#x6C42;&#x5934;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x4E2D;&#xFF0C;&#x63D0;&#x5347;&#x4E86;&#x4E00;&#x5B9A;&#x7684;&#x5B89;&#x5168;&#x6027;&#x4EE5;&#x53CA;&#x6D88;&#x9664;&#x4E86;&#x8DE8;&#x57DF;&#x4E0D;&#x80FD;&#x4F20;&#x9012;&#x7684;&#x95EE;&#x9898;&#x3002;</p><p>&#x2003;&#x2003;&#x518D;&#x770B;JWT&#xFF0C;&#x4E00;&#x8A00;&#x6982;&#x4E4B;&#x5C31;&#x662F;&#x5B83;&#x662F;TOKEN&#x8FD9;&#x4E2A;&#x8303;&#x7574;&#x4E0B;&#x7684;&#x4E00;&#x79CD;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;&#x5B83;&#x4E0E;&#x524D;&#x6587;&#x4E2D;&#x9274;&#x6743;&#x65B9;&#x5F0F;&#x7684;&#x6700;&#x5927;&#x4E0D;&#x540C;&#x70B9;&#x5728;&#x4E8E;&#x5B83;&#x7528;&#x4E8E;&#x9274;&#x6743;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x4E0D;&#x4F1A;&#x5728;&#x9274;&#x6743;&#x4E0A;&#x6D88;&#x8017;&#x989D;&#x5916;&#x7A7A;&#x95F4;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x7701;&#x4E86;&#x4E00;&#x5927;&#x90E8;&#x5206;&#x5F00;&#x53D1;&#x548C;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x3002;</p><p>&#x2003;&#x2003;JWT&#x7684;&#x539F;&#x7406;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x8BA4;&#x8BC1;&#x540E;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;JSON&#x5BF9;&#x8C61;&#x3002;&#x524D;&#x7AEF;&#x5BF9;&#x8BE5;JWT&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#xFF0C;&#x901A;&#x5E38;&#x662F;<code>localStorage</code>&#xFF0C;&#x4E4B;&#x540E;&#x8BF7;&#x6C42;&#x653E;&#x5165;&#x5934;&#x7684;<code>Authorization</code>&#x4E2D;&#xFF0C;&#x4EA4;&#x4E92;&#x6D41;&#x7A0B;&#x5176;&#x5B9E;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x89C1;&#x4E0B;&#x56FE;&#xFF1A;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/jwt.jpg" alt=""></p><p>&#x2003;&#x2003;&#x518D;&#x770B;JWT&#x7684;&#x7ED3;&#x6784;&#xFF1A;</p><ul><li><p>Header&#xFF08;&#x5934;&#x90E8;&#xFF09;&#x662F;&#x4E00;&#x4E2A;JSON&#x5BF9;&#x8C61;&#xFF0C;&#x5185;&#x5BB9;&#x662F;&#x63CF;&#x8FF0; JWT &#x7684;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x5B9A;&#x4E49;&#x7B7E;&#x540D;&#x7684;&#x7B97;&#x6CD5;&#x548C;Token&#x7684;&#x7C7B;&#x578B;&#x3002;&#x6700;&#x540E;&#x4F1A;&#x901A;&#x8FC7;BASE64URL&#x7B97;&#x6CD5;&#xFF08;&#x540C;BASE64&#x8F6C;&#x6CD5;&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x4E0D;&#x8FC7;&#x989D;&#x5916;&#x6709;&#x4E00;&#x4E2A;&#x66FF;&#x6362;&#x89C4;&#x5219;&#xFF0C;<code>=</code>&#x88AB;&#x7701;&#x7565;&#x3001;<code>+</code>&#x66FF;&#x6362;&#x6210;<code>-</code>&#xFF0C;<code>/</code>&#x66FF;&#x6362;&#x6210;<code>_</code>&#xFF09;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p></li><li><p>Payload&#xFF08;&#x8D1F;&#x8F7D;&#xFF09;&#x5B58;&#x653E;&#x5B9E;&#x9645;&#x9700;&#x8981;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E; <strong>&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x52A0;&#x5BC6;&#x7684;&#xFF0C;&#x4E0D;&#x8981;&#x628A;&#x79D8;&#x5BC6;&#x4FE1;&#x606F;&#x653E;&#x8FD9;</strong> &#x6700;&#x540E;&#x4F1A;&#x901A;&#x8FC7;BASE64URL&#x7B97;&#x6CD5;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p></li><li><p>Signature&#xFF08;&#x7B7E;&#x540D;&#xFF09;&#x5BF9;&#x524D;&#x4E24;&#x90E8;&#x5206;&#x7684;&#x7B7E;&#x540D;&#xFF0C;&#x9632;&#x6B62;&#x6570;&#x636E;&#x7BE1;&#x6539;&#x3002;</p></li></ul><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Header &#x91CC;&#x9762;&#x6307;&#x5B9A;&#x7684;&#x7B7E;&#x540D;&#x7B97;&#x6CD5;&#xFF08;&#x9ED8;&#x8BA4;&#x662F; HMAC SHA256&#xFF09;</span></span><br><span class="line"><span class="comment">// &#x670D;&#x52A1;&#x5668; &#x6307;&#x5B9A;&#x4E00;&#x4E2A; &#x5BC6;&#x94A5;secret</span></span><br><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">  secret)</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E0A;&#x9762;&#x4E09;&#x4E2A;&#x90E8;&#x5206;&#x5B57;&#x7B26;&#x4E32;&#x901A;&#x8FC7;<code>.</code>&#x8FDE;&#x63A5;&#x540E;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#xFF1A;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/jwt-ds.jpg" alt=""></p><h2 id="OAuth2-0"><a href="#OAuth2-0" class="headerlink" title="OAuth2.0"></a>OAuth2.0</h2><p>&#x2003;&#x2003;OAuth 2.0 &#x662F;&#x4E00;&#x4E2A;&#x884C;&#x4E1A;&#x7684;&#x6807;&#x51C6;&#x6388;&#x6743;&#x534F;&#x8BAE;&#x3002;OAuth 2.0 &#x4E13;&#x6CE8;&#x4E8E;&#x7B80;&#x5316;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x540C;&#x65F6;&#x4E3A; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x684C;&#x9762;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x624B;&#x673A;&#x548C;&#x5BA2;&#x5385;&#x8BBE;&#x5907;&#x63D0;&#x4F9B;&#x7279;&#x5B9A;&#x7684;&#x6388;&#x6743;&#x6D41;&#x7A0B;&#x3002;</p><p>&#x2003;&#x2003;&#x5B83;&#x7684;&#x6700;&#x7EC8;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x9881;&#x53D1;&#x4E00;&#x4E2A;&#x6709;&#x65F6;&#x6548;&#x6027;&#x7684;&#x4EE4;&#x724C; token&#x3002;&#x4F7F;&#x5F97;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x8BE5;&#x4EE4;&#x724C;&#x83B7;&#x53D6;&#x76F8;&#x5173;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;&#x573A;&#x666F;&#x5C31;&#x662F;&#x7B2C;&#x4E09;&#x65B9;&#x767B;&#x5F55;&#xFF0C;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5F53;&#x6211;&#x521D;&#x6B21;&#x767B;&#x9646;&#x6398;&#x91D1;&#x793E;&#x533A;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x8D26;&#x53F7;&#xFF0C;&#x4F46;&#x6211;&#x53C8;&#x4E0D;&#x60F3;&#x76F4;&#x63A5;&#x5728;&#x91CC;&#x9762;&#x6CE8;&#x518C;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x6709;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;&#x8D26;&#x6237;&#x767B;&#x9646;&#x65B9;&#x6848;&#xFF0C;&#x6BD4;&#x5982;github&#xFF0C;&#x901A;&#x8FC7;&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;&#x6388;&#x6743;&#xFF08;token&#xFF09;&#x7684;&#x65B9;&#x6848;&#x767B;&#x9646;&#x8BE5;&#x9875;&#x9762;&#xFF08;&#x867D;&#x7136;&#x4E5F;&#x53EF;&#x80FD;&#x8981;&#x7ED1;&#x5B9A;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF09;&#x3002;&#x4E4B;&#x540E;&#x518D;&#x767B;&#x9646;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x5FC5;&#x8F93;&#x5165;&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#xFF0C;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x7B2C;&#x4E09;&#x65B9;&#x767B;&#x9646;&#x9014;&#x5F84;&#x5373;&#x53EF;&#x767B;&#x9646;&#xFF08;&#x524D;&#x63D0;&#x662F;&#x4F60;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x8D26;&#x53F7;&#x4E5F;&#x5904;&#x5728;&#x767B;&#x9646;&#x6001;&#xFF09;&#x3002;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/third-part.jpg" alt=""></p><p>&#x2003;&#x2003;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x6743;&#x9650;&#x53C8;&#x662F;&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x548C;&#x4F20;&#x9012;&#x7684;&#x5462;&#xFF1F;&#x53EF;&#x4EE5;&#x89C1;&#x4E0B;&#x56FE;&#xFF1A;</p><p><img src="/2019/11/17/Èâ¥ÊùÉ‰∫å‰∏â‰∫ã/process.jpg" alt=""></p><p>&#x2003;&#x2003;Resource Owner&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x6398;&#x91D1;&#x793E;&#x533A;&#x5E73;&#x53F0;&#xFF0C;Client&#x662F;&#x6211;&#x4EEC;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5145;&#x5F53;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EBA;&#x7684;&#x89D2;&#x8272;&#x3002;Authorization Server&#x662F;github&#x7684;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x6240;&#x4EE5;&#x7EFC;&#x5408;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x6398;&#x91D1;&#x7ECF;&#x6211;&#x4EEC;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x5411;github&#x7533;&#x8BF7;&#x4E86;&#x4E00;&#x4E2A;&#x77ED;&#x65F6;Token&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5230;&#x81EA;&#x8EAB;&#x7684;&#x670D;&#x52A1;&#x91CC;&#x6CE8;&#x518C;&#x6784;&#x5EFA;&#x8054;&#x7CFB;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Áü•Êôì‰∫ãÂä°ÁöÑÂèëÂ±ïÔºåÊâçËÉΩÁêÜËß£ÂÖ∂Êú¨Ë¥®„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Èâ¥ÊùÉ" scheme="https://chrisdeo.github.io/tags/%E9%89%B4%E6%9D%83/"/>
    
      <category term="JWT" scheme="https://chrisdeo.github.io/tags/JWT/"/>
    
  </entry>
  
  <entry>
    <title>ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè</title>
    <link href="https://chrisdeo.github.io/2019/11/17/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E4%B8%8E%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chrisdeo.github.io/2019/11/17/ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè/</id>
    <published>2019-11-17T05:52:05.000Z</published>
    <updated>2019-11-18T14:49:56.020Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x6700;&#x8FD1;&#x590D;&#x76D8;&#x4E86;&#x4E00;&#x4E2A;&#x540C;&#x5C42;&#x7EA7;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;React Node&#x5982;&#x4F55;&#x8BBF;&#x95EE;&#x76F8;&#x4E92;&#x4F4D;&#x7F6E;&#x5E76;&#x53D1;&#x751F;&#x5173;&#x8054;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9650;&#x5236;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;Redux&#x3001;Context&#x3001;Lifting State Up&#x2026;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x5F53;&#x65F6;&#x7ED9;&#x51FA;&#x7684;&#x65B9;&#x6848;&#x662F;&#x901A;&#x8FC7;<code>ref</code>&#x53BB;&#x8BBF;&#x95EE;&#x4E24;&#x4E2A;<code>component</code>&#xFF0C;&#x867D;&#x7136;&#x6B64;&#x65F6;<code>ref</code>&#x6307;&#x5B9A;&#x7684;&#x662F;&#x4E00;&#x4E2A;component instance&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x5B9E;&#x4F8B;&#x5185;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x53BB;&#x8FD4;&#x56DE;&#x5177;&#x4F53;&#x5B9A;&#x4F4D;&#x53C2;&#x6570;&#xFF08;&#x7F6E;&#x4E8E;&#x7EC4;&#x4EF6;&#x7684;<code>state</code>&#x4E2D;&#xFF09;&#x3002;&#x8FD9;&#x6837;&#x5904;&#x7406;&#x867D;&#x7136;&#x80FD;&#x62FF;&#x5230;&#x5B9A;&#x4F4D;&#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x81F4;&#x547D;&#x95EE;&#x9898;&#xFF1A;<strong>&#x65E0;&#x6CD5;&#x52A8;&#x6001;&#x5173;&#x8054;&#xFF0C;&#x4EA6;&#x6216;&#x8005;&#x8BF4;&#x6CA1;&#x6709;&#x901A;&#x77E5;&#x673A;&#x5236;</strong>&#x3002;</p><p>&#x2003;&#x2003;&#x5982;&#x679C;&#x662F;<a href="https://reactjs.org/docs/lifting-state-up.html#lifting-state-up" target="_blank" rel="noopener">Lifting State Up</a>&#x65B9;&#x6848;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x7236;&#x7EA7;&#x7684;<code>state</code>&#x4E2D;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x53D8;&#x91CF;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x4E24;&#x4E2A;&#x7EC4;&#x4EF6;&#x5B9A;&#x4F4D;&#x4FE1;&#x606F;&#x7684;&#x4E00;&#x65B9;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x7236;&#x5C42;&#x7684;<code>setState</code>&#x6CE8;&#x5165;&#x7ED9;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x5728;&#x62D6;&#x52A8;&#x6216;&#x8005;&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x7684;&#x56DE;&#x8C03;&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x6539;&#x53D8;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x540C;&#x65F6;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5C5E;&#x6027;&#x4F20;&#x7ED9;&#x53E6;&#x4E00;&#x4E2A;&#x5B50;&#x7EC4;&#x4EF6;&#x7528;&#x4E8E;&#x4E00;&#x4E9B;&#x4F4D;&#x7F6E;&#x5173;&#x8054;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#xFF08;&#x5B8C;&#x6210;&#x5173;&#x8054;&#x52A8;&#x4F5C;&#xFF09;&#x3002;</p><p>&#x2003;&#x2003;&#x4E14;&#x4E0D;&#x8BF4;&#x5F53;&#x65F6;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#xFF0C;&#x73B0;&#x5728;&#x56DE;&#x5934;&#x770B;&#x6765;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E5F;&#x5B58;&#x5728;&#x79CD;&#x79CD;&#x95EE;&#x9898;&#x2026;why?&#x5982;&#x679C;&#x8BF4;&#x6211;&#x4EEC;&#x7684;&#x4E24;&#x4E2A;&#x5B50;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x8FD8;&#x5D4C;&#x5957;&#x5F88;&#x591A;&#x5C42;&#x624D;&#x5230;&#x5B9E;&#x9645;&#x9700;&#x8981;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;DOM&#xFF0C;&#x90A3;&#x5E94;&#x7528;&#x4E2D;&#x4E0D;&#x65AD;&#x7684;<code>props</code>&#x4E0B;&#x4F20;&#x5C31;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x6076;&#x5FC3;&#x4EBA;&#x4E86;&#xFF0C;&#x53E6;&#x5916;&#x62D3;&#x5C55;&#x6027;&#x4E5F;&#x4E0D;&#x59A5;&#x3002;&#x73B0;&#x5728;&#x662F;2&#x4E2A;&#x7EC4;&#x4EF6;&#x5173;&#x8054;&#xFF0C;&#x90A3;&#x5982;&#x679C;&#x5C06;&#x6765;&#x6211;&#x6709;N&#x4E2A;&#x7EC4;&#x4EF6;&#x901A;&#x4FE1;&#x903B;&#x8F91;&#xFF0C;&#x90A3;&#x7EF4;&#x62A4;&#x4E0D;&#x4E5F;boom&#x4E86;&#x5417;&#xFF1F;&#x6240;&#x4EE5;&#x6211;&#x8FD1;&#x65E5;&#x601D;&#x7D22;&#x4E86;&#x4E00;&#x6CE2;&#xFF0C;&#x4F30;&#x8BA1;&#x5BF9;&#x65B9;&#x771F;&#x5B9E;&#x610F;&#x56FE;&#x662F;&#x60F3;&#x8003;&#x5BDF;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x4E1C;&#x897F;&#xFF08;&#x644A;&#x624B;</p><h2 id="&#x53D1;&#x5E03;-&#x8BA2;&#x9605;"><a href="#&#x53D1;&#x5E03;-&#x8BA2;&#x9605;" class="headerlink" title="&#x53D1;&#x5E03;-&#x8BA2;&#x9605;"></a>&#x53D1;&#x5E03;-&#x8BA2;&#x9605;</h2><p>&#x2003;&#x2003;&#x5F53;&#x6211;&#x4EEC;&#x8F6C;&#x6362;&#x601D;&#x8DEF;&#xFF0C;&#x91C7;&#x7528;&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#xFF0C;&#x4F3C;&#x4E4E;&#x4E00;&#x5207;&#x90FD;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x4E86;&#x8D77;&#x6765;&#x2026;&#x5B50;&#x7EC4;&#x4EF6;&#x4E0D;&#x7BA1;&#x5D4C;&#x5957;&#x5728;&#x5565;&#x4F4D;&#x7F6E;&#xFF0C;&#x6211;&#x53EA;&#x9700;&#x8981;&#x5148;&#x5728;&#x7236;&#x7EA7;&#x8BA2;&#x9605;&#x5BF9;&#x5E94;&#x4E8B;&#x4EF6;&#xFF08;&#x56DE;&#x8C03;&#x540E;&#x518D;&#x6839;&#x636E;&#x903B;&#x8F91;&#x7F6E;<code>state</code>&#xFF09;&#xFF0C;&#x5B50;&#x7EC4;&#x4EF6;&#x5728;&#x76F8;&#x5E94;&#x76D1;&#x542C;&#x56DE;&#x8C03;&#x4E2D;&#x4E3B;&#x52A8;<code>emit</code>&#x901A;&#x77E5;&#x5373;&#x53EF;&#xFF0C;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x7528;<code>events</code>&#x7684;&#x5E93;&#xFF08;<a href="https://github.com/Gozala/events" target="_blank" rel="noopener">&#x5B9E;&#x73B0;Node&#x7248;</a> or <a href="https://github.com/facebook/emitter" target="_blank" rel="noopener">Facebook&#x5B9E;&#x73B0;&#x7248;</a>&#xFF09;&#xFF0C;&#x7F57;&#x5217;&#x7684;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x4E3A;&#x7C7B;&#x4F3C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x73AF;&#x5883;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x7684;&#x6A21;&#x5757;&#x3002;</p><p>&#x2003;&#x2003;&#x57FA;&#x672C;&#x6A21;&#x578B;&#x5982;&#x4E0B;&#xFF1A;</p><p><img src="/2019/11/17/ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè/sub.jpg" alt=""></p><p>&#x2003;&#x2003;<code>events</code>&#x4E2D;&#x7684;<code>EventEmitter</code>&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E0A;&#x56FE;&#x7EC4;&#x7EC7;&#x7684;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>on</code>&#x65B9;&#x6CD5;&#x76F8;&#x5F53;&#x4E8E;&#x5411;&#x4E8B;&#x4EF6;&#x4E2D;&#x5FC3;&#x53D1;&#x8D77;&#x5BF9;&#x5BF9;&#x5E94;&#x4E8B;&#x4EF6;&#x7684;&#x8BA2;&#x9605;&#xFF0C;<code>emit</code>&#x65B9;&#x6CD5;&#x5219;&#x76F8;&#x5F53;&#x4E8E;&#x53D1;&#x5E03;&#x8005;&#x89E6;&#x53D1;&#x6307;&#x5B9A;&#x4E8B;&#x4EF6;&#x5E76;&#x901A;&#x77E5;&#x4E8B;&#x4EF6;&#x4E2D;&#x5FC3;&#x3002;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x5927;&#x81F4;&#x4F7F;&#x7528;&#x6D41;&#x7A0B;&#x662F;&#xFF1A;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x7528;&#x4E8E;&#x5BFC;&#x51FA;<code>EventEmitter</code>&#x5B9E;&#x4F8B;&#xFF1B;&#x5728;&#x9700;&#x8981;&#x7684;&#x7EC4;&#x4EF6;&#x5185;&#x5F15;&#x5165;&#x8BE5;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FDB;&#x884C;&#x5BF9;&#x5E94;&#x7684;&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#xFF1B;&#x7ED3;&#x5408;Redux&#x7684;<code>dispatch</code>&#x8FDB;&#x884C;&#x72B6;&#x6001;&#x6D41;&#x8F6C;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// emitter.js</span></span><br><span class="line"><span class="keyword">import</span> { EventEmitter } <span class="keyword">from</span> <span class="string">&apos;events&apos;</span>;</span><br><span class="line"><span class="keyword">const</span> Emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Emitter;</span><br><span class="line"></span><br><span class="line"><span class="comment">// component xx.js</span></span><br><span class="line"><span class="keyword">import</span> Emitter <span class="keyword">from</span> <span class="string">&apos;@utils/emitter&apos;</span>;</span><br><span class="line">Emitter.on(<span class="string">&apos;xx&apos;</span>, () =&gt; {});</span><br><span class="line"></span><br><span class="line"><span class="comment">// component yy.js</span></span><br><span class="line"><span class="keyword">import</span> Emitter <span class="keyword">from</span> <span class="string">&apos;@utils/emitter&apos;</span>;</span><br><span class="line">Emitter.emit(<span class="string">&apos;xx&apos;</span>, ...args); <span class="comment">// &#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x7684;&#x56DE;&#x8C03; &#x4F20;&#x5165;&#x53C2;&#x6570;</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E5F;&#x5F88;&#x5BB9;&#x6613;&#x8BA9;&#x6211;&#x4EEC;&#x60F3;&#x5230;&#x4E1A;&#x5185;&#x7684;&#x5176;&#x4ED6;&#x4E24;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;Vue&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#xFF0C;&#x4EE5;&#x53CA;Mobx&#x7684;&#x72B6;&#x6001;&#x8FFD;&#x8E2A;&#x3002;&#x4E24;&#x8005;&#x7684;&#x67B6;&#x6784;&#x56FE;&#x5982;&#x4E0B;&#xFF0C;&#x4E0D;&#x591A;&#x8D58;&#x8FF0;&#x3002;</p><p><img src="/2019/11/17/ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè/./vue.jpg" style="width: 35%; margin-bottom: 0"></p><div style="display: flex; justify-content:center;">(Vue &#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x673A;&#x5236;)</div><br><img src="/2019/11/17/ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè/./mobx.jpg" style="width: 80%; margin-bottom: 0"><br><div style="display: flex; justify-content:center;">(Mobx &#x6570;&#x636E;&#x6D41;)</div><h2 id="&#x89C2;&#x5BDF;&#x8005;"><a href="#&#x89C2;&#x5BDF;&#x8005;" class="headerlink" title="&#x89C2;&#x5BDF;&#x8005;"></a>&#x89C2;&#x5BDF;&#x8005;</h2><p>&#x2003;&#x2003;&#x7F51;&#x4E0A;&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x5C06;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x548C;&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x6DF7;&#x4E3A;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#x8BA8;&#x8BBA;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x8FD9;&#x4E2A;&#x5E7F;&#x4E49;&#x6982;&#x5FF5;&#x4E0B;&#x7684;&#x4E00;&#x79CD;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x5DEE;&#x522B;&#x5728;&#x4E8E;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x4EC5;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#x548C;&#x4E3B;&#x9898;&#x4E4B;&#x95F4;&#x7684;<strong>&#x76F4;&#x63A5;</strong>&#x8054;&#x7CFB;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p><p><img src="/2019/11/17/ÂèëÂ∏ÉËÆ¢ÈòÖ‰∏éËßÇÂØüËÄÖÊ®°Âºè/subscribe.jpg" alt=""></p><p>&#x2003;&#x2003;&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x4E0E;&#x4E4B;&#x76F8;&#x6BD4;&#xFF0C;&#x5728;&#x8FD9;&#x4E4B;&#x95F4;&#x8FD8;&#x591A;&#x4E86;&#x4E00;&#x4E2A;&#x201C;&#x4E2D;&#x95F4;&#x4EBA;&#x201D;&#x7684;&#x89D2;&#x8272;&#xFF08;&#x89C1;&#x524D;&#x6587;&#x56FE;&#xFF09;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x597D;&#x5904;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x5C31;&#x662F;<strong>&#x89E3;&#x8026;</strong>&#xFF0C;&#x8BD5;&#x60F3;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4E2D;&#x95F4;&#x65B9;&#x7EDF;&#x7B79;&#x5904;&#x7406;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x7EC4;&#x4EF6;A&#x548C;&#x7EC4;&#x4EF6;B&#x5C31;&#x4F1A;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x76F4;&#x63A5;&#x5B58;&#x5728;&#x5BF9;&#x5F7C;&#x6B64;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x5F53;&#x573A;&#x666F;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#x65F6;&#x4F1A;&#x51FA;&#x73B0;&#x5927;&#x91CF;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x9020;&#x6210;&#x903B;&#x8F91;&#x5173;&#x8054;&#x6DF7;&#x4E71;&#x3002;&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5C06;&#x4E8B;&#x4EF6;&#x901A;&#x8BAF;&#x5173;&#x8054;&#x5230;&#x4E8B;&#x4EF6;&#x4E2D;&#x5FC3;&#x4E00;&#x65B9;&#x5373;&#x53EF;&#x3002;&#x540E;&#x7EED;&#x7684;&#x62D3;&#x5C55;&#x4E5F;&#x5C06;&#x53D8;&#x5F97;&#x6E05;&#x6670;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;ÊúÄËøëÂ§çÁõò‰∫Ü‰∏Ä‰∏™ÂêåÂ±ÇÁ∫ß‰∏§‰∏™‰∏çÂêåReact NodeÂ¶Ç‰ΩïËÆøÈóÆÁõ∏‰∫í‰ΩçÁΩÆÂπ∂ÂèëÁîüÂÖ≥ËÅîÁöÑÈóÆÈ¢òÔºåÈôêÂà∂‰∏çËÉΩ‰ΩøÁî®Redux„ÄÅContext„ÄÅLifting State Up‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ËÆæËÆ°Ê®°Âºè" scheme="https://chrisdeo.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Êó•Â∏∏ÂøÉÂæóÊâãËÆ∞</title>
    <link href="https://chrisdeo.github.io/2019/11/14/%E6%97%A5%E5%B8%B8%E5%BF%83%E5%BE%97%E6%89%8B%E8%AE%B0/"/>
    <id>https://chrisdeo.github.io/2019/11/14/Êó•Â∏∏ÂøÉÂæóÊâãËÆ∞/</id>
    <published>2019-11-14T14:04:16.000Z</published>
    <updated>2019-12-04T15:39:08.007Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x5728;&#x65E5;&#x5E38;&#x7684;&#x81EA;&#x6211;&#x63D0;&#x5347;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x603B;&#x4F1A;&#x6709;&#x4E9B;&#x788E;&#x7247;&#x5316;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x5728;&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x7684;&#x79EF;&#x7D2F;&#x548C;&#x6C89;&#x6DC0;&#x540E;&#x624D;&#x80FD;&#x6C47;&#x603B;&#x51FA;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x65B9;&#x6CD5;&#x8BBA;&#x3002;&#x56FA;&#x6709;&#x6B64;&#x6587;&#x4E0D;&#x5B9A;&#x671F;&#x66F4;&#x65B0;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x6C47;&#x603B;&#x7ED3;&#x8BBA;&#x3002;</p></blockquote><a id="more"></a><h3 id="js&#x57FA;&#x7840;"><a href="#js&#x57FA;&#x7840;" class="headerlink" title="js&#x57FA;&#x7840;"></a>js&#x57FA;&#x7840;</h3><ol><li><p>&#x6211;&#x4EEC;&#x58F0;&#x660E;&#x7684;<code>function</code>&#x5176;&#x5B9E;&#x7B49;&#x4EF7;&#x4E8E;<code>Function</code>&#x6784;&#x9020;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x6240;&#x4EE5;&#x5982;<code>function Person(){}</code>&#x6709;<code>Person.__proto__ === Function.prototype</code>&#x4E3A;<code>true</code>&#x3002;</p></li><li><p>&#x4E00;&#x4E2A;<code>async function</code>&#x5728;<code>EL</code>&#x4E2D;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#xFF1A;&#x5728;&#x5185;&#x90E8;&#x7684;<code>await</code>&#x7B49;&#x5230;&#x8FD4;&#x56DE;&#x503C;&#x524D;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x4E3A;<code>Promise</code>&#x4E2D;&#x7684;&#x58F0;&#x660E;&#x5757;&#xFF0C;&#x662F;&#x540C;&#x6B65;&#x7684;&#x3002;<code>await</code>&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x4E2A;<code>Promise.resolve()</code>&#xFF0C;&#x5176;&#x4E2D;&#x82E5;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x6CA1;&#x6709;<code>return</code>&#x524D;&#x7684;&#x5185;&#x5BB9;&#x4E5F;&#x662F;&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684;&#x3002;&#x6700;&#x540E;<code>return</code>&#x7684;&#x5185;&#x5BB9;&#x548C;<code>await</code>&#x540E;&#x7684;&#x5185;&#x5BB9;&#x7B49;&#x4EF7;&#x4E8E;<code>resolve</code>&#x540E;<code>then</code>&#x65B9;&#x6CD5;&#x5BF9;&#x5E94;&#x7684;&#x56DE;&#x8C03;&#xFF08;micro task&#xFF09;&#x3002;</p></li><li><p>Promise&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x5373;&#x4FBF;<code>resolve</code>&#x4E86;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x4EE3;&#x7801;&#x4F9D;&#x65E7;&#x4F1A;&#x6267;&#x884C;&#xFF08;&#x6B63;&#x5E38;&#x5165;&#x6808;&#xFF09;&#x3002;&#x5BF9;&#x4E8E;<code>resolve</code>&#x56DE;&#x8C03;&#x7684;&#x8FD9;&#x4E00;&#x53E5;&#x6765;&#x8BB2;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x5F02;&#x6B65;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x540C;&#x6B65;&#x4F1A;&#x5148;&#x6267;&#x884C;&#xFF0C;e.g.</p></li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">resolve(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">}).then(<span class="built_in">console</span>.log);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">p.then(<span class="built_in">console</span>.log);</span><br><span class="line"><span class="comment">// 1 3 6 2</span></span><br></pre></td></tr></tbody></table></figure><ol start="4"><li><p>&#x6211;&#x4EEC;&#x77E5;&#x9053;js&#x7684;&#x6CA1;&#x6709;&#x6240;&#x8C13;&#x6307;&#x9488;&#x4E00;&#x8BF4;&#xFF0C;&#x5373;&#x4FBF;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x4E5F;&#x662F;&#x5C06;&#x5730;&#x5740;&#x8D4B;&#x503C;&#x7ED9;&#x6211;&#x4EEC;&#x7684;&#x53D8;&#x91CF;&#x3002;&#x6240;&#x4EE5;&#x7C7B;&#x4F3C;<code>var a = b = {}</code>&#x8FD9;&#x79CD;&#xFF0C;&#x5176;&#x5B9E;&#x53EA;&#x662F;&#x5C06;&#x4E24;&#x8005;&#x90FD;&#x5B58;&#x50A8;&#x4E86;&#x8BE5;&#x5BF9;&#x8C61;&#x5730;&#x5740;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x4F46;&#x662F;<code>a</code>&#x4E0E;<code>b</code>&#x95F4;&#x5E76;&#x6CA1;&#x6709;&#x5173;&#x8054;&#x5173;&#x7CFB;&#xFF08;&#x5B83;&#x4EEC;&#x53EA;&#x662F;&#x5B58;&#x4E86;&#x540C;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#xFF09;&#x3002;&#x90A3;&#x4E48;&#x5F53;&#x6211;&#x4EEC;&#x518D;&#x6B21;&#x4FEE;&#x6539;<code>a</code>&#x5B58;&#x50A8;&#x522B;&#x7684;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x6BD4;&#x5982;<code>a = {name&#xFF1A; &apos;Leo&apos;}</code>&#xFF0C;&#x6B64;&#x65F6;<code>b</code>&#x8FD8;&#x662F;&#x8001;&#x6837;&#x5B50;<code>{}</code>&#x3002;</p></li><li><p>js&#x7684;&#x52A8;&#x6001;&#x6027;&#xFF0C;&#x5C31;&#x6211;&#x4E2A;&#x4EBA;&#x76F4;&#x89C2;&#x611F;&#x53D7;&#x800C;&#x8A00;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x5728;&#x53D8;&#x91CF;&#x3001;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x7684;&#x63D0;&#x5347;&#x4E0A;&#xFF0C;&#x89E3;&#x6790;&#x5F15;&#x64CE;&#x4F1A;&#x9884;&#x5148;&#x786E;&#x8BA4;&#x76F8;&#x4E92;&#x7684;&#x5173;&#x7CFB;&#xFF08;LHS&#x3001;RHS&#xFF09;&#x3002;</p></li><li><p>&#x6267;&#x884C;&#x73AF;&#x5883;&#x53CA;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x8FC7;&#x53BB;&#x7406;&#x89E3;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x5C42;&#x5957;&#x4E00;&#x5C42;&#xFF0C;&#x9010;&#x5C42;&#x5F80;&#x5916;&#x5BFB;&#x627E;&#xFF0C;&#x53D6;&#x6700;&#x8FD1;&#x4E00;&#x5C42;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x591F;&#x7528;&#x4E86;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x4E0D;&#x591F;&#x7CFB;&#x7EDF;&#x3002;</p></li></ol><p>&#x2003;&#x2003;&#x6839;&#x636E;&#x7EA2;&#x5B9D;&#x4E66;&#x7684;&#x63CF;&#x8FF0;&#xFF1A;&#x6211;&#x4EEC;&#x8FD0;&#x884C;JS&#x7684;&#x73AF;&#x5883;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x6267;&#x884C;&#x73AF;&#x5883;&#xFF08;&#x6D4F;&#x89C8;&#x5668;&#x7684;<code>window</code>&#x3001;Node&#x7684;<code>global</code>&#xFF09;&#xFF0C;&#x53E6;&#x5916;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x6267;&#x884C;&#x73AF;&#x5883;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x6D41;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x73AF;&#x5883;&#x4F1A;&#x88AB;&#x63A8;&#x5165;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x6808;&#x4E2D;&#xFF0C;&#x5728;&#x51FD;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x6808;&#x4F1A;&#x5C06;&#x8BE5;&#x63A8;&#x5165;&#x73AF;&#x5883;&#x5F39;&#x51FA;&#xFF0C;&#x5C06;&#x63A7;&#x5236;&#x6743;&#x8FD4;&#x56DE;&#x7ED9;&#x4E4B;&#x524D;&#x7684;&#x6267;&#x884C;&#x73AF;&#x5883;&#x3002;&#x5F53;&#x4EE3;&#x7801;&#x5728;&#x4E00;&#x4E2A;&#x73AF;&#x5883;&#x4E2D;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x4F1A;&#x521B;&#x5EFA;&#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#xFF0C;&#x5B83;&#x4FDD;&#x8BC1;&#x4E86;&#x5BF9;&#x6267;&#x884C;&#x73AF;&#x5883;&#x4E2D;&#x6709;&#x6743;&#x8BBF;&#x95EE;&#x7684;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;&#x7684;&#x8BBF;&#x95EE;&#x6709;&#x5E8F;&#x6027;&#x3002;&#x800C;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x7684;&#x524D;&#x7AEF;&#xFF0C;&#x59CB;&#x7EC8;&#x90FD;&#x662F;&#x5F53;&#x524D;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x6240;&#x5728;&#x73AF;&#x5883;&#x7684;<strong>&#x53D8;&#x91CF;&#x5BF9;&#x8C61;</strong>&#x3002;&#x90A3;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x5F53;&#x73AF;&#x5883;&#x662F;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;&#x6D3B;&#x52A8;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#xFF08;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x5165;&#x53C2;&#x90A3;&#x4E00;&#x5757;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x521D;&#x59CB;&#x65F6;&#x662F;&#x6211;&#x4EEC;&#x7684;<code>arguments</code>&#x5BF9;&#x8C61;&#xFF09;&#x3002;&#x7136;&#x540E;&#x518D;&#x9010;&#x4E2A;&#x53BB;&#x4E0B;&#x4E2A;&#x5305;&#x542B;&#x73AF;&#x5883;&#x641C;&#x7D22;&#xFF0C;&#x76F4;&#x5230;&#x5168;&#x5C40;&#x6267;&#x884C;&#x73AF;&#x5883;&#xFF08;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF09;&#x3002;</p><ol start="7"><li>&#x63A5;&#x4E0A;&#x9762;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4E3E;2&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayMyName</span>(<span class="params">name</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&apos;Leo&apos;</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">name</span>(<span class="params"></span>) </span>{</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">}</span><br><span class="line">sayMyName(<span class="string">&apos;Tony&apos;</span>);</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x9996;&#x5148;&#x5728;&#x51FD;&#x6570;&#x6267;&#x884C;&#x524D;&#xFF0C;&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#x90FD;&#x4F1A;&#x88AB;&#x4F18;&#x5148;&#x5904;&#x7406;&#xFF1B;&#x6267;&#x884C;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x6D3B;&#x52A8;&#x5BF9;&#x8C61;<code>AO</code>&#x88AB;&#x521B;&#x5EFA;&#x3002;&#x6B64;&#x65F6;&#x6D3B;&#x52A8;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;<code>name</code>&#x88AB;&#x4F20;&#x5165;&#x7684;<code>Tony</code>&#x8D4B;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x5185;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x63D0;&#x5347;&#xFF0C;<strong>&#x51FD;&#x6570;&#x58F0;&#x660E;&#x63D0;&#x5347;&#x4F18;&#x5148;&#x7EA7;&#x6700;&#x9AD8;&#xFF0C;&#x9AD8;&#x4E8E;AO&#x548C;&#x5185;&#x90E8;&#x53D8;&#x91CF;&#x63D0;&#x5347;</strong>&#xFF0C;&#x4E8E;&#x662F;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x8F93;&#x51FA;<code>function name() {}</code>&#xFF1B;&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E2A;&#x89C4;&#x5219;&#x662F;<strong>&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x91CD;&#x590D;&#x58F0;&#x660E;&#xFF0C;&#x4F1A;&#x9759;&#x9ED8;&#x5931;&#x8D25;</strong>&#xFF1B;&#x63A5;&#x7740;&#x7531;&#x4E8E;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x88AB;&#x63D0;&#x5347;&#xFF0C;<code>name</code>&#x88AB;&#x8D4B;&#x503C;&#x4E3A;<code>Leo</code>&#x7136;&#x540E;&#x8F93;&#x51FA;<code>Leo</code>&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8F93;&#x51FA;&#x4E2D;&#x95F4;&#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x56E0;&#x7D20;&#xFF0C;&#x901A;&#x8F93;&#x51FA;<code>Leo</code>&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">sayMyName</span>(<span class="params">name</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(name);</span><br><span class="line">        <span class="keyword">var</span> name = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="built_in">console</span>.log(name);</span><br><span class="line">        }</span><br><span class="line">        name();</span><br><span class="line">    }</span><br><span class="line">sayMyName(<span class="string">&apos;Leo&apos;</span>);</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6B64;&#x5904;&#x53D8;&#x91CF;&#x63D0;&#x5347;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;AO&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x58F0;&#x660E;&#x7684;<code>name</code>&#xFF0C;&#x6240;&#x4EE5;&#x9759;&#x9ED8;&#x5931;&#x8D25;&#x4E0D;&#x5F71;&#x54CD;&#x539F;&#x503C;<code>Leo</code>&#xFF0C;&#x9042;&#x5148;&#x8F93;&#x51FA;<code>Leo</code>&#xFF0C;&#x4E4B;&#x540E;<code>name</code>&#x88AB;<code>function () {}</code>&#x8986;&#x76D6;&#xFF0C;&#x6700;&#x7EC8;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x6839;&#x636E;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x67E5;&#x627E;&#xFF0C;&#x8F93;&#x51FA;<code>function () {//...}</code>&#x3002; </p><ol start="8"><li>&#x518D;&#x4E3E;&#x4E24;&#x4E2A;&#x6BD4;&#x8F83;&#x6709;&#x610F;&#x601D;&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x67E5;&#x627E;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>{ b = <span class="number">2</span>; <span class="built_in">console</span>.log(b);})()</span><br><span class="line"><span class="comment">// &#x192;unction b() { b = 2; console.log(b);}</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>{</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">}</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{ <span class="keyword">var</span> a = <span class="number">20</span>; test() })()</span><br><span class="line"><span class="comment">// 10</span></span><br></pre></td></tr></tbody></table></figure><h3 id="React"><a href="#React" class="headerlink" title="React"></a>React</h3><ol><li><p><code>ref</code>&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x4F5C;&#x7528;&#x5728;<code>HTML element</code>&#x4E0A;&#xFF0C;&#x4EA6;&#x53EF;&#x4F5C;&#x7528;&#x5728;&#x6211;&#x4EEC;&#x7684;<code>component</code>&#x4E0A;&#xFF1B;</p></li><li><p><code>React.createRef()</code>&#x5728;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x6CE8;&#x610F;&#x53EA;&#x80FD;&#x4F5C;&#x7528;&#x4E8E;&#x7C7B;<code>class</code>&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#x4F1A;&#x5931;&#x6548;&#x62A5;<code>warning</code>&#xFF1A;</p></li></ol><p><img src="/2019/11/14/Êó•Â∏∏ÂøÉÂæóÊâãËÆ∞/refClass.jpg" alt=""></p><ol start="3"><li><code>React.forwardRef</code>&#x9002;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x7EC4;&#x4EF6;&#xFF0C;&#x4ED6;&#x63A5;&#x6536;&#x4E00;&#x4E2A;<code>render function</code>&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;React&#x7EC4;&#x4EF6;&#xFF08;HOC&#xFF09;&#xFF0C;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x5728;<code>ref</code>&#x9700;&#x8981;&#x5411;&#x5B50;&#x7EC4;&#x4EF6;&#x5185;&#x5D4C;&#x5957;&#x7684;&#x5143;&#x7D20;&#x4F20;&#x9012;&#x7684;&#x60C5;&#x666F;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x5B98;&#x65B9;&#x6587;&#x6863; DEMO</span></span><br><span class="line"><span class="keyword">const</span> FancyButton = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (</span><br><span class="line">  &lt;button ref={ref} className=<span class="string">&quot;FancyButton&quot;</span>&gt;</span><br><span class="line">    {props.children}</span><br><span class="line">  &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ You can now get a ref directly to the DOM button:</span></span><br><span class="line"><span class="regexp">const ref = React.createRef();</span></span><br><span class="line"><span class="regexp">&lt;FancyButton ref={ref}&gt;Click me!&lt;/</span>FancyButton&gt;;</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li><code>Reconciliation</code>&#x662F;React&#x4E2D;&#x5904;&#x7406;&#x6E32;&#x67D3;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5B83;&#x901A;&#x8FC7;&#x51E0;&#x79CD;&#x7B56;&#x7565;&#x6210;&#x529F;&#x5C06;&#x539F;&#x672C;&#x9700;&#x8981;&#x6D88;&#x8017; O(n3) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;DOM&#x6811;&#x8F6C;&#x5316;&#x5DE5;&#x4F5C;&#x4F18;&#x5316;&#x5230; O(n)&#x3002;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x79F0;&#x5176;&#x662F;&#x4E00;&#x79CD;&#x542F;&#x53D1;&#x5F0F;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x4E8E;&#x4E24;&#x4E2A;&#x524D;&#x63D0;&#xFF08;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x573A;&#x666F;&#x7B26;&#x5408;&#xFF09;&#xFF1A;</li></ol><ul><li><p>&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x7D20;&#x5C06;&#x4F1A;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x6811;&#x578B;&#x7ED3;&#x6784;</p></li><li><p>&#x5F00;&#x53D1;&#x8005;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<code>key</code>&#x544A;&#x77E5;&#x8C03;&#x548C;&#x8FC7;&#x7A0B;&#x54EA;&#x4E9B;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x4FDD;&#x7559;</p></li></ul><p>&#x5E38;&#x8BF4;&#x7684;Diffing&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x6982;&#x62EC;&#x6210;&#x4E0B;&#x8FF0;&#x51E0;&#x79CD;&#x7B56;&#x7565;&#xFF1A;</p><ul><li>&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x7D20;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x539F;&#x751F;DOM&#x3001;React Component&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x4EE5;&#x8BE5;&#x53D8;&#x52A8;&#x8282;&#x70B9;&#x4E3A;&#x6839;&#x7684;&#x6811;&#x5C06;&#x88AB;&#x5168;&#x90E8;&#x9500;&#x6BC1;&#x5E76;&#x91CD;&#x5EFA;&#x65B0;&#x7684;&#x6811;&#x578B;&#x7ED3;&#x6784;&#x3002;</li><li>&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x7684;DOM&#x8282;&#x70B9;&#xFF0C;React&#x4F1A;&#x9010;&#x6B65;&#x6BD4;&#x8F83;&#x5176;&#x5C5E;&#x6027;&#x3001;&#x6587;&#x672C;&#x5DEE;&#x5F02;&#xFF0C;&#x4EC5;&#x66F4;&#x65B0;&#x6709;&#x5DEE;&#x5F02;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x9500;&#x6BC1;&#x4E00;&#x6574;&#x90E8;&#x5206;&#x3002;</li><li>&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x7684;React Component&#x8282;&#x70B9;&#xFF0C;&#x5F53;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5176;&#x5B9E;&#x4F8B;&#x4F1A;&#x4FDD;&#x7559;&#xFF0C;React&#x901A;&#x8FC7;<code>componentWillReceiveProps</code>&#x3001;<code>componentWillUpdate</code>&#x66F4;&#x65B0;&#x5D4C;&#x5957;&#x7684;&#x5B50;&#x5185;&#x5BB9;&#xFF0C;&#x7136;&#x540E;&#x5728;<code>render</code>&#x4E2D;&#x53C8;&#x5BF9;&#x5B50;&#x5185;&#x5BB9;&#x9012;&#x5F52;&#x5E94;&#x7528;DIFF&#x3002;</li><li>key&#x53EF;&#x4EE5;&#x89C4;&#x907F;&#x4E00;&#x4E9B;&#x573A;&#x666F;&#x7684;&#x6574;&#x4F53;&#x91CD;&#x5EFA;&#xFF0C;&#x901A;&#x8FC7;&#x5C40;&#x90E8;&#x79FB;&#x52A8;&#x6216;&#x8005;&#x63D2;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x5237;&#x65B0;&#x5185;&#x5BB9;&#x3002;</li></ul><ol start="5"><li><p>&#x53D7;&#x63A7;&#x4E0E;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x662F;React&#x8868;&#x5355;&#x5904;&#x7406;&#x4E0B;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5176;&#x6700;&#x57FA;&#x672C;&#x7684;&#x903B;&#x8F91;&#x662F;<strong>&#x5355;&#x4E00;&#x6570;&#x636E;&#x6E90;</strong>&#x3002;&#x7136;&#x800C;Form&#x672C;&#x8EAB;&#xFF0C;&#x5C31;&#x6709;&#x6570;&#x636E;&#x5173;&#x8054;&#x7684;&#x903B;&#x8F91;&#x6BD4;&#x5982;<code>value</code>&#x3001;<code>checked</code>&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x90A3;&#x8981;&#x4F7F;&#x5176;&#x5177;&#x6709;&#x552F;&#x4E00;&#x63A7;&#x5236;&#x6E90;&#x5934;&#xFF0C;&#x6700;&#x81EA;&#x7136;&#x7684;&#x505A;&#x6CD5;&#x5C31;&#x662F;&#x7528;<code>state</code>&#x63A7;&#x5236;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// input</span></span><br><span class="line"> &lt;input type=<span class="string">&quot;text&quot;</span> value={<span class="keyword">this</span>.state.value} onChange={<span class="keyword">this</span>.handleChange} /&gt;</span><br><span class="line"> <span class="comment">// textarea</span></span><br><span class="line"> &lt;textarea value={<span class="keyword">this</span>.state.value} onChange={<span class="keyword">this</span>.handleChange} /&gt;</span><br><span class="line"> <span class="comment">// select</span></span><br><span class="line"> &lt;select multiple={<span class="literal">true</span>} value={[<span class="string">&apos;B&apos;</span>, <span class="string">&apos;C&apos;</span>]}&gt;</span><br><span class="line"></span><br><span class="line">&lt;select value={<span class="keyword">this</span>.state.value} onChange={<span class="keyword">this</span>.handleChange}&gt;</span><br><span class="line">&lt;option value=<span class="string">&quot;grapefruit&quot;</span>&gt;Grapefruit&lt;<span class="regexp">/option&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>select&gt;</span><br></pre></td></tr></tbody></table></figure><p>&#x2003; &#x2003;&#x53E6;&#x5916;&#x5BF9;&#x4E8E;<code>&lt;input type=&quot;file&quot; /&gt;</code>&#xFF0C;&#x7531;&#x4E8E;&#x5176;<code>value</code>&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF0C;&#x6240;&#x4EE5;<code>file input</code>&#x6807;&#x7B7E;&#x662F;&#x4E00;&#x4E2A;&#x94C1;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3002;&#x76F8;&#x8F83;&#x4E8E;&#x53D7;&#x63A7;&#x7684;<code>state</code>&#xFF0C;&#x975E;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x5C31;&#x662F;&#x5BF9;&#x539F;&#x751F;DOM&#x8868;&#x5355;&#x7684;&#x503C;&#x83B7;&#x53D6;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>ref</code>&#x7684;<code>current</code>&#x5C5E;&#x6027;&#x6765;&#x62FF;&#x3002;<strong>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;React&#x4E2D;&#x4E00;&#x4E9B;&#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x7684;&#x5C5E;&#x6027;&#x90FD;&#x88AB;&#x91CD;&#x5199;&#x4E86;&#xFF0C;&#x5C31;&#x50CF;&#x5408;&#x6210;&#x4E8B;&#x4EF6;&#x90A3;&#x6837;&#x3002;&#x6240;&#x4EE5;<code>value</code>&#x5982;&#x679C;&#x4E0D;&#x662F;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x7684;<code>state</code>&#x8BBE;&#x7F6E;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x518D;&#x5BF9;&#x5176;&#x8BBE;&#x7F6E;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;React&#x63D0;&#x4F9B;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;<code>defaultValue</code>&#x6765;&#x66FF;&#x4EE3;&#x3002;</strong></p><p>&#x2003; &#x2003;&#x7B80;&#x5355;&#x70B9;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;React&#x4E0D;&#x7528;<code>state</code>&#x6216;&#x662F;&#x7528;&#x4E0D;&#x4E86;<code>state</code>&#x63A7;&#x5236;&#x7684;&#x8868;&#x5355;&#x5143;&#x7D20;&#x662F;&#x975E;&#x53D7;&#x63A7;&#x7684;&#xFF0C;&#x53CD;&#x4E4B;&#x5219;&#x662F;&#x53D7;&#x63A7;&#x7684;&#x3002;&#x57FA;&#x4E8E;&#x5355;&#x4E00;&#x6570;&#x636E;&#x6E90;&#x7684;&#x54F2;&#x5B66;&#x548C;&#x53EF;&#x8FFD;&#x6EAF;&#x7684;&#x8003;&#x8651;&#xFF0C;React&#x63A8;&#x8350;&#x5927;&#x591A;&#x6570;&#x573A;&#x666F;&#x4F7F;&#x7528;&#x53D7;&#x63A7;&#x7EC4;&#x4EF6;&#x3002;</p></li></ol><ol start="6"><li><code>@babel/plugin-proposal-class-properties</code>&#x8BE5;<code>babel</code>&#x63D2;&#x4EF6;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x6211;&#x4EEC;&#x5728;<code>Class</code>&#x4E2D;&#x76F4;&#x63A5;&#x5199;<code>=&gt;</code>&#x51FD;&#x6570;&#x6700;&#x5173;&#x952E;&#x7684;&#x4E00;&#x6B65;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x80FD;&#x591F;&#x5E2E;&#x6211;&#x4EEC;&#x5C06;&#x51FD;&#x6570;&#x76F4;&#x63A5;&#x7ED1;&#x5B9A;&#x5230;&#x751F;&#x6210;&#x7684;&#x5B9E;&#x4F8B;&#x51FD;&#x6570;&#x4E0A;&#xFF08;&#x4E0D;&#x662F;&#x539F;&#x578B;&#x4E0A;&#xFF09;&#xFF0C;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x53D6;&#x81EA;babel&#x5B98;&#x65B9;&#xFF1A;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bork</span> </span>{</span><br><span class="line">  <span class="comment">//Property initializer syntax</span></span><br><span class="line">  instanceProperty = <span class="string">&quot;bork&quot;</span>;</span><br><span class="line">  boundFunction = <span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.instanceProperty;</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Static class properties</span></span><br><span class="line">  <span class="keyword">static</span> staticProperty = <span class="string">&quot;babelIsCool&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> staticFunction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> Bork.staticProperty;</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myBork = <span class="keyword">new</span> Bork;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Property initializers are not on the prototype.</span></span><br><span class="line"><span class="built_in">console</span>.log(myBork.__proto__.boundFunction); <span class="comment">// &gt; undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Bound functions are bound to the class instance.</span></span><br><span class="line"><span class="built_in">console</span>.log(myBork.boundFunction.call(<span class="literal">undefined</span>)); <span class="comment">// &gt; &quot;bork&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Static function exists on the class.</span></span><br><span class="line"><span class="built_in">console</span>.log(Bork.staticFunction()); <span class="comment">// &gt; &quot;babelIsCool&quot;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="git-flow"><a href="#git-flow" class="headerlink" title="git flow"></a>git flow</h3><ol><li><code>git rebase</code>&#x4E00;&#x822C;&#x6709;&#x4E24;&#x4E2A;&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5176;&#x4E00;&#x662F;&#x4EA4;&#x4E92;&#x6A21;&#x5F0F;&#x4E0B;&#x591A;&#x6761;<code>commit</code>&#x4FE1;&#x606F;&#x7684;&#x6574;&#x7406;&#x5408;&#x5E76;&#xFF1B;&#x5176;&#x4E8C;&#x662F;&#x66FF;&#x4EE3;&#x4F7F;&#x7528;<code>git merge</code>&#x8FDB;&#x884C;&#x5206;&#x652F;&#x5408;&#x5E76;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x5BF9;Master&#x5206;&#x652F;&#x8FDB;&#x884C;PR&#x540E;&#xFF0C;&#x4E3B;&#x5206;&#x652F;&#x5C31;&#x4ECD;&#x662F;&#x4E00;&#x6761;&#x5E72;&#x51C0;&#x7684;&#x6539;&#x52A8;&#x8DEF;&#x7EBF;&#x56FE;&#x3002;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x77E5;&#x4E4E;&#x8FD9;&#x7BC7;&#x5185;&#x5BB9;<a href="https://www.zhihu.com/question/61283395/answer/186223235" target="_blank" rel="noopener">Git commits&#x5386;&#x53F2;&#x662F;&#x5982;&#x4F55;&#x505A;&#x5230;&#x5982;&#x6B64;&#x6E05;&#x723D;&#x7684;&#xFF1F;</a>&#xFF0C;&#x5176;&#x4E2D;Vue&#x7EF4;&#x62A4;&#x56E2;&#x961F;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x89C4;&#x8303;&#x5904;&#x7406;&#x7684;&#x3002;</li></ol><h3 id="&#x5DE5;&#x7A0B;&#x5316;"><a href="#&#x5DE5;&#x7A0B;&#x5316;" class="headerlink" title="&#x5DE5;&#x7A0B;&#x5316;"></a>&#x5DE5;&#x7A0B;&#x5316;</h3><ol><li><p><code>husky</code>&#x63D0;&#x4F9B;&#x4E86;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x6613;&#x4ECB;&#x5165;<code>git hooks</code>&#x7684;&#x80FD;&#x529B;&#x3002;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5728;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;<code>hooks</code>&#x9636;&#x6BB5;&#x64CD;&#x4F5C;&#xFF1A;<code>pre-commit</code>&#x5185;&#x8FDB;&#x884C;<code>ESLint</code>&#x6821;&#x9A8C;&#xFF0C;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x4F1A;&#x8F93;&#x51FA;&#x5E76;&#x9000;&#x51FA;<code>git</code>&#x6D41;&#x7A0B;&#xFF1B;<code>commit-msg</code>&#x914D;&#x5408;<code>git-cz</code>&#x8FDB;&#x884C;&#x89C4;&#x8303;&#x5316;&#x7684;&#x63D0;&#x4EA4;<code>message</code>&#x6A21;&#x677F;&#x914D;&#x7F6E;&#x3002;&#x4F46;&#x662F;&#x8981;&#x662F;&#x6709;&#x4EBA;&#x4F7F;&#x7528;<code>-n</code>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x6821;&#x9A8C;<code>lint</code>&#x7684;&#x6B65;&#x9AA4;&#x2026;&#x6240;&#x4EE5;&#x5F52;&#x6839;&#x5230;&#x5E95;&#x8FD9;&#x79CD;&#x9650;&#x5236;&#x8FD8;&#x662F;&#x4E00;&#x79CD;<strong>&#x5F31;&#x7EA6;&#x675F;</strong>&#x3002;&#x771F;&#x60F3;&#x4E25;&#x683C;&#x7EDF;&#x4E00;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;&#x7684;&#x683C;&#x5F0F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;CI&#x6D41;&#x7A0B;&#x4E2D;&#x7684;GIT HOOKS&#xFF08;&#x533A;&#x5206;&#x4E8E;&#x524D;&#x9762;&#x7684;<code>git flow</code>&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x7684;&#x6D41;&#x7A0B;&#xFF09;&#x89E6;&#x53D1;&#x3002;</p></li><li><p><code>package-lock.json</code>&#x5728;&#x4E0D;&#x540C;<code>npm</code>&#x7248;&#x672C;&#x4E0B;&#x7684;&#x6267;&#x884C;&#x53CD;&#x9988;&#x4E0D;&#x540C;&#xFF08;<code>npm 5</code>&#x540E;&#x5F00;&#x59CB;&#x6211;&#x4EEC;&#x6839;&#x636E;<code>package.json</code>&#x8FDB;&#x884C;<code>npm i</code>&#x4F1A;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x4E00;&#x4E2A;<code>package-lock.json</code>&#x6587;&#x4EF6;&#x8BB0;&#x5F55;&#x5F53;&#x65F6;&#x5177;&#x4F53;&#x7684;&#x5404;&#x4F9D;&#x8D56;&#x7248;&#x672C;&#x53F7;&#xFF09;&#xFF1A;</p><p>&#x2003;<code>5.0.x</code>&#x7248;&#x672C;&#xFF0C;<code>package.json</code>&#x4E0D;&#x7BA1;&#x5982;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x90FD;&#x4F1A;&#x4E25;&#x683C;&#x6839;&#x636E;<code>lock</code>&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x7248;&#x672C;&#xFF08;&#x521D;&#x59CB;&#x751F;&#x6210;&#x7684;&#xFF09;&#x4E0B;&#x8F7D;&#x4F9D;&#x8D56;&#xFF1B;<br>&#x2003;<code>5.1.0 ~ 5.4.2</code>&#x7248;&#x672C;&#xFF0C;<code>npm i</code>&#x4F1A;&#x65E0;&#x89C6;<code>lock</code>&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5373;&#x6BCF;&#x6B21;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x90FD;&#x4F1A;&#x6839;&#x636E;<code>semver</code>&#x53D8;&#x52A8;&#x5237;&#x65B0;<code>lock</code>&#x914D;&#x7F6E;&#xFF1B;<br>&#x2003;<code>5.4.2 ~ future</code>&#x7248;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>npm i</code>&#x8FDB;&#x884C;&#x6307;&#x5B9A;&#x4F9D;&#x8D56;&#x5B89;&#x88C5;&#xFF08;<code>xxx@xxx</code>&#xFF09;&#x65F6;&#xFF0C;&#x82E5;&#x4E0E;<code>package.json</code>&#x4E2D;&#x5199;&#x5165;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x4F1A;&#x91CD;&#x65B0;&#x8986;&#x76D6;&#x5176;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7684;&#x4F9D;&#x8D56;&#x3002;<code>lock</code>&#x4E2D;&#x4E4B;&#x524D;&#x521D;&#x59CB;&#x751F;&#x6210;&#x7684;&#x5BF9;&#x5E94;&#x914D;&#x7F6E;&#x5219;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x3002;<strong>&#x4F46;&#x5982;&#x679C;&#x5728;<code>package.json</code>&#x4E2D;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#x4E86;&#x7248;&#x672C;&#x518D;<code>npm i</code>&#xFF0C;<code>lock</code>&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5C31;&#x4F1A;&#x5BF9;&#x996E;&#x66F4;&#x65B0;&#x3002;</strong></p><p>&#x2003;<code>npm</code>&#x5728;&#x6CA1;&#x6709;<code>lock</code>&#x673A;&#x5236;&#x51FA;&#x73B0;&#x524D;&#x4F3C;&#x4E4E;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7EF4;&#x62A4;&#x5173;&#x7CFB;&#x7684;&#x6587;&#x4EF6;&#xFF0C;<code>npm-shrinkwrap.json</code>&#xFF1B;&#x672C;&#x7740;&#x517C;&#x5BB9;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x4E2A;&#x8001;&#x914D;&#x7F6E;&#x4F18;&#x5148;&#x7EA7;&#x4F1A;&#x9AD8;&#x4E8E;<code>pakcage-lock.json</code>&#x3002;</p><p>&#x2003;&#x53C2;&#x8003;<a href="https://github.com/npm/npm/issues/17979" target="_blank" rel="noopener">github issue</a></p></li><li><p><strong><code>package-lock.json</code>&#x4E0D;&#x5E94;&#x5199;&#x5165;<code>.gitignore</code>&#xFF0C;&#x5E94;&#x5F53;&#x63D0;&#x4EA4;&#x5230;<code>git repo</code>&#x4E0A;&#x3002;</strong>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9879;&#x76EE;&#x7EA7;&#x7684;<code>.npmrc</code>&#x914D;&#x7F6E;<code>package-lock=false</code>&#x5173;&#x95ED;<code>lock</code>&#x673A;&#x5236;&#x3002;&#x53E6;&#x5916;&#x5BF9;&#x4E8E;<code>yarn</code>&#x548C;<code>npm</code>&#x4E24;&#x79CD;&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x65B9;&#x5199;&#x5165;<code>.gitignore</code>&#xFF0C;&#x6BD4;&#x5982;&#x4F7F;&#x7528;<code>npm</code>&#xFF0C;&#x628A;<code>yarn.lock</code>&#x5199;&#x5165;&#x3002;</p><p>&#x2003;&#x53C2;&#x8003;<a href="https://www.zhihu.com/question/62331583" target="_blank" rel="noopener">&#x77E5;&#x4E4E;</a></p></li><li><p><code>npm</code>&#x4F7F;&#x7528;&#x4E0E;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF1A;</p><p>&#x2003;<a href="https://juejin.im/post/5ad413ba6fb9a028b5485866" target="_blank" rel="noopener">Semver(&#x8BED;&#x4E49;&#x5316;&#x7248;&#x672C;&#x53F7;)&#x626B;&#x76F2;</a></p><p>&#x2003;<a href="https://juejin.im/post/5ab3f77df265da2392364341#heading-8" target="_blank" rel="noopener">npm&#x4FE1;&#x606F;&#x6C47;&#x603B;</a></p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;Âú®Êó•Â∏∏ÁöÑËá™ÊàëÊèêÂçáËøáÁ®ã‰∏≠ÔºåÊÄª‰ºöÊúâ‰∫õÁ¢éÁâáÂåñÁöÑÁü•ËØÜÁÇπÂú®ÁªèËøá‰∏ÄÊÆµÊó∂Èó¥ÁöÑÁßØÁ¥ØÂíåÊ≤âÊ∑ÄÂêéÊâçËÉΩÊ±áÊÄªÂá∫‰∏Ä‰∏™Á≥ªÁªüÁöÑÊñπÊ≥ïËÆ∫„ÄÇÂõ∫ÊúâÊ≠§Êñá‰∏çÂÆöÊúüÊõ¥Êñ∞Ôºå‰∏ìÈó®Áî®‰∫éÊ±áÊÄªÁªìËÆ∫„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ÊÄªÁªì" scheme="https://chrisdeo.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="Á¢éÁâáÂåñËÆ∞ÂøÜ" scheme="https://chrisdeo.github.io/tags/%E7%A2%8E%E7%89%87%E5%8C%96%E8%AE%B0%E5%BF%86/"/>
    
  </entry>
  
  <entry>
    <title>Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-‰∫åÂèâÂ†ÜÁØá</title>
    <link href="https://chrisdeo.github.io/2019/11/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80-%E4%BA%8C%E5%8F%89%E5%A0%86%E7%AF%87/"/>
    <id>https://chrisdeo.github.io/2019/11/14/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-‰∫åÂèâÂ†ÜÁØá/</id>
    <published>2019-11-14T13:39:08.000Z</published>
    <updated>2020-11-07T06:44:43.719Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4E8C;&#x53C9;&#x5806;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x5806;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x4E5F;&#x662F;&#x4E00;&#x9897;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x6BD4;&#x8F83;&#x5178;&#x578B;&#x7684;&#x5E94;&#x7528;&#x5C31;&#x662F;&#x4F18;&#x5148;&#x961F;&#x5217;&#x2026;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x8FD9;&#x6BB5;&#x662F;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x7684;&#x8865;&#x5145;&#xFF0C;&#x5173;&#x4E8E;&#x7C7B;&#x4F3C;&#x6784;&#x9020;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#x8FD9;&#x6837;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5728;js&#x91CC;&#x9762;&#x7531;&#x4E8E;&#x4E0D;&#x50CF;C,Java&#x90A3;&#x6837;&#x6709;&#x5929;&#x7136;&#x7684;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x7ED3;&#x6784;&#x8868;&#x8FBE;&#x540C;&#x6837;&#x7684;&#x542B;&#x4E49;&#xFF0C;&#x5BF9;&#x4E8E;&#x672C;&#x8EAB;&#x65E0;&#x5E8F;&#x7684;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#xFF0C;&#x5176;&#x5B9E;&#x63D2;&#x5165;&#x4EFB;&#x52A1;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x653E;&#x5165;&#x5C3E;&#x90E8;&#x5373;&#x53EF;&#xFF0C;&#x63D2;&#x5165;&#x52A8;&#x4F5C;&#x4E3A;O(1)&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x800C;&#x67E5;&#x8BE2;&#x5219;&#x9700;&#x8981;O(n)&#x590D;&#x6742;&#x5EA6;(&#x68C0;&#x89C6;&#x4E00;&#x904D;&#xFF0C;&#x4EE5;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x9047;&#x5230;&#x66F4;&#x5927;&#x7684;&#x5219;&#x66FF;&#x6362;)&#xFF1B;&#x5BF9;&#x4E8E;&#x672C;&#x8EAB;&#x6709;&#x5E8F;&#x7684;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#xFF0C;&#x5219;&#x662F;&#x5728;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;O(n)&#x590D;&#x6742;&#x5EA6;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x540E;&#x63D2;&#x5165;&#xFF0C;&#x4F7F;&#x5F97;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#xFF0C;&#x67E5;&#x8BE2;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x6570;&#x7EC4;&#x7279;&#x6027;<code>pop</code>&#x51FA;&#x6700;&#x5927;&#x7ED3;&#x679C;&#x5373;&#x53EF;&#xFF0C;O(1)&#x590D;&#x6742;&#x5EA6;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x5904;&#x7406;&#x63D2;&#x5165;&#x548C;&#x6392;&#x5E8F;&#x65E0;&#x6CD5;&#x90FD;&#x8FBE;&#x5230;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x624D;&#x4F1A;&#x53BB;&#x6784;&#x9020;&#x4E8C;&#x53C9;&#x5806;&#x3002;</p><h2 id="&#x4E8C;&#x53C9;&#x5806;&#x7B80;&#x4ECB;"><a href="#&#x4E8C;&#x53C9;&#x5806;&#x7B80;&#x4ECB;" class="headerlink" title="&#x4E8C;&#x53C9;&#x5806;&#x7B80;&#x4ECB;"></a>&#x4E8C;&#x53C9;&#x5806;&#x7B80;&#x4ECB;</h2><p>&#x2003;&#x2003;&#x4E8C;&#x53C9;&#x5806;&#x6709;&#x4E24;&#x79CD;&#xFF1A;&#x6700;&#x5927;&#x5806;&#x548C;&#x6700;&#x5C0F;&#x5806;&#x3002;&#x6700;&#x5927;&#x5806;&#xFF1A;<strong>&#x7236;&#x8282;&#x70B9;&#x7684;&#x952E;&#x503C;&#x603B;&#x662F;&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x952E;&#x503C;</strong>&#xFF1B;&#x6700;&#x5C0F;&#x5806;&#xFF1A;<strong>&#x7236;&#x8282;&#x70B9;&#x7684;&#x952E;&#x503C;&#x603B;&#x662F;&#x5C0F;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x952E;&#x503C;</strong>&#x3002;  &#x2013;via &#x767E;&#x5EA6;&#x767E;&#x79D1;</p><p>&#x2003;&#x2003;&#x5728;&#x5F00;&#x59CB;&#x524D;&#x6211;&#x4F1A;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x51E0;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#xFF1A;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x5B8C;&#x6EE1;&#x4E8C;&#x53C9;&#x6811;&#x4EE5;&#x53CA;&#x5B8C;&#x7F8E;&#x4E8C;&#x53C9;&#x6811;&#x3002;</p><p><img src="/2019/11/14/&#x6570;&#x636E;&#x7ED3;&#x6784;&#x57FA;&#x7840;-&#x4E8C;&#x53C9;&#x5806;&#x7BC7;/treeIntro.png" alt=""></p><ol><li><p>&#x5B8C;&#x6EE1;&#x4E8C;&#x53C9;&#x6811;&#xFF1A; &#x9664;&#x4E86;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5916;&#x7684;&#x8282;&#x70B9;&#x90FD;&#x987B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x5B69;&#x5B50;&#x8282;&#x70B9;&#x3002;</p></li><li><p>&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF1A; &#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5230;&#x6700;&#x540E;&#x4E00;&#x5C42;&#xFF08;&#x4E0D;&#x5305;&#x62EC;&#x6700;&#x540E;&#x4E00;&#x5C42;&#xFF09;&#xFF0C;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x88AB;&#x5B8C;&#x5168;&#x586B;&#x5145;&#x7684;&#xFF0C;&#x5373;&#x90FD;&#x62E5;&#x6709;&#x4E24;&#x4E2A;&#x5B69;&#x5B50;&#x8282;&#x70B9;&#xFF1B;&#x6700;&#x540E;&#x4E00;&#x5C42;&#x65E0;&#x987B;&#x5B8C;&#x5168;&#x586B;&#x5145;&#xFF08;&#x5B8C;&#x5168;&#x586B;&#x5145;&#x4E86;&#x5C31;&#x662F;&#x5B8C;&#x7F8E;&#x4E8C;&#x53C9;&#x6811;&#x4E86;&#xFF09;&#xFF0C;&#x4F46;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x987B;&#x9760;&#x5DE6;&#x5BF9;&#x9F50;&#x3002;</p></li><li><p>&#x5B8C;&#x7F8E;&#x4E8C;&#x53C9;&#x6811;&#xFF1A; &#x9664;&#x4E86;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5916;&#xFF08;&#x5373;&#x6700;&#x540E;&#x4E00;&#x5C42;&#xFF09;&#xFF0C;&#x6811;&#x7684;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x987B;&#x8981;&#x88AB;&#x5B8C;&#x5168;&#x586B;&#x5145;&#x3002;</p></li></ol><p>&#x2003;&#x2003;&#x4E86;&#x89E3;&#x4E86;&#x6811;&#x7684;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#xFF0C;&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x804A;&#x804A;&#x4E8C;&#x53C9;&#x5806;&#x7684;&#x6784;&#x9020;&#x3002;&#x5176;&#x5B9E;&#x524D;&#x6587;&#x6709;&#x8BF4;&#x8FC7;&#x4E8C;&#x53C9;&#x5806;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x9897;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x800C;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x5728;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x53C8;&#x53EF;&#x4EE5;&#x6BD4;&#x8F83;&#x5408;&#x9002;&#x7684;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x7ED3;&#x6784;&#x8FDB;&#x884C;&#x8868;&#x8FBE;&#xFF08;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#xFF09;&#x3002;</p><h2 id="&#x5EFA;&#x5806;"><a href="#&#x5EFA;&#x5806;" class="headerlink" title="&#x5EFA;&#x5806;"></a>&#x5EFA;&#x5806;</h2><p>&#x2003;&#x2003;&#x5806;&#x5316;&#x662F;&#x6211;&#x4EEC;&#x5EFA;&#x5806;&#x81F3;&#x5173;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x73AF;&#x3002;&#x90A3;&#x5982;&#x4F55;&#x7406;&#x89E3;&#x5EFA;&#x5806;&#x5462;&#xFF1F;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x7236;&#x8282;&#x70B9;&#x548C;&#x4E24;&#x4E2A;&#x5B69;&#x5B50;&#x8282;&#x70B9;&#x5927;&#x5C0F;&#xFF0C;&#x5C06;&#x4E09;&#x8005;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF08;&#x770B;&#x5EFA;&#x7ACB;&#x4EC0;&#x4E48;&#x5806;&#xFF0C;&#x6700;&#x5927;&#x5806;&#x53D6;&#x6700;&#x5927;&#xFF0C;&#x6700;&#x5C0F;&#x5806;&#x53D6;&#x6700;&#x5C0F;&#xFF0C;&#x540E;&#x6587;&#x53D6;&#x5EFA;&#x7ACB;&#x6700;&#x5927;&#x5806;&#x8BA8;&#x8BBA;&#xFF09;&#x653E;&#x5728;&#x7236;&#x8282;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#xFF08;&#x4EA4;&#x6362;&#xFF09;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p><h3 id="&#x5806;&#x5316;"><a href="#&#x5806;&#x5316;" class="headerlink" title="&#x5806;&#x5316;"></a>&#x5806;&#x5316;</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x8F85;&#x52A9;&#x4EA4;&#x6362;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, a, b</span>) </span>{</span><br><span class="line">    [arr[a], arr[b]] = [arr[b], arr[a]]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapify</span>(<span class="params">arr, lastNotLeafNodeIdx, inOrderNum</span>) </span>{</span><br><span class="line">    <span class="comment">// &#x521D;&#x59CB;&#x5316; &#x6700;&#x5927;&#x503C;&#x7D22;&#x5F15;</span></span><br><span class="line">    <span class="keyword">let</span> biggestIdx = lastNotLeafNodeIdx;</span><br><span class="line">    <span class="comment">// &#x6CE8;&#x610F;&#x4F7F;&#x7528; &#x6700;&#x5927;&#x503C;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x7684;&#x503C; &#x8FDB;&#x884C;&#x6BD4;&#x8F83;</span></span><br><span class="line">    <span class="keyword">if</span> (arr[<span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">1</span>] &amp;&amp; (arr[biggestIdx] &lt; arr[<span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">1</span>])) {</span><br><span class="line">        <span class="comment">// &#x6CE8;&#x610F; &#x6BD4;&#x8F83;&#x65F6; &#x8FC7;&#x6EE4; &#x5DF2;&#x6709;&#x5E8F;&#x7684;&#x4F4D;&#x7F6E;&#xFF08;&#x4EA4;&#x6362;&#x5230;&#x5E95;&#x90E8;&#xFF09;</span></span><br><span class="line">        <span class="keyword">if</span> (!inOrderNum || <span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">1</span> !== arr.length - inOrderNum) {</span><br><span class="line">            biggestIdx = <span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (arr[<span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">2</span>] &amp;&amp; (arr[biggestIdx] &lt; arr[<span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">2</span>])) {</span><br><span class="line">        <span class="keyword">if</span> (!inOrderNum || <span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">2</span> !== arr.length - inOrderNum) {</span><br><span class="line">            biggestIdx = <span class="number">2</span> * lastNotLeafNodeIdx + <span class="number">2</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (biggestIdx !== lastNotLeafNodeIdx) {</span><br><span class="line">        swap(arr, biggestIdx, lastNotLeafNodeIdx);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="&#x5806;&#x5143;&#x7D20;&#x63D2;&#x5165;"><a href="#&#x5806;&#x5143;&#x7D20;&#x63D2;&#x5165;" class="headerlink" title="&#x5806;&#x5143;&#x7D20;&#x63D2;&#x5165;"></a>&#x5806;&#x5143;&#x7D20;&#x63D2;&#x5165;</h3><p>&#x2003;&#x2003;&#x4EE5;&#x4E0A;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x4E2D;&#x5DF2;&#x6709;&#x5143;&#x7D20;&#x8BA8;&#x8BBA;&#x4E86;&#x6700;&#x5927;&#xFF08;&#x5C0F;&#xFF09;&#x5806;&#x7684;&#x6784;&#x9020;&#x7B56;&#x7565;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x5F88;&#x591A;&#x573A;&#x666F;&#x6211;&#x4EEC;&#x662F;&#x4ECE;&#x4E00;&#x4E2A;&#x7A7A;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x5F80;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FDD;&#x6301;&#x6700;&#x5927;&#xFF08;&#x5C0F;&#xFF09;&#x5806;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x90A3;&#x600E;&#x4E48;&#x505A;&#xFF1F;</p><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E0E;&#x524D;&#x6587;&#x4E2D;&#x7684;&#x5806;&#x5316;&#x8FC7;&#x7A0B;&#x540C;&#x7406;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x7B2C;&#x4E00;&#x6B65;&#x6211;&#x4EEC;&#x987B;&#x8981;&#x6269;&#x5927;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x63A8;&#x5165;&#x65B0;&#x5143;&#x7D20;&#x3002;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x6574;&#x4F53;&#x5E94;&#x7528;&#x5806;&#x5316;&#x65B9;&#x6CD5;&#x3002;&#x524D;&#x6587;&#x4E2D;&#x7684;&#x5806;&#x5316;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x5904;&#x7406;&#x5C40;&#x90E8;&#x7236;&#x5B50;&#x8282;&#x70B9;&#x5173;&#x7CFB;&#x7684;&#x5206;&#x6CBB;&#x7B56;&#x7565;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x9897;&#x5B8C;&#x6574;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#x5411;&#x524D;&#x904D;&#x5386;&#x8C03;&#x7528;&#x5806;&#x5316;&#x65B9;&#x6CD5;&#xFF0C;&#x8FBE;&#x5230;&#x6574;&#x4F53;&#x7B26;&#x5408;&#x6700;&#x5927;&#xFF08;&#x5C0F;&#xFF09;&#x5806;&#x7279;&#x6027;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapInsert</span>(<span class="params">arr, ele</span>) </span>{</span><br><span class="line">arr[arr.length] = ele;</span><br><span class="line"><span class="comment">// &#x5148;&#x5224;&#x65AD;&#x662F;&#x5DE6;&#x53F6;&#x5B50;&#x8FD8;&#x662F;&#x53F3;&#x53F6;&#x5B50;&#xFF0C;&#x5BF9;&#x4E8E;&#x627E;&#x5230;&#x7236;&#x8282;&#x70B9;&#x6709;&#x5F71;&#x54CD;</span></span><br><span class="line"><span class="keyword">let</span> isLeft = arr.length % <span class="number">2</span> === <span class="number">0</span></span><br><span class="line"><span class="comment">// &#x4ECE;&#x5012;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#x904D;&#x5386;</span></span><br><span class="line"><span class="keyword">let</span> lastNotLeafNodeIdx = isLeft ? <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>) : <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span> (lastNotLeafNodeIdx &gt;= <span class="number">0</span>) {</span><br><span class="line">heapify(arr, lastNotLeafNodeIdx, inOrderNum);</span><br><span class="line">lastNotLeafNodeIdx--;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8BB2;&#x5230;&#x6B64;&#x5904;&#xFF0C;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x4E86;&#x89E3;&#x8FC7;&#x5806;&#x7ED3;&#x6784;&#x7684;&#x540C;&#x5B66;&#x5BF9;&#x6700;&#x5927;&#xFF08;&#x5C0F;&#xFF09;&#x5806;&#x7684;&#x7279;&#x5F81;&#x8BA4;&#x77E5;&#x4E00;&#x5B9A;&#x8981;&#x6E05;&#x6670;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF0C;&#x56E0;&#x4E3A;&#xFF08;&#x6211;&#x4E5F;&#x6DF7;&#x6DC6;&#x4E86;&#x4E00;&#x5C0F;&#x4F1A;&#xFF0C;&#x5C0F;&#x58F0;&#x6BD4;&#x6BD4;&#xFF09;&#x3002;<strong>&#x6CE8;&#xFF1A;&#x4EE5;&#x6700;&#x5927;&#x5806;&#x4E3A;&#x4F8B;&#xFF0C;&#x5806;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x5143;&#x7D20;&#x5B58;&#x50A8;&#x5728;&#x6839;&#x8282;&#x70B9;&#x4E2D;&#x5E76;&#x4E14;&#x5728;&#x4EFB;&#x4E00;&#x5B50;&#x6811;&#x4E2D;&#xFF0C;&#x8BE5;&#x5B50;&#x6811;&#x5305;&#x542B;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x90FD;&#x4E0D;&#x5927;&#x4E8E;&#x8BE5;&#x5B50;&#x6811;&#x6839;&#x8282;&#x70B9;&#x503C;&#x3002;</strong>&#x6DF7;&#x6DC6;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;&#x8DDF;&#x540E;&#x6587;&#x7684;&#x5806;&#x6392;&#x5E8F;&#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x6574;&#x4F53;&#x4E0D;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF0C;&#x4EC5;&#x662F;&#x5C40;&#x90E8;&#x6839;&#x5143;&#x7D20;&#x5BF9;&#x4E8E;&#x5176;&#x4ECE;&#x5C5E;&#x7684;&#x5B50;&#x6811;&#x5143;&#x7D20;&#x800C;&#x8A00;&#x662F;&#x6700;&#x5927;&#x7684;&#x3002;</p><h3 id="&#x4F18;&#x5148;&#x961F;&#x5217;"><a href="#&#x4F18;&#x5148;&#x961F;&#x5217;" class="headerlink" title="&#x4F18;&#x5148;&#x961F;&#x5217;"></a>&#x4F18;&#x5148;&#x961F;&#x5217;</h3><p>&#x2003;&#x2003;&#x5806;&#x8FD9;&#x4E00;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x4E00;&#x79CD;&#x5E38;&#x89C1;&#x5E94;&#x7528;&#x5C31;&#x662F;&#x4F18;&#x5148;&#x961F;&#x5217;&#xFF0C;&#x800C;&#x4F18;&#x5148;&#x961F;&#x5217;&#x540C;&#x6837;&#x4E5F;&#x5206;&#x4E3A;&#x6700;&#x5927;&#x4F18;&#x5148;&#x961F;&#x5217;&#x548C;&#x6700;&#x5C0F;&#x4F18;&#x5148;&#x961F;&#x5217;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x7CFB;&#x7EDF;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x4F18;&#x5148;&#x7EA7;&#x65F6;&#xFF0C;&#x4E00;&#x822C;&#x5E94;&#x7528;&#x7684;&#x5C31;&#x662F;&#x6700;&#x5927;&#x4F18;&#x5148;&#x961F;&#x5217;&#x3002;</p><p>&#x2003;&#x2003;&#x63D2;&#x5165;&#x4EFB;&#x52A1;&#xFF0C;&#x4E0A;&#x4E00;&#x4E2A;&#x5C0F;&#x8282;&#x5DF2;&#x63CF;&#x8FF0;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(log2n)&#x3002;&#x83B7;&#x53D6;&#x4EFB;&#x52A1;&#xFF0C;&#x53D6;&#x6570;&#x7EC4;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5373;&#x53EF;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(1)&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMax</span>(<span class="params">arr</span>) </span>{</span><br><span class="line"><span class="keyword">return</span> arr.shift();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6CE8;&#x610F;&#x5728;&#x6700;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x63A8;&#x51FA;&#x540E;&#xFF0C;&#x8FD8;&#x987B;&#x91CD;&#x65B0;&#x5BF9;&#x6574;&#x4F53;&#x8FDB;&#x884C;&#x5806;&#x5316;&#x3002;</p><h2 id="&#x5806;&#x6392;&#x5E8F;"><a href="#&#x5806;&#x6392;&#x5E8F;" class="headerlink" title="&#x5806;&#x6392;&#x5E8F;"></a>&#x5806;&#x6392;&#x5E8F;</h2><p>&#x2003;&#x2003;&#x5806;&#x6392;&#x5E8F;&#x662F;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x5B83;&#x5728;&#x5E73;&#x5747;&#x3001;&#x6700;&#x597D;&#x3001;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;O(nlog2n)&#x3002;&#x6211;&#x4E5F;&#x89C1;&#x5176;&#x5E38;&#x88AB;&#x653E;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x4E0E;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x6BD4;&#x8F83;&#xFF0C;&#x56E0;&#x4E3A;&#x5FEB;&#x6392;&#x5728;&#x5E73;&#x5747;&#x3001;&#x6700;&#x597D;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O(nlog2n)&#x800C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x9000;&#x5316;&#x5230;O(n^2)&#xFF0C;&#x4F46;&#x662F;&#x5404;&#x7C7B;&#x8BED;&#x8A00;&#x4E3B;&#x6D41;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x4E2D;&#x90FD;&#x91C7;&#x7528;&#x4E86;&#x5FEB;&#x6392;&#x7684;&#x65B9;&#x6848;&#x800C;&#x975E;&#x5806;&#x6392;&#xFF08;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9000;&#x5316;&#xFF0C;&#x4E4B;&#x524D;<a href="https://chrisdeo.github.io/2019/11/07/%E8%AE%BAjs%E4%B8%AD%E7%9A%84sort%E6%96%B9%E6%B3%95/">&#x300A;&#x8BBA;js&#x4E2D;&#x7684;sort&#x65B9;&#x6CD5;&#x300B;</a>&#x4E00;&#x6587;&#x4E2D;&#x6709;&#x63D0;&#x53CA;&#xFF09;&#x3002;</p><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x5176;&#x5B9E;&#x4E0E;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E2D;&#x88AB;&#x7565;&#x53BB;&#x7684;&#x5E38;&#x6570;&#x9879;&#x6709;&#x5173;&#xFF0C;&#x5728;&#x5806;&#x6392;&#x5E8F;&#x4E2D;&#xFF0C;&#x968F;&#x7740;&#x5806;&#x4F53;&#x79EF;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x8FDB;&#x884C;&#x5806;&#x5316;&#x7684;&#x6210;&#x672C;&#x4E5F;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x9AD8;&#xFF0C;&#x8FD9;&#x4ECE;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapSort</span>(<span class="params">arr</span>) </span>{</span><br><span class="line">    <span class="keyword">let</span> lastNotLeafNodeIdx = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> unSortLen = arr.length;</span><br><span class="line">    <span class="keyword">let</span> inOrderNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (unSortLen &gt; <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">while</span> (lastNotLeafNodeIdx &gt;= <span class="number">0</span>) {</span><br><span class="line">            heapify(arr, lastNotLeafNodeIdx, inOrderNum);</span><br><span class="line">            lastNotLeafNodeIdx--;</span><br><span class="line">        }</span><br><span class="line">        swap(arr, <span class="number">0</span>, unSortLen - <span class="number">1</span>);</span><br><span class="line">        inOrderNum++;</span><br><span class="line">        unSortLen--;</span><br><span class="line">        lastNotLeafNodeIdx = <span class="built_in">Math</span>.floor(unSortLen / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x7ED3;&#x5408;&#x524D;&#x6587;&#x4E2D;&#x7684;&#x5806;&#x5316;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5806;&#x6392;&#x5E8F;&#x5B9E;&#x73B0;&#xFF1A;</p><ol><li>&#x627E;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF1B;</li><li>&#x5BF9;&#x8BE5;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5806;&#x5316;&#x6784;&#x9020;&#x5C40;&#x90E8;&#x6700;&#x5927;&#x5806;&#xFF1B;</li><li>&#x6839;&#x636E;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x7279;&#x5F81;&#xFF0C;&#x6807;&#x8BB0;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x7D22;&#x5F15;&#x9012;&#x51CF;&#xFF0C;&#x5FAA;&#x73AF;2&#x8FC7;&#x7A0B;&#xFF1B;</li><li>&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x6574;&#x4F53;&#x5806;&#x5316;&#x540E;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5373;&#x6211;&#x4EEC;&#x7684;&#x5806;&#x9876;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF08;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x4F18;&#x5148;&#x961F;&#x5217;&#x4E2D;&#x63D0;&#x53D6;&#x6700;&#x9AD8;&#x6743;&#x91CD;&#x4EFB;&#x52A1;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(log2n)&#xFF09;&#xFF1B;</li><li>&#x6B64;&#x65F6;&#xFF0C;&#x4EA4;&#x6362;&#x9996;&#x5C3E;&#x5143;&#x7D20;&#xFF0C;&#x672B;&#x5C3E;&#x5143;&#x7D20;&#x662F;&#x4E0A;&#x4E00;&#x8F6E;&#x7684;&#x6700;&#x5927;&#x5143;&#x7D20;&#x5DF2;&#x6709;&#x5E8F;&#xFF0C;&#x63A5;&#x7740;&#x5BF9;&#x5269;&#x4F59;&#x6570;&#x7EC4;&#xFF08;&#x4E0D;&#x7B97;&#x6709;&#x5E8F;&#x90E8;&#x5206;&#xFF09;&#x5E94;&#x7528;1-4&#xFF1B;</li><li>&#x5F53;&#x4EC5;&#x5269;&#x4E00;&#x4E2A;&#x672A;&#x6392;&#x5E8F;&#x5143;&#x7D20;&#x65F6;&#x8DF3;&#x51FA;&#x5FAA;&#x73AF;&#xFF0C;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x5176;&#x4F59;&#x5143;&#x7D20;&#x7686;&#x786E;&#x8BA4;&#x5E8F;&#x5217;&#x4E14;&#x90FD;&#x662F;&#x53D6;&#x6700;&#x5927;&#x503C;&#x540E;&#x653E;&#xFF0C;&#x5269;&#x4E0B;&#x4E00;&#x503C;&#x80AF;&#x5B9A;&#x6700;&#x5C0F;&#xFF0C;&#x5B8C;&#x6210;&#x6392;&#x5E8F;&#x52A8;&#x4F5C;&#x3002;</li></ol><p>&#x2003;&#x2003;&#x7EFC;&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x5806;&#x6392;&#x5E8F;&#x4E2D;&#x4F1A;&#x8017;&#x8D39;&#x5927;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x5728;&#x5806;&#x5316;&#x8FC7;&#x7A0B;&#x4E0A;&#xFF0C;&#x6BCF;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x51E0;&#x4E4E;&#x90FD;&#x8FDB;&#x884C;&#x4E86;&#x591A;&#x6B21;&#x7684;&#x5806;&#x5316;&#x64CD;&#x4F5C;&#x3002;&#x800C;&#x5FEB;&#x6392;&#x8FC7;&#x7A0B;&#x5E76;&#x4E0D;&#x4F1A;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x6D6A;&#x8D39;&#x65F6;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x4EA6;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x63A8;&#x7406;&#x5FEB;&#x6392;&#x6BD4;&#x5806;&#x6392;&#x5E8F;&#x5FEB;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰∫åÂèâÂ†ÜÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÂ†ÜÔºåÂêåÊó∂ÂÆÉ‰πüÊòØ‰∏ÄÈ¢óÂÆåÂÖ®‰∫åÂèâÊ†ëÔºåÊØîËæÉÂÖ∏ÂûãÁöÑÂ∫îÁî®Â∞±ÊòØ‰ºòÂÖàÈòüÂàó‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ËÆ°ÁÆóÊú∫Âü∫Á°Ä" scheme="https://chrisdeo.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Êï∞ÊçÆÁªìÊûÑ" scheme="https://chrisdeo.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="‰∫åÂèâÂ†Ü" scheme="https://chrisdeo.github.io/tags/%E4%BA%8C%E5%8F%89%E5%A0%86/"/>
    
  </entry>
  
  <entry>
    <title>webpack4.xÁîü‰∫ßÁéØÂ¢ÉÁØá</title>
    <link href="https://chrisdeo.github.io/2019/11/12/webpack4-x%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%AF%87/"/>
    <id>https://chrisdeo.github.io/2019/11/12/webpack4-xÁîü‰∫ßÁéØÂ¢ÉÁØá/</id>
    <published>2019-11-12T12:43:26.000Z</published>
    <updated>2019-11-13T11:48:59.461Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4E4B;&#x524D;&#x505A;&#x8FC7;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x7684;webpack4.x&#x8FC1;&#x79FB;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x4E00;&#x4E9B;&#x539F;&#x56E0;&#x540E;&#x7EED;&#x751F;&#x4EA7;&#x7684;&#x914D;&#x7F6E;&#x6539;&#x9020;&#x6401;&#x7F6E;&#x4E86;&#x2026;&#x8FD1;&#x671F;&#x6B63;&#x5728;&#x7740;&#x624B;&#x5904;&#x7406;&#x8FD9;&#x5757;&#xFF0C;&#x672C;&#x6587;&#x662F;&#x5BF9;&#x8FC1;&#x79FB;&#x8FC7;&#x7A0B;&#x7684;&#x8BB0;&#x5F55;&#x5206;&#x4EAB;&#xFF0C;&#x5305;&#x62EC;&#x4E00;&#x4E9B;&#x65B0;&#x7248;&#x672C;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x548C;&#x5B9E;&#x9645;&#x6539;&#x5199;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x60F3;&#x770B;&#x524D;&#x671F;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x8BB0;&#x5F55;&#x7684;&#x53EF;&#x4EE5;&#x8D70;&#x8BE5;<a href="https://chrisdeo.github.io/2019/08/09/%E8%AE%B0%E4%BB%8Eroadhog2-x%E8%BF%81%E7%A7%BB%E8%87%B3webpack4-x/">&#x4F20;&#x9001;&#x95E8;</a>&#x3002;</p><p>&#x2003;&#x2003;&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x6B63;&#x6587;&#x2026;</p><h2 id="&#x8E29;&#x5751;"><a href="#&#x8E29;&#x5751;" class="headerlink" title="&#x8E29;&#x5751;"></a>&#x8E29;&#x5751;</h2><h3 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h3><p>&#x2003;&#x2003;&#x4E0A;&#x6B21;&#x7684;&#x5206;&#x4EAB;&#x4E2D;&#x6709;&#x8BA8;&#x8BBA;&#x8FC7;&#x5728;&#x65B0;&#x7248;&#x672C;&#x7684;webpack&#x5185;&#xFF0C;&#x6709;&#x7EA6;&#x5B9A;&#x5927;&#x4E8E;&#x914D;&#x7F6E;&#x4E00;&#x8BF4;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x65F6;&#x5176;&#x5B9E;&#x6211;&#x914D;&#x7F6E;&#x7684;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x5176;&#x5B9E;&#x662F;&#x6709;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x6BD4;&#x5982;<code>process.env.NODE_ENV</code>&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x4F1A;&#x5F97;&#x5230;<code>development</code>&#xFF0C;&#x5728;&#x751F;&#x4EA7;&#x7684;<code>config</code>&#x6587;&#x4EF6;&#x5185;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x76F4;&#x63A5;&#x8BBE;&#x7F6E;<code>mode</code>&#x5C5E;&#x6027;&#x8FDB;&#x884C;<code>merge</code>&#xFF0C;&#x5B83;&#x4F1A;&#x88AB;&#x5173;&#x8054;&#x5230;<code>process.env.NODE_ENV</code>&#x4E0A;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> prodConfig = merge(baseConfig, {</span><br><span class="line">    mode: <span class="string">&apos;production&apos;</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8001;&#x7248;&#x672C;&#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x4E0B;&#x9762;&#x7684;&#x8BBE;&#x7F6E;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.DefinePlugin({</span><br><span class="line">  <span class="string">&apos;process.env.NODE_ENV&apos;</span>: <span class="built_in">JSON</span>.stringify(<span class="string">&apos;production&apos;</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>&#x2003;&#x2003;&#x5728;&#x914D;&#x7F6E;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x6253;&#x5305;&#x6587;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x53D1;&#x73B0;&#x4E4B;&#x524D;&#x5904;&#x7406;&#x6587;&#x4EF6;&#x8F93;&#x51FA;&#x7684;<code>loader</code>&#x5199;&#x6CD5;&#x4E5F;&#x5B58;&#x5728;&#x95EE;&#x9898;&#x3002;&#x56E0;&#x4E3A;&#x6700;&#x7EC8;&#x6211;&#x4EEC;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x90FD;&#x8981;&#x653E;&#x5728;&#x4E00;&#x4E2A;<code>dist</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x662F;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x7684;&#xFF08;&#x8BF7;&#x7ED3;&#x5408;&#x81EA;&#x8EAB;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF09;&#x3002;&#x90A3;&#x6211;&#x9700;&#x8981;&#x7684;&#x5C31;&#x662F;&#x5C06;<code>url()</code>&#x5F15;&#x5230;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x539F;&#x5C01;&#x4E0D;&#x52A8;&#x5730;&#x8F93;&#x51FA;&#x5230;<code>dist</code>&#x4E2D;&#x3002;&#x90A3;&#x6211;&#x4E4B;&#x524D;&#x7684;&#x5199;&#x6CD5;&#x662F;&#x600E;&#x4E48;&#x6837;&#x7684;&#x5462;&#xFF1F;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    loader: <span class="string">&apos;url-loader&apos;</span>,</span><br><span class="line">    options: {</span><br><span class="line">        limit: <span class="number">1024</span>,</span><br><span class="line">        outputPath: <span class="string">&apos;images&apos;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x6837;&#x5904;&#x7406;&#x4F1A;&#x6709;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p><ol><li>&#x6587;&#x4EF6;&#x6253;&#x5305;&#x65F6;&#x8F93;&#x51FA;&#x8DEF;&#x5F84;&#x5E76;&#x4E0D;&#x5728;<code>dist</code>&#x4E0B;&#x3002;&#x6211;&#x4EEC;&#x8C03;&#x6574;&#x65F6;&#xFF0C;&#x9700;&#x5173;&#x6CE8;<code>output</code>&#x4E2D;&#x7684;<code>path</code>&#x8BBE;&#x7F6E;&#x3002;</li><li>&#x6CA1;&#x6709;&#x914D;&#x7F6E;<code>name</code>&#x3002;&#x8BE5;&#x5C5E;&#x6027;&#x4F1A;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x8F93;&#x51FA;&#x65F6;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x7F3A;&#x7701;&#x72B6;&#x6001;&#x4E0B;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E32;&#x54C8;&#x5E0C;&#x503C;&#xFF08;&#x4E0D;&#x5305;&#x542B;&#x539F;&#x6587;&#x4EF6;&#x540D;&#xFF09;&#x3002;</li></ol><p>&#x2003;&#x2003;&#x6539;&#x5199;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    loader: <span class="string">&apos;url-loader&apos;</span>,</span><br><span class="line">    options: {</span><br><span class="line">        limit: <span class="number">1024</span>,</span><br><span class="line">        name: <span class="string">&apos;[name].[ext]&apos;</span>, <span class="comment">// &#x539F;&#x6587;&#x4EF6;&#x540D;.&#x540E;&#x7F00;  &#x7B49;&#x4EF7;&#x4E8E;&#x8F93;&#x51FA;&#x539F;&#x6587;&#x4EF6;&#x540D;</span></span><br><span class="line">        outputPath: <span class="string">&apos;./&apos;</span>  <span class="comment">// &#x7ED3;&#x5408;path &#x5B9A;&#x4F4D;&#x8F93;&#x51FA;&#x76EE;&#x5F55;&#x4E3A;dist</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="DllReferencePlugin"><a href="#DllReferencePlugin" class="headerlink" title="DllReferencePlugin"></a>DllReferencePlugin</h3><p>&#x2003;&#x2003;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F52;&#x5C5E;&#x4E8E;<code>webpack</code>&#x4E0B;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#xFF0C;&#x4F1A;&#x68C0;&#x89C6;<code>manifest.json</code>&#x4E2D;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x7565;&#x8FC7;&#x5DF2;&#x88AB;&#x5904;&#x7406;&#x7684;&#x6A21;&#x5757;&#x3002;&#x4E0E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x4E00;&#x6587;&#x4E2D;&#x7684;&#x5904;&#x7406;&#x76F8;&#x540C;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.DllReferencePlugin({</span><br><span class="line">    context: __dirname,</span><br><span class="line">    manifest: <span class="built_in">require</span>(<span class="string">&apos;./dist/vendor-manifest.json&apos;</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h3 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h3><p>&#x2003;&#x2003;&#x7528;&#x4E8E;&#x6E05;&#x7406;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x7F16;&#x8BD1;&#x524D;&#x6E05;&#x7A7A;&#x4F60;&#x5B58;&#x653E;&#x90E8;&#x7F72;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x7684;<code>dist</code>&#x3002;&#x5F15;&#x5165;&#x65B9;&#x5F0F;&#x52A1;&#x5FC5;&#x6CE8;&#x610F;&#xFF0C;&#x5728;<code>webpack4.x</code>&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x987B;&#x8981;&#x901A;&#x8FC7;<code>const { CleanWebpackPlugin } = require(&apos;clean-webpack-plugin&apos;)</code>&#x7684;&#x65B9;&#x5F0F;&#x5F15;&#x7528;&#x3002;</p><p>&#x2003;&#x2003;&#x524D;&#x6587;&#x6211;&#x4EEC;&#x6709;&#x8BA8;&#x8BBA;&#x4F1A;&#x5148;&#x6253;&#x4E00;&#x4E2A;<code>dll</code>&#x51FA;&#x6765;&#xFF0C;&#x800C;&#x914D;&#x7F6E;<code>dll</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6E05;&#x7406;&#x4E86;&#x4E00;&#x6B21;&#x76EE;&#x5F55;&#xFF0C;&#x5728;<code>build</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x540C;&#x6837;&#x9700;&#x8981;&#x518D;&#x6E05;&#x7406;&#x4E00;&#x6B21;&#x4E4B;&#x524D;&#x53EF;&#x80FD;&#x6253;&#x5305;&#x8FC7;&#x7684;&#x65E7;&#x5185;&#x5BB9;&#xFF0C;&#x4F46;&#x50CF;<code>vendor.dll.js</code>&#x3001;<code>vendor.manifest.json</code>&#x4E4B;&#x7C7B;&#x7684;<code>dll</code>&#x751F;&#x6210;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x4FDD;&#x7559;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x8BE5;&#x63D2;&#x4EF6;&#x63D0;&#x4F9B;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5C5E;&#x6027;<code>cleanOnceBeforeBuildPatterns</code>&#x4ECB;&#x5165;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> CleanWebpackPlugin({</span><br><span class="line">    cleanOnceBeforeBuildPatterns: [<span class="string">&apos;**/*&apos;</span>, <span class="string">&apos;!vendor.dll.js&apos;</span>, <span class="string">&apos;!vendor-manifest.json&apos;</span>, <span class="string">&apos;!vendors~pdfjsWorker.dll.js&apos;</span>], <span class="comment">// &#x6570;&#x7EC4;&#x683C;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;!&#x4FDD;&#x7559;&#x4F60;&#x8981;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8868;&#x660E;&#x5F53;&#x524D;&#x76EE;&#x5F55;</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h3 id="CopyWebpackPlugin"><a href="#CopyWebpackPlugin" class="headerlink" title="CopyWebpackPlugin"></a>CopyWebpackPlugin</h3><p>&#x2003;&#x2003;&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x6709;&#x4E9B;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4E0D;&#x662F;&#x901A;&#x8FC7;<code>url</code>&#x5F15;&#x7528;&#x7684;&#xFF0C;&#x987B;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x8F93;&#x51FA;&#x5230;<code>dist</code>&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>CopyWebpackPlugin</code>&#x63D2;&#x4EF6;&#x62F7;&#x8D1D;&#x8FC7;&#x53BB;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> CopyWebpackPlugin([</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">from</span>: <span class="string">&apos;./public/&apos;</span>,</span><br><span class="line">        to: <span class="string">&apos;./&apos;</span></span><br><span class="line">    }</span><br><span class="line">])</span><br></pre></td></tr></tbody></table></figure><h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h3><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x8DDF;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x7684;&#x914D;&#x7F6E;&#x4E5F;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x90E8;&#x7F72;&#x65F6;&#x987B;&#x8981;&#x5199;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x9002;&#x5F53;&#x51CF;&#x5C0F;&#x4F53;&#x79EF;&#xFF0C;&#x53EF;&#x4EE5;&#x5982;&#x4E0B;&#x64CD;&#x4F5C;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin({</span><br><span class="line">    template: path.resolve(__dirname, <span class="string">&apos;./src/index.ejs&apos;</span>),</span><br><span class="line">    filename: <span class="string">&apos;index.html&apos;</span>,</span><br><span class="line">    alwaysWriteToDisk: <span class="literal">true</span>,  <span class="comment">// &#x5199;&#x5165;&#x78C1;&#x76D8;</span></span><br><span class="line">    chunks: [<span class="string">&apos;vendor&apos;</span>, <span class="string">&apos;index&apos;</span>],  <span class="comment">// &#x914D;&#x7F6E;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x7684;&#x5206;&#x5757;&#x5185;&#x5BB9;&#xFF0C;&#x6709;&#x5206;&#x5757;&#x52A0;vendor</span></span><br><span class="line">    minify: {</span><br><span class="line">        removeComments: <span class="literal">true</span>,</span><br><span class="line">        collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">        removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h3 id="optimization&#x538B;&#x7F29;&#x4F18;&#x5316;"><a href="#optimization&#x538B;&#x7F29;&#x4F18;&#x5316;" class="headerlink" title="optimization&#x538B;&#x7F29;&#x4F18;&#x5316;"></a>optimization&#x538B;&#x7F29;&#x4F18;&#x5316;</h3><p>&#x2003;&#x2003;&#x8FC7;&#x53BB;&#x7248;&#x672C;&#x7684;webpack&#x5E38;&#x91C7;&#x7528;<code>UglifyJsPlugin</code>&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x538B;&#x7F29;&#xFF0C;&#x5728;webpack4.x&#x4E2D;&#x5219;&#x6539;&#x4E3A;&#x5728;<code>optimization</code>&#x4E0B;&#x914D;&#x7F6E;<code>minimizer</code>&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x91CC;&#x9762;&#x662F;&#x4F7F;&#x7528;&#x63D2;&#x4EF6;&#x3002;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x4F7F;&#x7528;<code>TerserPlugin</code>&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">optimization: {</span><br><span class="line">    minimize: <span class="literal">true</span>,</span><br><span class="line">    minimizer: [</span><br><span class="line">        <span class="keyword">new</span> TerserPlugin({</span><br><span class="line">            terserOptions: {</span><br><span class="line">                output: {</span><br><span class="line">                    comments: <span class="literal">false</span>, <span class="comment">// &#x914D;&#x5408;&#x4E0B;&#x9762;&#x7684;extractComments&#xFF0C;&#x79FB;&#x9664;&#x4EE3;&#x7801;&#x4E2D;&#x6CE8;&#x91CA;</span></span><br><span class="line">                    compress: {}, <span class="comment">// &#x9ED8;&#x8BA4; &#x8BBE;&#x7F6E;false&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#x538B;&#x7F29;&#x73AF;&#x8282; &#x60F3;&#x81EA;&#x5DF1;&#x5B9A;&#x5236; &#x89C1; https://github.com/terser/terser#compress-options</span></span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">            <span class="comment">// sourceMap: true,</span></span><br><span class="line">            extractComments: <span class="literal">false</span>, <span class="comment">// &#x4E0D;&#x5355;&#x72EC;&#x63D0;&#x53D6;/^\**!|@preserve|@license|@cc_on/i&#x89C4;&#x5219;&#x7684;&#x6CE8;&#x91CA;&#xFF0C;&#x5E76;&#x751F;&#x6210;xx.js.LICENSE</span></span><br><span class="line">            cache: <span class="literal">true</span>,  <span class="comment">// &#x5F00;&#x542F;&#x7F13;&#x5B58;</span></span><br><span class="line">            parallel: <span class="literal">true</span>, <span class="comment">// &#x662F;&#x5426;&#x5E76;&#x53D1; &#x8BBE;&#x7F6E;&#x4E3A;true &#x5E76;&#x53D1;&#x6570;&#x4E3A; os.cpus().length - 1 &#x5373;&#x4F60;&#x7684;&#x5185;&#x6838;&#x6570; - 1 &#x4E5F;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x6570;&#x5B57;</span></span><br><span class="line">        }),</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="stats"><a href="#stats" class="headerlink" title="stats"></a>stats</h3><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x7528;&#x6765;&#x63A7;&#x5236;&#x547D;&#x4EE4;&#x884C;&#x8F93;&#x51FA;&#x7EDF;&#x8BA1;&#x5185;&#x5BB9;&#x7684;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x4E00;&#x5806;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#xFF0C;&#x975E;&#x5E38;&#x5197;&#x4F59;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x60F3;&#x770B;&#x5230;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x4E86;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;&#x4EE5;&#x53CA;&#x62A5;&#x9519;&#x65F6;&#x662F;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x7684;&#x914D;&#x7F6E;:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">stats: {</span><br><span class="line">    all: false, // &#x4E0D;&#x8F93;&#x51FA;&#x5168;&#x90E8;&#x4FE1;&#x606F;</span><br><span class="line">    assets: true, // &#x8F93;&#x51FA;&#x6700;&#x540E;&#x7684;&#x6253;&#x5305;&#x6587;&#x4EF6;</span><br><span class="line">    errors: true, // &#x9047;&#x5230;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x8F93;&#x51FA;&#x5185;&#x5BB9;</span><br><span class="line">    warnings: false,  // &#x9759;&#x9ED8;warning</span><br><span class="line">    moduleTrace: true,  // &#x9047;&#x5230;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x5B9A;&#x4F4D;&#x6587;&#x4EF6;</span><br><span class="line">    errorDetails: true, // &#x8F93;&#x51FA;&#x5177;&#x4F53;&#x9519;&#x8BEF;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="&#x6BD4;&#x8F83;"><a href="#&#x6BD4;&#x8F83;" class="headerlink" title="&#x6BD4;&#x8F83;"></a>&#x6BD4;&#x8F83;</h2><p>&#x2003;&#x2003;&#x4EE5;&#x4E0A;&#x5927;&#x81F4;&#x5C31;&#x662F;&#x672C;&#x4EBA;&#x8FC1;&#x79FB;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4E0B;&#x9762;&#x8D34;&#x4E00;&#x4E0B;&#x64CD;&#x4F5C;&#x524D;&#x540E;&#x7684;&#x6BD4;&#x8F83;&#x56FE;&#x2026;</p><p>&#x2003;&#x2003;&#x539F;&#x672C;&#x811A;&#x624B;&#x67B6;&#x81EA;&#x5E26;&#x7684;&#x6253;&#x5305;&#xFF1A;</p><p><img src="/2019/11/12/webpack4-xÁîü‰∫ßÁéØÂ¢ÉÁØá/old.jpg" alt=""></p><p>&#x2003;&#x2003;&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x6709;&#x540C;&#x5B66;&#x4F1A;&#x95EE;&#x8FD9;&#x4E2A;<code>File sizes after gzip</code>&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x6253;&#x51FA;&#x6765;&#x7684;&#x4F53;&#x79EF;&#x5C31;&#x662F;<code>gzip</code>&#x538B;&#x7F29;&#x4F53;&#x79EF;&#x5417;&#xFF1F;&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x7684;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x5728;<code>react-dev-utils</code>&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#x5E2E;&#x52A9;&#x4E0B;&#x8BA1;&#x7B97;&#x4E86;&#x6587;&#x4EF6;&#x5904;&#x7406;&#x540E;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x5E76;&#x975E;&#x662F;&#x771F;&#x5B9E;&#x8FDB;&#x884C;&#x4E86;&#x5904;&#x7406;&#x3002;&#x662F;&#x5426;&#x5F00;&#x542F;<code>gzip</code>&#x9700;&#x8981;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5904;&#x7406;&#x3002;</p><p>&#x2003;&#x2003;&#x8FC1;&#x79FB;&#x9B54;&#x6539;&#x540E;&#xFF1A;</p><ol><li>&#x6253;<code>dll</code>&#x8017;&#x65F6;&#xFF1A;</li></ol><p><img src="/2019/11/12/webpack4-xÁîü‰∫ßÁéØÂ¢ÉÁØá/newDll.jpg" alt=""></p><ol start="2"><li>&#x751F;&#x4EA7;<code>build</code>&#xFF1A;</li></ol><p><img src="/2019/11/12/webpack4-xÁîü‰∫ßÁéØÂ¢ÉÁØá/newB.jpg" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰πãÂâçÂÅöËøáÂºÄÂèëÁéØÂ¢ÉÁöÑwebpack4.xËøÅÁßªÔºå‰ΩÜÊòØÁî±‰∫é‰∏Ä‰∫õÂéüÂõ†ÂêéÁª≠Áîü‰∫ßÁöÑÈÖçÁΩÆÊîπÈÄ†ÊêÅÁΩÆ‰∫Ü‚Ä¶ËøëÊúüÊ≠£Âú®ÁùÄÊâãÂ§ÑÁêÜËøôÂùóÔºåÊú¨ÊñáÊòØÂØπËøÅÁßªËøáÁ®ãÁöÑËÆ∞ÂΩïÂàÜ‰∫´ÔºåÂåÖÊã¨‰∏Ä‰∫õÊñ∞ÁâàÊú¨ÁöÑÂ§ÑÁêÜÊñπÂºèÂíåÂÆûÈôÖÊîπÂÜôÂ≠òÂú®ÁöÑÈóÆÈ¢ò„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="webpack" scheme="https://chrisdeo.github.io/tags/webpack/"/>
    
      <category term="Â∑•Á®ãÂåñ" scheme="https://chrisdeo.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ËÆ∫js‰∏≠ÁöÑsortÊñπÊ≥ï</title>
    <link href="https://chrisdeo.github.io/2019/11/07/%E8%AE%BAjs%E4%B8%AD%E7%9A%84sort%E6%96%B9%E6%B3%95/"/>
    <id>https://chrisdeo.github.io/2019/11/07/ËÆ∫js‰∏≠ÁöÑsortÊñπÊ≥ï/</id>
    <published>2019-11-07T00:56:22.000Z</published>
    <updated>2019-11-13T11:48:59.463Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;sort&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x524D;&#x7AEF;&#x5DE5;&#x7A0B;&#x5E08;&#x5728;&#x5E73;&#x65E5;&#x5F00;&#x53D1;&#x4E2D;&#x63A5;&#x89E6;&#x5230;&#x6700;&#x591A;&#x7684;algorithm&#x4E86;&#xFF0C;&#x4F46;&#x6211;&#x60F3;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x662F;&#x6CA1;&#x6709;&#x5173;&#x6CE8;&#x8FC7;&#x5E95;&#x5C42;&#x903B;&#x8F91;&#x7684;&#x2026;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x5C31;&#x4EE5;&#x6211;&#x672C;&#x4EBA;&#x6765;&#x8BF4;&#xFF08;&#x5148;&#x628A;&#x83DC;&#x9E21;&#x672C;&#x4F53;&#x6302;&#x4E0A;&#x6765;&#xFF09;&#xFF0C;&#x5BF9;<code>Array.prototype.sort</code>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x5728;&#x8F83;&#x5C0F;&#x6570;&#x91CF;&#x7684;&#x6392;&#x5E8F;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;&#x5927;&#x6570;&#x91CF;&#x7EA7;&#x5219;&#x4F1A;&#x8F6C;&#x5FEB;&#x6392;&#x3002;</p><p>&#x2003;&#x2003;<a href="https://github.com/v8/v8/blob/ad82a40509c5b5b4680d4299c8f08d6c6d31af3c/src/js/array.js" target="_blank" rel="noopener">v8 array.js</a>&#x90E8;&#x5206;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In-place QuickSort algorithm.</span></span><br><span class="line"><span class="comment">// For short (length &lt;= 22) arrays, insertion sort is used for efficiency.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> comparefn = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (x === y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (%_IsSmi(x) &amp;&amp; %_IsSmi(y)) {</span><br><span class="line">    <span class="keyword">return</span> %SmiLexicographicCompare(x, y);</span><br><span class="line">    }</span><br><span class="line">    x = TO_STRING(x);</span><br><span class="line">    y = TO_STRING(y);</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> x &lt; y ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> InsertionSort = <span class="function"><span class="keyword">function</span> <span class="title">InsertionSort</span>(<span class="params">a, from, to</span>) </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span> + <span class="number">1</span>; i &lt; to; i++) {</span><br><span class="line">        <span class="keyword">var</span> element = a[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="keyword">from</span>; j--) {</span><br><span class="line">            <span class="keyword">var</span> tmp = a[j];</span><br><span class="line">            <span class="keyword">var</span> order = comparefn(tmp, element);</span><br><span class="line">            <span class="keyword">if</span> (order &gt; <span class="number">0</span>) {</span><br><span class="line">                a[j + <span class="number">1</span>] = tmp;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        a[j + <span class="number">1</span>] = element;</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6839;&#x636E;&#x6CE8;&#x91CA;&#xFF0C;&#x5728;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x4E0D;&#x8D85;&#x8FC7;22&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x5C06;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;22&#x7684;&#x60C5;&#x51B5;&#x624D;&#x91C7;&#x7528;&#x5FEB;&#x6392;&#x3002;</p><h3 id="&#x63D2;&#x5165;&#x6392;&#x5E8F;"><a href="#&#x63D2;&#x5165;&#x6392;&#x5E8F;" class="headerlink" title="&#x63D2;&#x5165;&#x6392;&#x5E8F;"></a>&#x63D2;&#x5165;&#x6392;&#x5E8F;</h3><p>&#x2003;&#x2003;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x601D;&#x60F3;&#x5F88;&#x7B80;&#x5355;&#xFF1A;</p><p>&#x2003;&#x2003;1. &#x901A;&#x8FC7;&#x9010;&#x6B65;&#x63D2;&#x5165;&#x4F7F;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#x3002;<br>&#x2003;&#x2003;2. &#x8BA4;&#x4E3A;&#x5DF2;&#x63D2;&#x5165;&#x90E8;&#x5206;&#x6709;&#x5E8F;&#x3002;<br>&#x2003;&#x2003;3. &#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF08;&#x81EA;&#x7136;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF09;&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x3002;<br>&#x2003;&#x2003;4. &#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x81EA;&#x540E;&#x5411;&#x524D;&#x68C0;&#x89C6;&#xFF0C;&#x662F;&#x5426;&#x6709;&#x6BD4;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x5927;&#x7684;&#x5143;&#x7D20;&#x5B58;&#x5728;&#x3002;<br>&#x2003;&#x2003;5. &#x7531;&#x4E8E;&#x662F;&#x81EA;&#x540E;&#x5411;&#x524D;&#x68C0;&#x89C6;&#xFF0C;&#x90A3;&#x7B2C;&#x4E00;&#x4E2A;&#x62FF;&#x5230;&#x7684;&#x5143;&#x7D20;&#x81EA;&#x7136;&#x662F;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x5185;&#x6700;&#x5927;&#x7684;&#x3002;<br>&#x2003;&#x2003;6. &#x5982;&#x679C;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x4E0E;&#x5012;&#x5E8F;&#x62FF;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#x66F4;&#x5927;&#xFF0C;&#x90A3;&#x76F4;&#x63A5;&#x8DF3;&#x51FA;&#x5FAA;&#x73AF;&#x3002;&#x6B64;&#x65F6;<code>i === j + 1</code>&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x8FD8;&#x662F;&#x5728;&#x8001;&#x4F4D;&#x7F6E;&#x8D4B;&#x503C;&#x3002;<br>&#x2003;&#x2003;7. &#x5982;&#x679C;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x4E0E;&#x5012;&#x5E8F;&#x62FF;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#x66F4;&#x5C0F;&#xFF0C;&#x90A3;&#x5C31;&#x5F00;&#x59CB;&#x5FAA;&#x73AF;&#x5F80;&#x524D;&#x6BD4;&#x8F83;&#xFF0C;&#x6BCF;&#x4E00;&#x6B21;&#x6BD4;&#x8F83;&#x53EA;&#x8981;&#x66F4;&#x5C0F;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x5143;&#x7D20;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;<code>a[j+1] = a[j]</code>&#x3002;<br>&#x2003;&#x2003;8. &#x76F4;&#x5230;&#x9047;&#x5230;&#x6BD4;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x5C0F;&#x7684;&#x5143;&#x7D20;&#x505C;&#x4E0B;&#xFF0C;&#x628A;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x586B;&#x5230;&#x540E;&#x9762;&#x7684;&#x5751;&#x4E0A;&#xFF0C;<code>a[j + 1] = element</code>&#x3002; </p><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x5206;&#x6790;&#x5230;&#x8FD9;&#xFF0C;&#x53C8;&#x60F3;&#x8D77;&#x4E86;&#x90A3;&#x5929;&#x90A3;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x611F;&#x89C9;&#x6709;&#x70B9;&#x50CF;&#xFF0C;&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x6570;&#x7EC4;&#x6574;&#x4F53;&#x5DF2;&#x77E5;&#xFF0C;&#x662F;&#x4E2A;&#x9759;&#x6001;&#x7684;&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x4E4B;&#x524D;&#x7684;&#x90A3;&#x4E2A;&#x5219;&#x662F;&#x52A8;&#x6001;&#x6BD4;&#x8F83;&#x6784;&#x5EFA;&#x6709;&#x5E8F;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p><h3 id="&#x5FEB;&#x901F;&#x6392;&#x5E8F;"><a href="#&#x5FEB;&#x901F;&#x6392;&#x5E8F;" class="headerlink" title="&#x5FEB;&#x901F;&#x6392;&#x5E8F;"></a>&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h3><p>&#x2003;&#x2003;&#x6700;&#x65E9;&#x63A5;&#x89E6;&#x5FEB;&#x6392;&#x81EA;&#x7136;&#x662F;&#x5927;&#x5B66;&#x65F6;&#x671F;&#x7684;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x300B;&#x8BFE;&#x7A0B;&#xFF0C;&#x540E;&#x9762;&#x5B66;js&#x7684;&#x65F6;&#x5019;&#x770B;&#x4E86;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;JavaScript&#x63CF;&#x8FF0;&#x300B;&#x4E00;&#x4E66;&#x3002;&#x4E4B;&#x6240;&#x4EE5;&#x88AB;&#x79F0;&#x4E3A;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x76F8;&#x8F83;&#x4E8E;&#x5176;&#x4ED6;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x800C;&#x8A00;&#xFF0C;&#x5B83;&#x7684;&#x786E;&#x5F88;&#x5FEB;&#x2026;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x8BA8;&#x8BBA;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;&#x4EE5;&#x5E73;&#x5747;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x6765;&#x8861;&#x91CF;&#xFF0C;&#x5FEB;&#x6392;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; <strong>O(nlogn)</strong>&#x3002;</p><p><img src="/2019/11/07/ËÆ∫js‰∏≠ÁöÑsortÊñπÊ≥ï/complexity.jpg" alt=""></p><p>&#x2003;&#x2003;&#x90A3;&#x4EC0;&#x4E48;&#x662F;&#x5FEB;&#x6392;&#xFF1F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;JavaScript&#x63CF;&#x8FF0;&#x300B;&#x4E00;&#x4E66;&#x4E2D;&#x7ED9;&#x51FA;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x662F;&#x901A;&#x8FC7;&#x5BFB;&#x627E;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x70B9;&#xFF0C;&#x5F00;&#x8F9F;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x6BD4;&#x57FA;&#x51C6;&#x70B9;&#x5C0F;&#x7684;&#x5143;&#x7D20;&#x63A8;&#x5165;&#x5DE6;&#x4FA7;&#x6570;&#x7EC4;&#xFF0C;&#x6BD4;&#x57FA;&#x51C6;&#x70B9;&#x5927;&#x7684;&#x5143;&#x7D20;&#x63A8;&#x5165;&#x53F3;&#x4FA7;&#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5728;&#x5DE6;&#x53F3;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x9012;&#x5F52;&#x524D;&#x9762;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x6700;&#x7EC8;&#x901A;&#x8FC7;<code>concat</code>&#x6216;&#x89E3;&#x6784;&#x65B9;&#x6CD5;&#x94FA;&#x5E73;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>{</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span> (arr.length === <span class="number">0</span> || arr.length === <span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"><span class="keyword">let</span> left = [];</span><br><span class="line"><span class="keyword">let</span> right = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.length; i++) {</span><br><span class="line"><span class="keyword">if</span> (arr[i] &gt; arr[<span class="number">0</span>]) {</span><br><span class="line">right.push(arr[i]);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">left.push(arr[i]);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> [...quickSort(left), arr[<span class="number">0</span>], ...quickSort(right)];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E0A;&#x9762;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x76F4;&#x89C2;&#x597D;&#x7406;&#x89E3;&#x7684;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E5F;&#x53D1;&#x73B0;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x5FEB;&#x6392;&#x4EE3;&#x7801;&#x660E;&#x663E;&#x4E0D;&#x662F;&#x8FD9;&#x4E48;&#x73A9;&#x7684;&#xFF0C;&#x770B;&#x4E0A;&#x53BB;&#x8981;&#x201C;&#x590D;&#x6742;&#x201D;&#x5F97;&#x591A;&#x3002;</p><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x5148;&#x4E0D;&#x76F4;&#x63A5;&#x53BB;&#x8BA8;&#x8BBA;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x5982;&#x4F55;&#x4F18;&#x5316;&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x5FEB;&#x6392;&#x7B97;&#x6CD5;&#xFF1F;</p><p>&#x2003;&#x2003;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x4ECB;&#x5165;&#x70B9;&#x662F;&#x201C;&#x7A7A;&#x95F4;&#x6D88;&#x8017;&#x201D;&#x3002;&#x5728;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7684;&#x5FEB;&#x6392;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x6BCF;&#x6B21;&#x9012;&#x5F52;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x90FD;&#x4F1A;&#x5F00;&#x8F9F;&#x4E24;&#x4E2A;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x6765;&#x8FDB;&#x884C;&#x5C0F;&#x5806;&#x548C;&#x5927;&#x5806;&#x7684;&#x653E;&#x7F6E;&#x3002;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x4E0D;&#x5F00;&#x8F9F;&#x8FD9;&#x4E9B;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#x6765;&#x8FDB;&#x884C;&#x5FEB;&#x6392;&#x5462;&#xFF1F;</p><h4 id="&#x539F;&#x5730;&#x5FEB;&#x6392;"><a href="#&#x539F;&#x5730;&#x5FEB;&#x6392;" class="headerlink" title="&#x539F;&#x5730;&#x5FEB;&#x6392;"></a>&#x539F;&#x5730;&#x5FEB;&#x6392;</h4><p>&#x2003;&#x2003;&#x65B9;&#x6848;&#x81EA;&#x7136;&#x662F;&#x6709;&#x7684;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x539F;&#x5730;&#x5FEB;&#x6392;&#x3002;&#x539F;&#x5730;&#x5FEB;&#x6392;&#x7684;&#x601D;&#x60F3;&#x5728;&#x4E8E;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x57FA;&#x51C6;&#x503C;&#x548C;&#x904D;&#x5386;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x518D;&#x4EA4;&#x6362;&#x7684;&#x52A8;&#x4F5C;&#x6765;&#x66FF;&#x4EE3;&#x5206;&#x6CBB;&#x65F6;&#x7684;&#x7A7A;&#x95F4;&#x5F00;&#x8F9F;&#xFF0C;&#x4F18;&#x5316;&#x4E86;&#x9012;&#x5F52;&#x73AF;&#x8282;&#x4E2D;&#x7A7A;&#x95F4;&#x635F;&#x8017;&#x7684;&#x95EE;&#x9898;&#x3002;</p><p>&#x2003;&#x2003;&#x90A3;&#x65E2;&#x7136;&#x662F;&#x4EA4;&#x6362;&#xFF0C;&#x80AF;&#x5B9A;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x4EA4;&#x6362;&#x7684;&#x51FD;&#x6570;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, from, to</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (arr[<span class="keyword">from</span>] === arr[to]) <span class="keyword">return</span>; <span class="comment">// &#x4E24;&#x503C;&#x76F8;&#x7B49;&#xFF0C;&#x6CA1;&#x5FC5;&#x8981;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;</span></span><br><span class="line">    [arr[<span class="keyword">from</span>], arr[to]] = [arr[to], arr[<span class="keyword">from</span>]];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6709;&#x4E86;&#x4EA4;&#x6362;&#x7684;&#x8F85;&#x52A9;&#x51FD;&#x6570;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x539F;&#x5730;&#x5FEB;&#x6392;&#x7684;&#x51FD;&#x6570;&#x4E3B;&#x4F53;&#xFF0C;&#x5927;&#x81F4;&#x601D;&#x8DEF;&#x5982;&#x4E0B;&#xFF1A;</p><ol><li>&#x8BBE;&#x7F6E;&#x57FA;&#x51C6;&#x70B9;&#x3002;</li><li>&#x4ECE;&#x57FA;&#x51C6;&#x70B9;&#x540E;&#x5F00;&#x59CB;&#x5FAA;&#x73AF;&#x3002;</li><li>&#x4ECE;&#x524D;&#x5411;&#x540E;&#x626B;&#x63CF;&#xFF0C;&#x627E;&#x5230;&#x6BD4;&#x57FA;&#x51C6;&#x70B9;&#x5927;&#x7684;&#x503C;&#xFF08;&#x79FB;&#x52A8;&#x5DE6;&#x6307;&#x9488;&#xFF09;&#xFF1B;</li><li>&#x4ECE;&#x540E;&#x5411;&#x524D;&#x626B;&#x63CF;&#xFF0C;&#x627E;&#x5230;&#x6BD4;&#x57FA;&#x51C6;&#x70B9;&#x5C0F;&#x7684;&#x503C;&#xFF08;&#x79FB;&#x52A8;&#x53F3;&#x6307;&#x9488;&#xFF09;&#xFF1B;</li><li>&#x4EA4;&#x6362;&#x4E24;&#x503C;&#xFF0C;&#x6700;&#x7EC8;&#x76EE;&#x7684;&#x662F;&#x6307;&#x9488;&#x91CD;&#x5408;&#x540E;&#xFF08;&#x627E;&#x5230;&#x4E2D;&#x4F4D;&#x7EBF;&#xFF09;&#xFF0C;&#x4E2D;&#x4F4D;&#x7EBF;&#x5DE6;&#x4FA7;&#x503C;&#x90FD;&#x5C0F;&#x4E8E;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x53F3;&#x4FA7;&#x90FD;&#x5927;&#x4E8E;&#x57FA;&#x51C6;&#x503C;&#xFF1B;</li><li>&#x5F53;&#x5DE6;&#x6307;&#x9488;&#x5927;&#x4E8E;&#x53F3;&#x6307;&#x9488;&#x65F6;&#x8DF3;&#x51FA;&#x5FAA;&#x73AF;&#xFF0C;&#x6B64;&#x65F6;&#x4E00;&#x6B21;&#x8F6E;&#x56DE;&#x5B8C;&#x6210;&#xFF0C;&#x4EA4;&#x6362;&#x57FA;&#x51C6;&#x4F4D;&#x7F6E;&#x5230;&#x4E2D;&#x4F4D;&#x7EBF;&#x5904;&#xFF1B;</li><li>&#x5728;&#x4E2D;&#x4F4D;&#x7EBF;&#x5DE6;&#x53F3;&#x4FA7;&#x5206;&#x522B;&#x9012;&#x5F52;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#x3002;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSortInPlace</span>(<span class="params">arr, from, to</span>) </span>{</span><br><span class="line">    <span class="comment">// &#x9012;&#x5F52;&#x51FA;&#x53E3;&#xFF0C;&#x8D77;&#x6B62;&#x626B;&#x63CF;&#x540C;&#x4F4D;&#x7F6E;&#x65F6;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x4EC5;&#x5269;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x65E0;&#x9700;&#x9012;&#x5F52;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span> &lt; to) {</span><br><span class="line">        <span class="keyword">let</span> pivot = arr[<span class="keyword">from</span>]; <span class="comment">// &#x57FA;&#x51C6;&#x70B9;</span></span><br><span class="line">        <span class="keyword">let</span> lStart = <span class="keyword">from</span> + <span class="number">1</span>; <span class="comment">// &#x5F00;&#x59CB;&#x6BD4;&#x8F83;&#x7684;&#x503C; &#x4ECE;&#x57FA;&#x51C6;&#x70B9;&#x540E;&#x4E00;&#x4E2A;&#x5F00;&#x59CB;</span></span><br><span class="line">        <span class="keyword">let</span> rEnd = to - <span class="number">1</span>; <span class="comment">// &#x904D;&#x5386;</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) {</span><br><span class="line">            <span class="keyword">while</span> (lStart &lt;= rEnd &amp;&amp; arr[lStart] &lt; pivot) {</span><br><span class="line">                lStart++;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">while</span> (lStart &lt;= rEnd &amp;&amp; arr[rEnd] &gt;= pivot) {</span><br><span class="line">                rEnd--;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (lStart &gt; rEnd) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                swap(arr, lStart, rEnd);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        swap(arr, <span class="keyword">from</span>, rEnd); <span class="comment">// &#x4EA4;&#x6362;&#x57FA;&#x51C6;&#x5230;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;&#xFF0C;&#x6B64;&#x65F6;rEnd&#x5DF2;&#x5728;&#x4E2D;&#x95F4;&#x6307;&#x9488;</span></span><br><span class="line">        quickSortInPlace(arr, <span class="keyword">from</span>, rEnd);</span><br><span class="line">        quickSortInPlace(arr, rEnd + <span class="number">1</span>, to);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="&#x5206;&#x533A;&#x95EE;&#x9898;"><a href="#&#x5206;&#x533A;&#x95EE;&#x9898;" class="headerlink" title="&#x5206;&#x533A;&#x95EE;&#x9898;"></a>&#x5206;&#x533A;&#x95EE;&#x9898;</h5><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x57FA;&#x672C;&#x7684;&#x539F;&#x5730;&#x5FEB;&#x6392;&#x7B97;&#x6CD5;&#xFF0C;&#x4F46;&#x4F9D;&#x65E7;&#x6709;&#x95EE;&#x9898;&#x3002;&#x4E3B;&#x8981;&#x8868;&#x73B0;&#x5728;&#x5206;&#x533A;&#x65F6;&#x662F;&#x5426;&#x80FD;&#x4F7F;&#x5F53;&#x524D;&#x533A;&#x57DF;&#x7B49;&#x5206;&#x3002;&#x82E5;&#x90FD;&#x80FD;&#x5747;&#x5206;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8BA8;&#x8BBA;&#x7684;&#x6700;&#x5FEB;&#x60C5;&#x5F62;<strong>O(nlogn)</strong>&#x3002;&#x4F46;&#x5982;&#x679C;&#x6BCF;&#x6B21;&#x5206;&#x533A;&#xFF0C;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x90A3;&#x76F8;&#x5F53;&#x4E8E;&#x9000;&#x5316;&#x4E86;&#xFF0C;&#x53C8;&#x53D8;&#x6210;&#x9010;&#x4E2A;&#x5FAA;&#x73AF;&#x7684;<strong>O(n^2)</strong>&#x60C5;&#x5F62;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x4E86;&#xFF0C;&#x6309;&#x7167;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x6BCF;&#x6B21;&#x5206;&#x5757;&#x90FD;&#x4F1A;&#x9020;&#x6210;&#x7A7A;&#x95F4;&#x6D6A;&#x8D39;&#xFF0C;&#x4E14;&#x6027;&#x80FD;&#x4E5F;&#x4F1A;&#x9000;&#x5316;&#x3002;</p><p>&#x2003;&#x2003;&#x90A3;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x6848;&#x662F;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x57FA;&#x51C6;&#x503C;&#x9009;&#x62E9;&#x7684;&#x5462;&#xFF1F;</p><h5 id="&#x4E09;&#x6570;&#x53D6;&#x4E2D;"><a href="#&#x4E09;&#x6570;&#x53D6;&#x4E2D;" class="headerlink" title="&#x4E09;&#x6570;&#x53D6;&#x4E2D;"></a>&#x4E09;&#x6570;&#x53D6;&#x4E2D;</h5><p>&#x2003;&#x2003;&#x5B57;&#x9762;&#x610F;&#x601D;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;&#x53D6;&#x4E09;&#x4E2A;&#x6570;&#x5B57;&#x4E2D;&#x5927;&#x5C0F;&#x5728;&#x4E2D;&#x95F4;&#x7684;&#x6570;&#x5B57;&#xFF0C;MDZZ&#x3002;</p><p>&#x2003;&#x2003;&#x7ED3;&#x5408;&#x5FEB;&#x6392;&#x5206;&#x533A;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x5F97;&#x5230;&#x5934;&#x3001;&#x5C3E;&#x5143;&#x7D20;&#x80AF;&#x5B9A;&#x662F;&#x8981;&#x53C2;&#x4E0E;&#x5176;&#x5185;&#x7684;&#xFF0C;&#x5269;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x4E00;&#x4E0B;&#x6E90;&#x7801;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> GetThirdIndex = <span class="function"><span class="keyword">function</span>(<span class="params">a, from, to</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> t_array = <span class="keyword">new</span> InternalArray();</span><br><span class="line">    <span class="comment">// Use both &apos;from&apos; and &apos;to&apos; to determine the pivot candidates.</span></span><br><span class="line">    <span class="keyword">var</span> increment = <span class="number">200</span> + ((to - <span class="keyword">from</span>) &amp; <span class="number">15</span>);</span><br><span class="line">    <span class="keyword">var</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">from</span> += <span class="number">1</span>;</span><br><span class="line">    to -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span>; i &lt; to; i += increment) {</span><br><span class="line">        t_array[j] = [i, a[i]];</span><br><span class="line">        j++;</span><br><span class="line">    }</span><br><span class="line">    t_array.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> comparefn(a[<span class="number">1</span>], b[<span class="number">1</span>]);</span><br><span class="line">    });</span><br><span class="line">    <span class="keyword">var</span> third_index = t_array[t_array.length &gt;&gt; <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> third_index;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> QuickSort = <span class="function"><span class="keyword">function</span> <span class="title">QuickSort</span>(<span class="params">a, from, to</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> third_index = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// &#x7565;</span></span><br><span class="line">    <span class="keyword">if</span> (to - <span class="keyword">from</span> &lt;= <span class="number">10</span>) {</span><br><span class="line">        InsertionSort(a, <span class="keyword">from</span>, to);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (to - <span class="keyword">from</span> &gt; <span class="number">1000</span>) {</span><br><span class="line">        third_index = GetThirdIndex(a, <span class="keyword">from</span>, to);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        third_index = <span class="keyword">from</span> + ((to - <span class="keyword">from</span>) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &#x7565;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5927;&#x6982;&#x7406;&#x89E3;&#x4E0B;&#xFF1A;</p><ol><li>&#x521D;&#x59CB;&#x5316;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x4E0E;&#x6BD4;&#x8F83;&#x7684;&#x57FA;&#x51C6;&#x6570;&#x5B57;&#x4E3A;0&#xFF1B;</li><li>&#x5F53;&#x533A;&#x95F4;&#x5728;11~1000&#x5185;&#x65F6;&#xFF0C;&#x53D6;<code>from + (to - from) / 2</code>;</li><li>&#x533A;&#x95F4;&#x5927;&#x4E8E;1000&#x65F6;&#xFF0C;&#x4F1A;&#x53D6;&#x4E00;&#x4E2A;&#x589E;&#x91CF;&#x533A;&#x95F4;&#xFF08;200~215&#xFF09;&#xFF0C;&#x5728;<code>from</code>&#x5230;<code>to</code>&#x95F4;&#x4EE5;&#x8BE5;&#x589E;&#x91CF;&#x533A;&#x95F4;&#x8FDB;&#x884C;&#x53D6;&#x503C;&#x6784;&#x6210;&#x65B0;&#x6570;&#x7EC4;&#xFF0C;&#x65B0;&#x6570;&#x7EC4;&#x6392;&#x5E8F;&#x540E;&#x8FD4;&#x56DE;&#x4E2D;&#x95F4;&#x503C;&#x7684;&#x7D22;&#x5F15;&#x5145;&#x5F53;&#x7B2C;&#x4E09;&#x4E2A;&#x6BD4;&#x8F83;&#x57FA;&#x51C6;&#x3002;</li><li>&#x6700;&#x540E;<code>from</code>&#x3001;<code>to</code>&#x3001;<code>third_index</code>&#x4E09;&#x6570;&#x6BD4;&#x8F83;&#xFF08;&#x8FC7;&#x7A0B;&#x89C1;&#x6E90;&#x7801;&#xFF09;&#xFF0C;&#x4E2D;&#x95F4;&#x503C;&#x4F5C;&#x57FA;&#x51C6;&#x503C;&#x3002;</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v0 &lt;= v1 &lt;= v2</span></span><br><span class="line">a[<span class="keyword">from</span>] = v0;</span><br><span class="line">a[to - <span class="number">1</span>] = v2;</span><br><span class="line"><span class="keyword">var</span> pivot = v1;</span><br></pre></td></tr></tbody></table></figure><h5 id="&#x6E90;&#x7801;&#x5206;&#x533A;"><a href="#&#x6E90;&#x7801;&#x5206;&#x533A;" class="headerlink" title="&#x6E90;&#x7801;&#x5206;&#x533A;"></a>&#x6E90;&#x7801;&#x5206;&#x533A;</h5><p>&#x2003;&#x2003;&#x5728;&#x4EE5;&#x4E0A;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5F97;&#x5230;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x5206;&#x533A;&#x5B9E;&#x73B0;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">partition: <span class="keyword">for</span> (<span class="keyword">var</span> i = low_end + <span class="number">1</span>; i &lt; high_start; i++) {</span><br><span class="line">    <span class="keyword">var</span> element = a[i];</span><br><span class="line">    <span class="keyword">var</span> order = comparefn(element, pivot);</span><br><span class="line">    <span class="keyword">if</span> (order &lt; <span class="number">0</span>) {</span><br><span class="line">        a[i] = a[low_end];</span><br><span class="line">        a[low_end] = element;</span><br><span class="line">        low_end++;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (order &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">do</span> {</span><br><span class="line">            high_start--;</span><br><span class="line">            <span class="keyword">if</span> (high_start == i) <span class="keyword">break</span> partition;</span><br><span class="line">            <span class="keyword">var</span> top_elem = a[high_start];</span><br><span class="line">            order = comparefn(top_elem, pivot);</span><br><span class="line">        } <span class="keyword">while</span> (order &gt; <span class="number">0</span>);</span><br><span class="line">        a[i] = a[high_start];</span><br><span class="line">        a[high_start] = element;</span><br><span class="line">        <span class="keyword">if</span> (order &lt; <span class="number">0</span>) {</span><br><span class="line">            element = a[i];</span><br><span class="line">            a[i] = a[low_end];</span><br><span class="line">            a[low_end] = element;</span><br><span class="line">            low_end++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (to - high_start &lt; low_end - <span class="keyword">from</span>) {</span><br><span class="line">    QuickSort(a, high_start, to);</span><br><span class="line">    to = low_end;</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    QuickSort(a, <span class="keyword">from</span>, low_end);</span><br><span class="line">    <span class="keyword">from</span> = high_start;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5206;&#x6790;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x5927;&#x81F4;&#x601D;&#x8DEF;&#x5982;&#x4E0B;&#xFF1A;</p><ol><li>&#x5148;&#x627E;&#x5230;&#x57FA;&#x51C6;&#x7D22;&#x5F15;&#xFF0C;&#x7136;&#x540E;&#x4EA4;&#x6362;&#x57FA;&#x51C6;&#x4E0E;&#x4E0B;&#x754C;&#xFF1B;</li><li>&#x4ECE;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x626B;&#x63CF;&#xFF0C;&#x9047;&#x5230;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5C0F;&#x7684;&#xFF0C;&#x4E0E;&#x57FA;&#x51C6;&#x503C;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x540C;&#x65F6;<code>low_end</code>&#x81EA;&#x589E;&#xFF0C;&#x6807;&#x5FD7;&#x57FA;&#x51C6;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B;</li><li>&#x9047;&#x5230;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5927;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5F00;&#x59CB;&#x4ECE;&#x4E0A;&#x8FB9;&#x754C;&#x5F80;&#x524D;&#x626B;&#x63CF;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5C0F;&#x7684;&#x5143;&#x7D20;&#xFF08;&#x4E0E;&#x5916;&#x90E8;&#x626B;&#x63CF;&#x6307;&#x9488;&#x91CD;&#x5408;&#xFF0C;&#x5219;&#x8DF3;&#x51FA;&#x5FAA;&#x73AF;&#xFF09;&#xFF1B;</li><li>&#x6B64;&#x65F6;&#xFF0C;&#x5C06;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x7684;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5C0F;&#x7684;&#x5143;&#x7D20; &#x4E0E; &#x524D;&#x9762;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5927;&#x7684;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#xFF1B;</li><li>&#x7136;&#x540E;&#x5C06;&#x57FA;&#x51C6;&#x503C;&#x4E0E;&#x8FD9;&#x4E2A;&#x8F83;&#x5C0F;&#x503C;&#x6362;&#x4F4D;&#xFF0C;<code>low_end</code>&#x81EA;&#x589E;&#xFF1B;</li><li>&#x7B2C;&#x4E00;round&#x5206;&#x533A;&#x7ED3;&#x675F;&#xFF0C;<strong>&#x53D6;&#x8303;&#x56F4;&#x5C0F;&#x7684;&#x533A;&#x57DF;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#xFF08;&#x51CF;&#x5C11;&#x9012;&#x5F52;&#x7684;&#x6DF1;&#x5EA6;&#xFF09;</strong>&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x5219;&#x7EE7;&#x7EED;&#x901A;&#x8FC7;<code>while</code>&#x5FAA;&#x73AF;&#x5904;&#x7406;&#x3002;</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;sortÊñπÊ≥ïÂèØ‰ª•ËØ¥ÊòØÂâçÁ´ØÂ∑•Á®ãÂ∏àÂú®Âπ≥Êó•ÂºÄÂèë‰∏≠Êé•Ëß¶Âà∞ÊúÄÂ§öÁöÑalgorithm‰∫ÜÔºå‰ΩÜÊàëÊÉ≥ÁªùÂ§ßÈÉ®ÂàÜ‰∫∫ÊòØÊ≤°ÊúâÂÖ≥Ê≥®ËøáÂ∫ïÂ±ÇÈÄªËæëÁöÑ‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="https://chrisdeo.github.io/tags/Javascript/"/>
    
      <category term="ÁÆóÊ≥ï" scheme="https://chrisdeo.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="ËÆ°ÁÆóÊú∫Âü∫Á°Ä" scheme="https://chrisdeo.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá</title>
    <link href="https://chrisdeo.github.io/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80-%E9%98%9F%E5%88%97%E7%AF%87/"/>
    <id>https://chrisdeo.github.io/2019/11/06/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá/</id>
    <published>2019-11-06T03:10:01.000Z</published>
    <updated>2019-11-07T13:04:38.426Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x90A3;&#x65E5;&#x2026;&#x5929;&#x6717;&#x6C14;&#x6E05;&#xFF0C;&#x60E0;&#x98CE;&#x548C;&#x7545;&#xFF0C;&#x9762;&#x8BD5;&#x8001;&#x54E5;&#x8BA9;&#x6211;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#x3002;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x561B;&#xFF0C;&#x5176;&#x5B9E;&#x633A;&#x7B80;&#x5355;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x6123;&#x662F;&#x8BA9;&#x6211;&#x6574;&#x590D;&#x6742;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x4E00;&#x5F00;&#x59CB;&#x8001;&#x54E5;&#x7684;&#x95EE;&#x6CD5;&#x662F;&#x201C;<code>setTimeout</code>&#x6839;&#x636E;&#x5176;&#x4E2D;&#x7684;&#x56DE;&#x8C03;<code>delay</code>&#x65F6;&#x957F;&#x6765;&#x8BBE;&#x7F6E;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x65F6;&#x95F4;&#x8D8A;&#x957F;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#xFF0C;&#x5E76;&#x4E14;&#x6700;&#x540E;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#x6309;&#x7167;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x5230;&#x4F4E;&#x4F9D;&#x6B21;&#x88AB;&#x8C03;&#x7528;&#x201D;&#x3002;&#x6211;&#x7B2C;&#x4E00;&#x53CD;&#x5E94;&#x5176;&#x5B9E;&#x662F;<code>Event Loop</code>&#xFF0C;&#x5B8F;&#x4EFB;&#x52A1;&#x672C;&#x8EAB;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x7EF4;&#x62A4;&#x5F02;&#x6B65;&#x7684;&#x673A;&#x5236;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4F3C;&#x4E4E;&#x6CA1;&#x529E;&#x6CD5;&#x4F7F;&#x5B83;&#x4EEC;&#x6709;&#x5E8F;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#xFF0C;&#x601D;&#x8003;&#x4E86;&#x4E00;&#x4F1A;&#x6211;&#x4F30;&#x8BA1;&#x662F;&#x6211;&#x7406;&#x89E3;&#x9519;&#x4E86;&#xFF0C;&#x9762;&#x8BD5;&#x8001;&#x54E5;&#x4E5F;&#x6362;&#x4E86;&#x79CD;&#x63CF;&#x8FF0;&#x3002;&#x5927;&#x610F;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#xFF0C;&#x4F7F;&#x5176;&#x4E2D;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x5148;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x5927;&#x81F4;&#x7ED9;&#x4E86;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span> </span>{</span><br><span class="line">    <span class="keyword">constructor</span>() {</span><br><span class="line">        <span class="keyword">this</span>.taskQueue = [];</span><br><span class="line">    }</span><br><span class="line">    addTask(fn, delay) {</span><br><span class="line">        <span class="keyword">let</span> taskDTO = {</span><br><span class="line">            fn: fn,</span><br><span class="line">            priority: delay,</span><br><span class="line">        };</span><br><span class="line">        <span class="keyword">this</span>.taskQueue.push(taskDTO);</span><br><span class="line">        <span class="keyword">this</span>.taskQueue.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.priority - b.priority);</span><br><span class="line">    }</span><br><span class="line">    runTask() {</span><br><span class="line">        <span class="keyword">let</span> curTask = <span class="keyword">this</span>.taskQueue.pop();</span><br><span class="line">        curTask.fn();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x81EA;&#x7136;&#x662F;&#x80FD;&#x8DD1;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x662F;&#x6781;&#x8822;&#x7684;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6BCF;&#x6B21;&#x6DFB;&#x52A0;&#x4EFB;&#x52A1;&#x90FD;&#x9700;&#x8981;&#x53BB;&#x6392;&#x5E8F;&#x4E00;&#x6B21;&#xFF0C;&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;<code>Array.prototype.sort</code>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;&#x4E0D;&#x540C;&#x6570;&#x91CF;&#x7EA7;&#x5206;&#x522B;&#x4F1A;&#x91C7;&#x7528;&#x76F4;&#x63D2;&#x548C;&#x5FEB;&#x6392;&#x7684;&#x6392;&#x5E8F;&#x65B9;&#x6848;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;<code>sort</code>&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x5B9E;&#x6BCF;&#x4E00;&#x6B21;&#x6392;&#x5E8F;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x65E2;&#x5F97;&#x961F;&#x5217;&#x5DF2;&#x7136;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x4E86;&#xFF0C;&#x5B8C;&#x5168;&#x6CA1;&#x5FC5;&#x8981;&#x518D;&#x6B21;&#x53BB;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x52A8;&#x4F5C;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5F53;&#x6570;&#x91CF;&#x7EA7;&#x4E0A;&#x53BB;&#x4EE5;&#x540E;&#x4F1A;&#x9020;&#x6210;&#x5927;&#x91CF;&#x5197;&#x4F59;&#x7684;&#x8FD0;&#x7B97;&#x3002;&#x771F;&#x6B63;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x5E94;&#x5F53;&#x662F;<strong>&#x63D2;&#x5165;</strong>&#x3002;&#x5728;&#x63D2;&#x5165;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x5224;&#x65AD;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4F7F;&#x961F;&#x5217;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#x3002;</p><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5957;&#x7528;&#x751F;&#x6D3B;&#x4E2D;&#x7684;&#x201C;&#x63D2;&#x961F;&#x201D;&#x5C31;&#x7279;&#x522B;&#x597D;&#x7406;&#x89E3;&#xFF08;&#x4E0D;&#x8FC7;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x5F53;&#x65F6;&#x4F1A;&#x7EA0;&#x7ED3;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x503C;&#x7684;&#x95EE;&#x9898;&#xFF09;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x91C7;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x3002;&#x73B0;&#x5728;&#x590D;&#x76D8;&#x4E00;&#x4E0B;&#xFF0C;&#x5148;&#x770B;&#x4E00;&#x5F20;&#x751F;&#x6D3B;&#x4E2D;&#x7684;&#x6392;&#x961F;&#x56FE;&#xFF1A;</p><p><img src="/2019/11/06/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá/./queue.jpg" style="width: 60%;"></p><p>&#x2003;&#x2003;&#x90A3;&#x6211;&#x4EEC;&#x5927;&#x81F4;&#x6709;&#x4EE5;&#x4E0B;&#x7684;&#x5224;&#x65AD;&#x903B;&#x8F91;&#xFF1A;</p><p>&#x2003;&#x2003;1. &#x961F;&#x5217;&#x4E2D;&#x65E0;&#x4EFB;&#x52A1;&#xFF0C;&#x63D2;&#x5165;&#x7B2C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF1B;<br>&#x2003;&#x2003;2. &#x6765;&#x4E86;&#x65B0;&#x4EFB;&#x52A1;&#xFF0C;&#x8FDB;&#x884C;&#x4F18;&#x5148;&#x7EA7;&#x6BD4;&#x8F83;&#x3002;&#x4ECE;&#x961F;&#x5217;&#x9996;&#x90E8;&#x5230;&#x5C3E;&#x90E8;&#x68C0;&#x89C6;&#xFF08;&#x5FAA;&#x73AF;&#xFF09;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#x6BD4;&#x63D2;&#x5165;&#x4EFB;&#x52A1;&#x4F4E;&#x7684;&#xFF1B;<br>&#x2003;&#x2003;3. &#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5F1F;&#x5F1F;&#x8001;&#x8001;&#x5B9E;&#x5B9E;&#x6392;&#x961F;&#x53BB;&#xFF0C;&#x63D2;&#x5165;&#x5230;&#x961F;&#x5217;&#x5C3E;&#x90E8;&#xFF1B;<br>&#x2003;&#x2003;4. &#x5B58;&#x5728;&#xFF0C;&#x5219;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x6BD4;&#x5176;&#x4F18;&#x5148;&#x7EA7;&#x4F4E;&#x7684;&#xFF0C;&#x63D2;&#x5230;&#x8FD9;&#x4E2A;&#x4EFB;&#x52A1;&#x524D;&#x3002;&#x5F53;&#x65F6;&#x6211;&#x5C31;&#x8111;&#x62BD;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x56E0;&#x4E3A;&#x672C;&#x8EAB;&#x63D2;&#x5165;&#x7684;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x961F;&#x5217;&#xFF0C;&#x6240;&#x4EE5;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x63D2;&#x5165;&#x540E;&#xFF0C;&#x6574;&#x4F53;&#x4F9D;&#x65E7;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x3002;</p><p>&#x2003;&#x2003;&#x6539;&#x5199;&#x4E00;&#x4E0B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span> </span>{</span><br><span class="line">    <span class="keyword">constructor</span>() {</span><br><span class="line">        <span class="keyword">this</span>.taskQueue = [];</span><br><span class="line">    }</span><br><span class="line">    addTask(fn, delay) {</span><br><span class="line">        <span class="keyword">let</span> taskDTO = {</span><br><span class="line">            fn: fn,</span><br><span class="line">            priority: delay,</span><br><span class="line">        };</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.taskQueue.length === <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">this</span>.taskQueue.push(taskDTO);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">let</span> i = <span class="number">0</span>; </span><br><span class="line">            <span class="keyword">for</span> (;i &lt; <span class="keyword">this</span>.taskQueue.length; i++) {</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.taskQueue[i].priority &lt; taskDTO.priority) {</span><br><span class="line">                    <span class="keyword">this</span>.taskQueue.splice(i, <span class="number">0</span>, taskDTO);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (i === <span class="keyword">this</span>.taskQueue.length) {</span><br><span class="line">                <span class="keyword">this</span>.taskQueue.push(taskDTO);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    runTask() {</span><br><span class="line">        <span class="keyword">let</span> curTask = <span class="keyword">this</span>.taskQueue.shift();</span><br><span class="line">        curTask.fn();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x7B80;&#x5355;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF1A;</p><p>&#x2003;&#x2003;&#x5148;&#x58F0;&#x660E;&#x4E09;&#x4E2A;&#x8F93;&#x51FA;&#x51FD;&#x6570;&#xFF1A;</p><p><img src="/2019/11/06/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá/declare.jpg" alt=""></p><p>&#x2003;&#x2003;&#x5B9E;&#x4F8B;&#x5316;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#x5B9E;&#x4F8B;&#x5E76;&#x6DFB;&#x52A0;&#x4EFB;&#x52A1;&#xFF1A;</p><p><img src="/2019/11/06/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá/initial.jpg" alt=""></p><p>&#x2003;&#x2003;&#x6267;&#x884C;&#xFF1A;</p><p><img src="/2019/11/06/Êï∞ÊçÆÁªìÊûÑÂü∫Á°Ä-ÈòüÂàóÁØá/run.jpg" alt=""></p><p>&#x2003;&#x2003;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x57FA;&#x7840;&#x2026;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;ÈÇ£Êó•‚Ä¶Â§©ÊúóÊ∞îÊ∏ÖÔºåÊÉ†È£éÂíåÁïÖÔºåÈù¢ËØïËÄÅÂì•ËÆ©ÊàëÂÆûÁé∞‰∏Ä‰∏™‰ªªÂä°‰ºòÂÖàÁ∫ßÈòüÂàó„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ËÆ°ÁÆóÊú∫Âü∫Á°Ä" scheme="https://chrisdeo.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Êï∞ÊçÆÁªìÊûÑ" scheme="https://chrisdeo.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>JSON.stringifyÂ§öÂèÇÊï∞ÁöÑÂ∫îÁî®ÔºàÂçäËØëÔºâ</title>
    <link href="https://chrisdeo.github.io/2019/11/05/JSON-stringify%E5%A4%9A%E5%8F%82%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%88%E8%AF%91%EF%BC%89/"/>
    <id>https://chrisdeo.github.io/2019/11/05/JSON-stringifyÂ§öÂèÇÊï∞ÁöÑÂ∫îÁî®ÔºàËØëÔºâ/</id>
    <published>2019-11-05T13:26:03.000Z</published>
    <updated>2019-11-05T14:10:05.609Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4E0D;&#x79EF;&#x8DEC;&#x6B65;&#xFF0C;&#x65E0;&#x4EE5;&#x81F3;&#x5343;&#x91CC;&#x3002;</p></blockquote><p>&#x2003;&#x2003;<code>JSON.stringify</code>&#x8FD9;&#x4E2A;API&#x76F8;&#x4FE1;JSer&#x90FD;&#x4E0D;&#x964C;&#x751F;&#x3002;&#x5728;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x672C;&#x5730;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x5B83;&#x5C06;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4F53;&#x5904;&#x7406;&#x6210;<code>JSON</code>&#x5B57;&#x7B26;&#x4E32;&#x5B58;&#x5230;<code>storage</code>&#x5185;&#x3001;&#x53E6;&#x5916;&#x5927;&#x90E8;&#x5206;&#x573A;&#x666F;&#x7684;&#x540E;&#x7AEF;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x4F53;&#x4E5F;&#x662F;<code>JSON</code>&#x4E32;&#x7684;&#x683C;&#x5F0F;&#x3002;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5BF9;&#x8FD9;&#x4E2A;API&#x7684;&#x5370;&#x8C61;&#x5C31;&#x505C;&#x7559;&#x5728;&#x4F20;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x60C5;&#x666F;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x5B83;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x591A;&#x4E2A;&#x53C2;&#x6570;XD&#x3002;</p><a id="more"></a><h3 id="&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x56DE;&#x8C03;&#x51FD;&#x6570;"><a href="#&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x56DE;&#x8C03;&#x51FD;&#x6570;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x56DE;&#x8C03;&#x51FD;&#x6570;"></a>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x56DE;&#x8C03;&#x51FD;&#x6570;</h3><p>&#x2003;&#x2003;&#x5148;&#x770B;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: [<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>]</span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"></span><br><span class="line"><span class="comment">//{&quot;name&quot;:&quot;Pawel&quot;,&quot;friends&quot;:[&quot;Dan&quot;,&quot;Pedro&quot;,&quot;Mr Gregory&quot;]}</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6CA1;&#x4EC0;&#x4E48;&#x6BDB;&#x75C5;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x5F00;&#x5934;&#x8BF4;&#x7684;&#x88AB;&#x4F7F;&#x7528;&#x6700;&#x591A;&#x7684;&#x4E00;&#x79CD;&#x573A;&#x666F;&#x3002;</p><h4 id="&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;"><a href="#&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;" class="headerlink" title="&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;"></a>&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x5904;&#x7406;</h4><p>&#x2003;&#x2003;&#x518D;&#x5F80;&#x4E0B;&#x770B;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>])</span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"></span><br><span class="line"><span class="comment">// {&quot;name&quot;:&quot;Pawel&quot;,&quot;friends&quot;:{}}</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6B64;&#x65F6;&#xFF0C;&#x5185;&#x90E8;&#x662F;&#x4E00;&#x4E2A;<code>Set</code>&#x7ED3;&#x6784;&#x4E86;&#xFF0C;&#x8FD9;&#x79CD;&#x7ED3;&#x6784;&#x5728;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#xFF0C;<strong>&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x6216;&#x8005;&#x5904;&#x7406;&#x4E3A;<code>null</code></strong>&#x3002;&#x540C;&#x7B49;&#x60C5;&#x51B5;&#x7684;&#x8FD8;&#x6709;<code>WeakSet</code>&#x3001;<code>Map</code>&#x3001;<code>WeakMap</code>&#x3002;</p><p>&#x2003;&#x2003;&#x6709;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x529E;&#x6CD5;&#x53EF;&#x4EE5;&#x989D;&#x5916;&#x5904;&#x7406;&#x5462;&#xFF1F;&#x6709;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x8FDB;&#x53BB;&#xFF0C;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x652F;&#x6301;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x539F;&#x5E8F;&#x5217;&#x5316;&#x5BF9;&#x8C61;&#x7684;<code>key</code>&#x548C;<code>value</code>&#x3002;</p><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x50CF;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x5904;&#x7406;&#xFF0C;&#x901A;&#x8FC7;<code>instanceof</code>&#x5224;&#x65AD;&#x4F20;&#x5165;<code>value</code>&#x662F;&#x7531;<code>Set</code>&#x6784;&#x9020;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x540C;&#x65F6;&#x501F;&#x52A9;&#x5185;&#x90E8;&#x7684;<code>iterator</code>&#x8FDB;&#x884C;&#x89E3;&#x6784;&#x8F6C;&#x6210;&#x6570;&#x7EC4;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>])</span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude, (key, value) =&gt;</span><br><span class="line">  value <span class="keyword">instanceof</span> <span class="built_in">Set</span> ? [...value] : value</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"><span class="comment">// {&quot;name&quot;:&quot;Pawel&quot;,&quot;friends&quot;:[&quot;Dan&quot;,&quot;Pedro&quot;,&quot;Mr Gregory&quot;]}</span></span><br></pre></td></tr></tbody></table></figure><h4 id="&#x5B9A;&#x5236;&#x66FF;&#x6362;&#x5185;&#x5BB9;"><a href="#&#x5B9A;&#x5236;&#x66FF;&#x6362;&#x5185;&#x5BB9;" class="headerlink" title="&#x5B9A;&#x5236;&#x66FF;&#x6362;&#x5185;&#x5BB9;"></a>&#x5B9A;&#x5236;&#x66FF;&#x6362;&#x5185;&#x5BB9;</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Second argument as a replacer function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Dan&quot;</span></span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude, (key, value) =&gt;</span><br><span class="line">  key === <span class="string">&quot;name&quot;</span> ? <span class="string">&quot;Pawel&quot;</span> : value</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"><span class="comment">// {&quot;name&quot;:&quot;Pawel&quot;}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x6570;&#x7EC4;"><a href="#&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x6570;&#x7EC4;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x6570;&#x7EC4;"></a>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x6570;&#x7EC4;</h3><h4 id="&#x8BBE;&#x7F6E;&#x767D;&#x540D;&#x5355;&#xFF08;&#x8FC7;&#x6EE4;key&#xFF09;"><a href="#&#x8BBE;&#x7F6E;&#x767D;&#x540D;&#x5355;&#xFF08;&#x8FC7;&#x6EE4;key&#xFF09;" class="headerlink" title="&#x8BBE;&#x7F6E;&#x767D;&#x540D;&#x5355;&#xFF08;&#x8FC7;&#x6EE4;key&#xFF09;"></a>&#x8BBE;&#x7F6E;&#x767D;&#x540D;&#x5355;&#xFF08;&#x8FC7;&#x6EE4;key&#xFF09;</h4><p>&#x2003;&#x2003;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0E;&#x4E0A;&#x9762;&#x4E0D;&#x592A;&#x4E00;&#x6837;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F1A;&#x4F20;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x5185;&#x5BB9;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x5BF9;&#x8C61;&#x7684;<code>key</code>&#x5C5E;&#x6027;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Second argument as an array of white-listed keywords</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>])</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude, [<span class="string">&quot;name&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"><span class="comment">// {&quot;name&quot;:&quot;Pawel&quot;}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5206;&#x9694;&#x7B26;&#x4F5C;&#x7528;"><a href="#&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5206;&#x9694;&#x7B26;&#x4F5C;&#x7528;" class="headerlink" title="&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5206;&#x9694;&#x7B26;&#x4F5C;&#x7528;"></a>&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5206;&#x9694;&#x7B26;&#x4F5C;&#x7528;</h3><p>&#x2003;&#x2003;&#x5B9E;&#x9645;&#x6548;&#x679C;&#x6709;&#x70B9;&#x50CF;&#x683C;&#x5F0F;&#x5316;&#x540E;&#x586B;&#x5145;&#x7F29;&#x8FDB;&#xFF0C;&#x586B;&#x5145;&#x5185;&#x5BB9;&#x53D6;&#x51B3;&#x4E8E;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x3002;</p><p>&#x2003;&#x2003;&#x5F53;&#x53C2;&#x6570;&#x4E3A;<code>number</code>&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x5E8F;&#x5217;&#x5C06;&#x6309;&#x7167;&#x8BE5;<code>number</code>&#x6570;&#x503C;&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x7A7A;&#x683C;&#x683C;&#x5F0F;&#x5316;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Third argument as a number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: [<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>]</span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude, <span class="literal">null</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"><span class="comment">// {</span></span><br><span class="line"><span class="comment">//   &quot;name&quot;: &quot;Pawel&quot;,</span></span><br><span class="line"><span class="comment">//   &quot;friends&quot;: [</span></span><br><span class="line"><span class="comment">//       &quot;Dan&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;Pedro&quot;,</span></span><br><span class="line"><span class="comment">//       &quot;Mr Gregory&quot;</span></span><br><span class="line"><span class="comment">//   ]</span></span><br><span class="line"><span class="comment">// }</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5F53;&#x53C2;&#x6570;&#x4E3A;<code>string</code>&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x5E8F;&#x5217;&#x5C06;&#x4EE5;&#x8BE5;<code>string</code>&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x683C;&#x5F0F;&#x5316;&#x586B;&#x5145;&#x3002;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Third argument as a string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dude = {</span><br><span class="line">  name: <span class="string">&quot;Pawel&quot;</span>,</span><br><span class="line">  friends: [<span class="string">&quot;Dan&quot;</span>, <span class="string">&quot;Pedro&quot;</span>, <span class="string">&quot;Mr Gregory&quot;</span>]</span><br><span class="line">};</span><br><span class="line"><span class="keyword">const</span> dudeStringified = <span class="built_in">JSON</span>.stringify(dude, <span class="literal">null</span>, <span class="string">&quot;&#x1F346;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dudeStringified);</span><br><span class="line"><span class="comment">// {</span></span><br><span class="line"><span class="comment">// &#x1F346;&quot;name&quot;: &quot;Pawel&quot;,</span></span><br><span class="line"><span class="comment">// &#x1F346;&quot;friends&quot;: [</span></span><br><span class="line"><span class="comment">// &#x1F346;&#x1F346;&quot;Dan&quot;,</span></span><br><span class="line"><span class="comment">// &#x1F346;&#x1F346;&quot;Pedro&quot;,</span></span><br><span class="line"><span class="comment">// &#x1F346;&#x1F346;&quot;Mr Gregory&quot;</span></span><br><span class="line"><span class="comment">// &#x1F346;]</span></span><br><span class="line"><span class="comment">// }</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰∏çÁßØË∑¨Ê≠•ÔºåÊó†‰ª•Ëá≥ÂçÉÈáå„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;code&gt;JSON.stringify&lt;/code&gt;Ëøô‰∏™APIÁõ∏‰ø°JSerÈÉΩ‰∏çÈôåÁîü„ÄÇÂú®Êàë‰ª¨ËøõË°åÊï∞ÊçÆÊú¨Âú∞ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÊó∂ÂÄôÂ∞±‰ºö‰ΩøÁî®ÂÆÉÂ∞Ü‰∏Ä‰∏™Êï∞ÊçÆ‰ΩìÂ§ÑÁêÜÊàê&lt;code&gt;JSON&lt;/code&gt;Â≠óÁ¨¶‰∏≤Â≠òÂà∞&lt;code&gt;storage&lt;/code&gt;ÂÜÖ„ÄÅÂè¶Â§ñÂ§ßÈÉ®ÂàÜÂú∫ÊôØÁöÑÂêéÁ´ØËøîÂõûÊï∞ÊçÆ‰Ωì‰πüÊòØ&lt;code&gt;JSON&lt;/code&gt;‰∏≤ÁöÑÊ†ºÂºè„ÄÇÈÄöÂ∏∏Êàë‰ª¨ÂØπËøô‰∏™APIÁöÑÂç∞Ë±°Â∞±ÂÅúÁïôÂú®‰º†‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÊÉÖÊôØÔºå‰ΩÜÂÆûÈôÖ‰∏äÂÆÉÂèØ‰ª•Êé•Êî∂Â§ö‰∏™ÂèÇÊï∞XD„ÄÇ&lt;/p&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="https://chrisdeo.github.io/tags/Javascript/"/>
    
      <category term="JSON" scheme="https://chrisdeo.github.io/tags/JSON/"/>
    
  </entry>
  
  <entry>
    <title>ReactÁöÑChildren‰∏écloneElement</title>
    <link href="https://chrisdeo.github.io/2019/10/30/React%E7%9A%84Children%E4%B8%8EcloneElement/"/>
    <id>https://chrisdeo.github.io/2019/10/30/ReactÁöÑChildren‰∏écloneElement/</id>
    <published>2019-10-30T00:55:54.000Z</published>
    <updated>2019-11-05T13:22:21.840Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>&#x2003;&#x4ECB;&#x7ECD;&#x4FE9;&#x5E73;&#x5E38;&#x6CA1;&#x4F7F;&#x7528;&#x7684;React API&#xFF0C;&#x8FD1;&#x65E5;&#x8E29;&#x96F7;&#x4E86;&#xFF0C;&#x9042;&#x501F;&#x6B64;&#x7BC7;&#x63D0;&#x51FA;&#x6765;&#x54C1;&#x54C1;&#x2026;</p></blockquote><a id="more"></a><p>&#x2003;&#x2003;&#x9996;&#x5148;&#x8FD9;&#x4FE9;&#x8D27;&#x540C;&#x5C5E;&#x4E8E;React&#x7684;&#x9876;&#x5C42;API&#xFF0C;&#x5373;&#x6211;&#x4EEC;<code>import React from &apos;react&apos;;</code>&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>React.xxx</code>&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8C03;&#x7528;&#x3002;</p><p>&#x2003;&#x2003;&#x518D;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x5BF9;&#x5B83;&#x4EEC;&#x7684;&#x5212;&#x5206;&#xFF1A;</p><p><img src="/2019/10/30/ReactÁöÑChildren‰∏écloneElement/doc.jpg" alt=""></p><p>&#x2003;&#x2003;&#x56FE;&#x4E2D;&#x7684;&#x51E0;&#x4E2A;API&#x90FD;&#x662F;&#x5BF9;<code>React</code>&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#xFF0C;<code>isValidElement</code>&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;&#xFF0C;&#x7528;&#x6765;&#x6821;&#x9A8C;&#x5165;&#x53C2;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x5408;&#x6CD5;&#x7684;<code>React</code>&#x5143;&#x7D20;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#x3002;</p><h3 id="React-Children"><a href="#React-Children" class="headerlink" title="React.Children"></a>React.Children</h3><p>&#x2003;&#x2003;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;<code>props</code>&#x5BF9;&#x8C61;&#x4E2D;&#x8FD8;&#x6709;<code>children</code>&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x3002;&#x5B83;&#x80FD;&#x591F;&#x4ECE;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x51CF;&#x5C11;&#x6211;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x5185;&#x7684;&#x5D4C;&#x5957;&#x5C42;&#x7EA7;&#xFF0C;&#x53EF;&#x80FD;&#x8FD9;&#x6837;&#x63CF;&#x8FF0;&#x6709;&#x70B9;&#x62BD;&#x8C61;&#xFF0C;&#x4E3E;&#x4E2A;&#x6817;&#x5B50;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x6709;&#x4E2A;Modal&#x6A21;&#x6001;&#x6846;&#x7EC4;&#x4EF6;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Modal</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>{</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6709;&#x5F88;&#x591A;&#x573A;&#x666F;&#x9700;&#x8981;&#x5728;Modal&#x6846;&#x5185;&#x5C55;&#x793A;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x7ED3;&#x6784;&#x7C7B;&#x4F3C;&#x4E0B;&#x9762;</span></span><br><span class="line"></span><br><span class="line">&lt;Modal&gt;</span><br><span class="line">    &lt;Content /&gt;</span><br><span class="line">&lt;<span class="regexp">/Modal&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ &#x7684;&#x786E;&#x53EF;&#x4EE5;&#x5728;&#x5B9A;&#x4E49;Modal&#x7684;&#x6587;&#x4EF6;&#x5185;import&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x5B83;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x5957;&#x5957;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x8FD9;&#x79CD;&#x65B9;&#x6848;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">render() {</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;</span></span><br><span class="line"><span class="regexp">            {this.props.children}</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x8FD9;&#x6837;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x7236;&#x7EC4;&#x4EF6;&#x5C31;&#x548C;&#x53EF;&#x80FD;&#x4F20;&#x5165;&#x7684;<code>children</code>&#x89E3;&#x8026;&#x4E86;&#xFF0C;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x662F;&#x72EC;&#x7ACB;&#x7684;&#xFF0C;&#x5404;&#x53F8;&#x5176;&#x804C;&#x3002;&#x66F4;&#x591A;&#x7684;&#x5173;&#x4E8E;<code>props.children</code>&#x7684;&#x8BED;&#x6CD5;&#x9610;&#x91CA;&#x53EF;&#x4EE5;&#x9605;&#x8BFB;<a href="https://reactjs.org/docs/jsx-in-depth.html#children-in-jsx" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p><p>&#x2003;&#x2003;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;<code>props.children</code>&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x9ED1;&#x76D2;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x5B83;&#x53EF;&#x80FD;&#x4F20;&#x5165;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x4E0D;&#x53EF;&#x77E5;&#x7684;&#xFF08;&#x8868;&#x8FBE;&#x5F0F;&#x3001;&#x5E03;&#x5C14;&#x3001;<code>render function</code>&#x7B49;&#x7B49;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x90A3;&#x5176;&#x5B9E;&#x6CA1;&#x4EC0;&#x4E48;&#x6240;&#x8C13;&#x3002;&#x4F46;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x610F;&#x8BC6;&#x4EE5;&#x4E3A;&#x662F;&#x4E2A;&#x6570;&#x7EC4;&#x8FDB;&#x884C;<code>props.children.map</code>&#x8FD9;&#x6837;&#x7684;&#x8C03;&#x7528;&#x5C31;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x975E;<code>Array</code>&#x5C31;&#x76F4;&#x63A5;&#x62A5;<code>TypeError</code>&#x4E86;&#x3002;&#x90A3;&#x600E;&#x4E48;&#x5904;&#x7406;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x666F;&#x5462;&#xFF1F;</p><p>&#x2003;&#x2003;&#x5176;&#x5B9E;<code>React.Children</code>&#x6070;&#x597D;&#x5C31;&#x662F;&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x5904;&#x7406;<code>props.children</code>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x80FD;&#x529B;&#x7684;API&#x3002;<strong>&#x6CE8;&#x610F;&#x8FD9;&#x91CC;<code>React.Children</code>&#x7684;<code>Children</code>&#x662F;&#x5927;&#x5199;</strong>&#x3002;</p><h4 id="React-Children-map"><a href="#React-Children-map" class="headerlink" title="React.Children.map"></a>React.Children.map</h4><p>&#x2003;&#x2003;<code>React.Children.map(children, function[(thisArg)])</code>&#x8FD9;&#x4E2A;&#x7C7B;&#x65B9;&#x6CD5;&#x80FD;&#x591F;cover&#x524D;&#x6587;&#x6211;&#x63D0;&#x5230;&#x7684;&#x672A;&#x77E5;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0B;&#x7684;&#x904D;&#x5386;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x4FEE;&#x6539;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React.Children.map(props.children, child =&gt; {})</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E2A;API&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x8981;&#x5904;&#x7406;&#x7684;&#x9ED1;&#x76D2;<code>prop.children</code>&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x5165;&#x53C2;&#x56DE;&#x8C03;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x904D;&#x5386;&#x7684;&#x5143;&#x7D20;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x5B9A;&#x5236;&#x5316;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p><p>&#x2003;&#x2003;&#x7B14;&#x8005;&#x7ED3;&#x5408;&#x6E90;&#x7801;&#x5F97;&#x5230;&#x5F53;<code>props.children</code>&#x4E3A;<code>null</code>&#x548C;<code>undefined</code>&#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x539F;&#x503C;&#x8FD4;&#x56DE;&#xFF0C;&#x5176;&#x4F59;&#x60C5;&#x666F;&#x5219;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</p><h4 id="React-Children-forEach"><a href="#React-Children-forEach" class="headerlink" title="React.Children.forEach"></a>React.Children.forEach</h4><p>&#x2003;&#x2003;&#x8DDF;<code>React.Children.map</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x8FED;&#x4EE3;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#x3002;<code>undefined</code>&#x548C;<code>null</code>&#x65F6;&#x7684;&#x5224;&#x65AD;&#x903B;&#x8F91;&#x540C;&#x4E0A;&#x3002;</p><h4 id="React-Children-count"><a href="#React-Children-count" class="headerlink" title="React.Children.count"></a>React.Children.count</h4><p>&#x2003;&#x2003;&#x8FD4;&#x56DE;&#x5176;&#x4E2D;&#x5185;&#x90E8;&#x5143;&#x7D20;&#x6570;&#xFF0C;&#x5176;&#x503C;&#x4E0E;&#x524D;&#x9762;&#x4E24;&#x4E2A;&#x8FED;&#x4EE3;&#x65B9;&#x6CD5;&#x7684;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#x6B21;&#x6570;&#x76F8;&#x7B49;&#x3002;</p><h4 id="React-Children-only"><a href="#React-Children-only" class="headerlink" title="React.Children.only"></a>React.Children.only</h4><p>&#x2003;&#x2003;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x4F20;&#x5165;&#x7684;<code>children</code>&#x662F;&#x5426;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>child</code>&#x3002;&#x6CE8;&#x610F;&#x63A5;&#x6536;&#x7C7B;&#x578B;&#x662F;<code>React element</code>&#x3002;&#x4E0D;&#x80FD;&#x62FF;<code>React.Children.map()</code>&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x518D;&#x53BB;&#x5224;&#x65AD;&#x662F;&#x51E0;&#x4E2A;<code>child</code>&#xFF0C;&#x56E0;&#x4E3A;&#x6B64;&#x65F6;&#x4F60;&#x62FF;&#x5230;&#x7684;&#x5DF2;&#x7136;&#x662F;&#x4E00;&#x4E2A;<code>Array</code>&#x7C7B;&#x578B;&#x3002;</p><h4 id="React-Children-toArray"><a href="#React-Children-toArray" class="headerlink" title="React.Children.toArray"></a>React.Children.toArray</h4><p>&#x2003;&#x2003;&#x8FD9;&#x4E2A;API&#x4F1A;&#x5C06;&#x9ED1;&#x76D2;&#x7684;<code>props.children</code>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4EE5;&#x6241;&#x5E73;&#x7684;<code>Array</code>&#x7ED3;&#x6784;&#x66B4;&#x9732;&#x7ED9;&#x6211;&#x4EEC;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#xFF1A;</p><p><img src="/2019/10/30/ReactÁöÑChildren‰∏écloneElement/ds.jpg" alt=""></p><p>&#x2003;&#x2003;&#x5E38;&#x7528;&#x5728;&#x5F80;&#x4E0B;&#x4F20;<code>props</code>&#x65F6;&#xFF0C;&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#x6216;&#x8FC7;&#x6EE4;&#x90E8;&#x5206;<code>children</code>&#x7684;&#x60C5;&#x666F;&#x3002;</p><h3 id="React-cloneElement"><a href="#React-cloneElement" class="headerlink" title="React.cloneElement"></a>React.cloneElement</h3><p>&#x2003;&#x2003;&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x94FA;&#x57AB;&#xFF0C;&#x8FD9;&#x4E2A;API&#x7684;&#x5F15;&#x5165;&#x5C31;&#x6BD4;&#x8F83;&#x81EA;&#x7136;&#x4E86;&#xFF0C;&#x524D;&#x6587;&#x4E2D;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>React.Children</code>&#x7684;&#x7C7B;&#x65B9;&#x6CD5;&#x5F97;&#x5230;&#x4E86;&#x8BBF;&#x95EE;&#x672C;&#x662F;&#x9ED1;&#x76D2;&#x7684;<code>props.children</code>&#x7684;&#x80FD;&#x529B;&#x3002;<code>React.cloneElement</code>&#x5219;&#x662F;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x5728;&#x64CD;&#x4F5C;<code>React element</code>&#x65F6;&#xFF0C;&#x8FDB;&#x884C;&#x6D45;&#x5C42;&#x7684;&#x65B0;<code>props merge</code>&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x65B0;<code>children</code>&#x5219;&#x4F1A;&#x66FF;&#x6362;&#x65E7;&#x7684;<code>children</code>&#x3002;&#x539F;<code>element</code>&#x7684;<code>key</code>&#x548C;<code>ref</code>&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#x3002;</p><p>&#x2003;&#x2003;&#x770B;&#x4E0B;API&#x5B9A;&#x4E49;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">React.cloneElement(</span><br><span class="line">  element,</span><br><span class="line">  [props],</span><br><span class="line">  [...children]</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x5176;&#x5B9E;&#x8DDF;<code>React.createElement</code>&#x7684;&#x6784;&#x9020;&#x6709;&#x70B9;&#x50CF;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(</span><br><span class="line">  type,</span><br><span class="line">  [props],</span><br><span class="line">  [...children]</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6BD5;&#x7ADF;&#x662F;&#x62F7;&#x8D1D;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7EC4;&#x5408;&#x5143;&#x7D20;&#xFF0C;<code>React.cloneElement</code>&#x5904;&#x7406;<code>element</code>&#x65F6;&#x53EF;&#x4EE5;&#x5927;&#x81F4;&#x7406;&#x89E3;&#x6210;<code>&lt;element.type {...element.props} {...props}&gt;{children}&lt;/element.type&gt;</code>&#x3002;</p><p>&#x2003;&#x2003;&#x90A3;&#x8FD9;&#x4E2A;API&#x5230;&#x5E95;&#x6709;&#x5565;&#x7528;&#x5462;&#xFF1F;&#x4E3E;&#x4E00;&#x4E2A;&#x573A;&#x666F;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Tabs active=<span class="string">&apos;&apos;</span>&gt;</span><br><span class="line">    &lt;Tab id=<span class="string">&apos;a&apos;</span> title=<span class="string">&apos;a&apos;</span>&gt;</span><br><span class="line">        Content: {<span class="built_in">Math</span>.random()}</span><br><span class="line">    &lt;<span class="regexp">/Tab&gt;</span></span><br><span class="line"><span class="regexp">    &lt;Tab id=&apos;b&apos; title=&apos;b&apos;&gt;</span></span><br><span class="line"><span class="regexp">        Content: {Math.random()}</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Tab&gt;</span><br><span class="line">    &lt;Tab id=<span class="string">&apos;c&apos;</span> title=<span class="string">&apos;c&apos;</span>&gt;</span><br><span class="line">        Content: {<span class="built_in">Math</span>.random()}</span><br><span class="line">    &lt;<span class="regexp">/Tab&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Tabs&gt;</span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x6211;&#x5E0C;&#x671B;&#x70B9;&#x51FB;&#x5BF9;&#x5E94;<code>Tab</code>&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x518D;&#x663E;&#x793A;Content&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x518D;&#x4FEE;&#x6539;&#x4EE5;&#x4E0A;&#x7EC4;&#x4EF6;&#x7ED3;&#x6784;&#xFF08;&#x4E0D;&#x989D;&#x5916;&#x5728;&#x6BCF;&#x4E2A;&#x5B50;&#x7EC4;&#x4EF6;&#x4E0A;&#x52A0;<code>onClick</code>&#x7684;<code>props</code>&#xFF09;&#xFF0C;&#x5B9E;&#x9645;&#x5C55;&#x793A;&#x7C7B;&#x4F3C;&#x4E0B;&#x56FE;&#xFF1A;</p><p><img src="/2019/10/30/ReactÁöÑChildren‰∏écloneElement/display.jpg" alt=""></p><p>&#x2003;&#x2003;&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x4E86;&#x524D;&#x6587;&#x4E2D;&#x4ECB;&#x7ECD;&#x7684;API&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5927;&#x81F4;&#x6709;&#x4E24;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4E3B;&#x4F53;&#x601D;&#x8DEF;&#x662F;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x533A;&#x5206;&#x5728;&#x662F;&#x4E0D;&#x662F;&#x6BCF;&#x4E2A;&#x5B50;&#x7EC4;&#x4EF6;&#x90FD;&#x6302;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x4EA6;&#x6216;&#x5728;&#x7236;&#x7EC4;&#x4EF6;&#x4E0A;&#x6302;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x4EE3;&#x7406;&#xFF0C;&#x53BB;&#x5224;&#x65AD;&#x3002;</p><p>&#x2003;&#x2003;&#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;HOOKS&#x7684;&#x51FD;&#x6570;&#x5F0F;&#x5199;&#x6CD5;&#xFF1A;</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Tabs = <span class="function"><span class="params">props</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> { children, ...rest } = props;</span><br><span class="line">    <span class="keyword">const</span> [active, setActive] = useState(rest.active);</span><br><span class="line">    <span class="comment">// &#x4E8B;&#x4EF6;&#x4EE3;&#x7406;</span></span><br><span class="line">    <span class="keyword">let</span> handleClick = <span class="function"><span class="params">e</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (e.target.nodeName === <span class="string">&apos;A&apos;</span>) {</span><br><span class="line">            setActive(e.target.id);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;header&gt;</span><br><span class="line">            &lt;nav className={styles.nav}&gt;</span><br><span class="line">                &lt;ul onClick={handleClick}&gt;</span><br><span class="line">                    {</span><br><span class="line">                        React.Children.map(children, child =&gt; React.cloneElement(child, {<span class="attr">active</span>: active}))</span><br><span class="line">                    }</span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>nav&gt;</span><br><span class="line">        &lt;<span class="regexp">/header&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">}</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Tabs = <span class="function"><span class="params">props</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> { children, ...rest } = props;</span><br><span class="line">    <span class="keyword">const</span> [active, setActive] = useState(rest.active);</span><br><span class="line">    <span class="comment">// &#x6BCF;&#x4E00;&#x4E2A;child &#x90FD;&#x7ED1;&#x5B9A;&#x56DE;&#x8C03;</span></span><br><span class="line">    <span class="keyword">let</span> toggleActive = <span class="function">(<span class="params">e, id</span>) =&gt;</span> {</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        setActive(id);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;header&gt;</span><br><span class="line">            &lt;nav className={styles.nav}&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    {</span><br><span class="line">                        React.Children.map(children, child =&gt; React.cloneElement(child, {<span class="attr">active</span>: active, <span class="attr">toggleActive</span>: toggleActive}))</span><br><span class="line">                    }</span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>nav&gt;</span><br><span class="line">        &lt;<span class="regexp">/header&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">}</span></span><br></pre></td></tr></tbody></table></figure><p>&#x2003;&#x2003;&#x4E3B;&#x4F53;&#x601D;&#x60F3;&#x90FD;&#x7C7B;&#x4F3C;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x5B50;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x901A;&#x8FC7;<code>cloneElement</code>&#x7684;&#x65B9;&#x5F0F;<code>merge</code>&#x8FDB;&#x53BB;&#x3002;</p><h3 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h3><p>&#x2003;&#x2003;<code>React.Children</code>&#x63D0;&#x4F9B;&#x4E86;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x9ED1;&#x76D2;<code>props.children</code>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x80FD;&#x529B;&#xFF1B;<br>&#x2003;&#x2003;<code>React.cloneElement</code>&#x63A5;&#x6536;&#x4E00;&#x4E2A;<code>React element</code>&#x5E76;&#x652F;&#x6301;&#x5F80;&#x5176;&#x4E2D;&#x6D45;&#x5C42;&#x5408;&#x5E76;<code>props</code>&#xFF0C;&#x66FF;&#x6362;&#x65E7;<code>children</code>&#xFF1B;&#x7B14;&#x8005;&#x770B;&#x6765;&#x8BE5;API&#x53EF;&#x4EE5;&#x4ECE;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x7684;&#x91CD;&#x590D;&#x4E66;&#x5199;&#xFF0C;&#x4F7F;&#x7EC4;&#x4EF6;&#x6807;&#x7B7E;&#x8868;&#x8FBE;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#x3002;</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;emsp;‰ªãÁªç‰ø©Âπ≥Â∏∏Ê≤°‰ΩøÁî®ÁöÑReact APIÔºåËøëÊó•Ë∏©Èõ∑‰∫ÜÔºåÈÅÇÂÄüÊ≠§ÁØáÊèêÂá∫Êù•ÂìÅÂìÅ‚Ä¶&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://chrisdeo.github.io/tags/React/"/>
    
  </entry>
  
</feed>
